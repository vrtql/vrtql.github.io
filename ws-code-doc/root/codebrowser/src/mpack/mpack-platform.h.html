<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>mpack-platform.h source code [codebrowser/src/mpack/mpack-platform.h] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'codebrowser/src/mpack/mpack-platform.h'; var root_path = '../../..'; var data_path = '../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../..'>codebrowser</a>/<a href='..'>src</a>/<a href='./'>mpack</a>/<a href='mpack-platform.h.html'>mpack-platform.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Copyright (c) 2015-2021 Nicholas Fraser and the MPack authors</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> * Permission is hereby granted, free of charge, to any person obtaining a copy of</i></td></tr>
<tr><th id="5">5</th><td><i> * this software and associated documentation files (the "Software"), to deal in</i></td></tr>
<tr><th id="6">6</th><td><i> * the Software without restriction, including without limitation the rights to</i></td></tr>
<tr><th id="7">7</th><td><i> * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of</i></td></tr>
<tr><th id="8">8</th><td><i> * the Software, and to permit persons to whom the Software is furnished to do so,</i></td></tr>
<tr><th id="9">9</th><td><i> * subject to the following conditions:</i></td></tr>
<tr><th id="10">10</th><td><i> *</i></td></tr>
<tr><th id="11">11</th><td><i> * The above copyright notice and this permission notice shall be included in all</i></td></tr>
<tr><th id="12">12</th><td><i> * copies or substantial portions of the Software.</i></td></tr>
<tr><th id="13">13</th><td><i> *</i></td></tr>
<tr><th id="14">14</th><td><i> * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</i></td></tr>
<tr><th id="15">15</th><td><i> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS</i></td></tr>
<tr><th id="16">16</th><td><i> * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR</i></td></tr>
<tr><th id="17">17</th><td><i> * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER</i></td></tr>
<tr><th id="18">18</th><td><i> * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</i></td></tr>
<tr><th id="19">19</th><td><i> * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</i></td></tr>
<tr><th id="20">20</th><td><i> */</i></td></tr>
<tr><th id="21">21</th><td></td></tr>
<tr><th id="22">22</th><td><i class="doc">/**</i></td></tr>
<tr><th id="23">23</th><td><i class="doc"> *<span class="command"> @file</span></i></td></tr>
<tr><th id="24">24</th><td><i class="doc"> *</i></td></tr>
<tr><th id="25">25</th><td><i class="doc"> * Abstracts all platform-specific code from MPack and handles configuration</i></td></tr>
<tr><th id="26">26</th><td><i class="doc"> * options.</i></td></tr>
<tr><th id="27">27</th><td><i class="doc"> *</i></td></tr>
<tr><th id="28">28</th><td><i class="doc"> * This verifies the configuration and sets defaults based on the platform,</i></td></tr>
<tr><th id="29">29</th><td><i class="doc"> * contains implementations of standard C functions when libc is not available,</i></td></tr>
<tr><th id="30">30</th><td><i class="doc"> * and provides wrappers to all library functions.</i></td></tr>
<tr><th id="31">31</th><td><i class="doc"> *</i></td></tr>
<tr><th id="32">32</th><td><i class="doc"> * Documentation for configuration options is available here:</i></td></tr>
<tr><th id="33">33</th><td><i class="doc"> *</i></td></tr>
<tr><th id="34">34</th><td><i class="doc"> *     <a href="https://ludocode.github.io/mpack/group__config.html">https://ludocode.github.io/mpack/group__config.html</a></i></td></tr>
<tr><th id="35">35</th><td><i class="doc"> */</i></td></tr>
<tr><th id="36">36</th><td></td></tr>
<tr><th id="37">37</th><td><u>#<span data-ppcond="37">ifndef</span> <span class="macro" data-ref="_M/MPACK_PLATFORM_H">MPACK_PLATFORM_H</span></u></td></tr>
<tr><th id="38">38</th><td><u>#define <dfn class="macro" id="_M/MPACK_PLATFORM_H" data-ref="_M/MPACK_PLATFORM_H">MPACK_PLATFORM_H</dfn> 1</u></td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td></td></tr>
<tr><th id="41">41</th><td></td></tr>
<tr><th id="42">42</th><td><i class="doc">/**</i></td></tr>
<tr><th id="43">43</th><td><i class="doc"> * <span class="command">@defgroup</span> <span class="verb">config Configuration Options</span></i></td></tr>
<tr><th id="44">44</th><td><i class="doc"> *</i></td></tr>
<tr><th id="45">45</th><td><i class="doc"> * Defines the MPack configuration options.</i></td></tr>
<tr><th id="46">46</th><td><i class="doc"> *</i></td></tr>
<tr><th id="47">47</th><td><i class="doc"> * Custom configuration of MPack is not usually necessary. In almost all</i></td></tr>
<tr><th id="48">48</th><td><i class="doc"> * cases you can ignore this and use the defaults.</i></td></tr>
<tr><th id="49">49</th><td><i class="doc"> *</i></td></tr>
<tr><th id="50">50</th><td><i class="doc"> * If you do want to configure MPack, you can define the below options as part</i></td></tr>
<tr><th id="51">51</th><td><i class="doc"> * of your build system or project settings. This will override the below</i></td></tr>
<tr><th id="52">52</th><td><i class="doc"> * defaults.</i></td></tr>
<tr><th id="53">53</th><td><i class="doc"> *</i></td></tr>
<tr><th id="54">54</th><td><i class="doc"> * If you'd like to use a file for configuration instead, define</i></td></tr>
<tr><th id="55">55</th><td><i class="doc"> * <span class="command">@ref</span> <span class="verb">MPACK_HAS_CONFIG to 1 in your build system or project settings.</span></i></td></tr>
<tr><th id="56">56</th><td><i class="doc"> * This will cause MPack to include a file you create called<span class="command"> @c</span> <span class="arg">mpack-config.h</span></i></td></tr>
<tr><th id="57">57</th><td><i class="doc"> * in which you can define your configuration. This is useful if you need to</i></td></tr>
<tr><th id="58">58</th><td><i class="doc"> * include specific headers (such as a custom allocator) in order to configure</i></td></tr>
<tr><th id="59">59</th><td><i class="doc"> * MPack to use it.</i></td></tr>
<tr><th id="60">60</th><td><i class="doc"> *</i></td></tr>
<tr><th id="61">61</th><td><i class="doc"> * <span class="command">@warning</span> The value of all configuration options must be the same in</i></td></tr>
<tr><th id="62">62</th><td><i class="doc"> * all translation units of your project, as well as in the mpack source</i></td></tr>
<tr><th id="63">63</th><td><i class="doc"> * itself. These configuration options affect the layout of structs, among</i></td></tr>
<tr><th id="64">64</th><td><i class="doc"> * other things, which cannot be different in source files that are linked</i></td></tr>
<tr><th id="65">65</th><td><i class="doc"> * together.</i></td></tr>
<tr><th id="66">66</th><td><i class="doc"> *</i></td></tr>
<tr><th id="67">67</th><td><i class="doc"> * <span class="command">@note</span> MPack does not contain defaults for building inside the Linux kernel.</i></td></tr>
<tr><th id="68">68</th><td><i class="doc"> * There is a <span class="tag">&lt;a href="<a href="https://github.com/ludocode/mpack-linux-kernel">https://github.com/ludocode/mpack-linux-kernel</a>"&gt;</span></i></td></tr>
<tr><th id="69">69</th><td><i class="doc"> * configuration file for the Linux kernel<span class="tag">&lt;/a&gt;</span> that can be used instead.</i></td></tr>
<tr><th id="70">70</th><td><i class="doc"> *</i></td></tr>
<tr><th id="71">71</th><td><i class="doc"> * @{</i></td></tr>
<tr><th id="72">72</th><td><i class="doc"> */</i></td></tr>
<tr><th id="73">73</th><td></td></tr>
<tr><th id="74">74</th><td></td></tr>
<tr><th id="75">75</th><td></td></tr>
<tr><th id="76">76</th><td><i>/*</i></td></tr>
<tr><th id="77">77</th><td><i> * Pre-include checks</i></td></tr>
<tr><th id="78">78</th><td><i> *</i></td></tr>
<tr><th id="79">79</th><td><i> * These need to come before the user's mpack-config.h because they might be</i></td></tr>
<tr><th id="80">80</th><td><i> * including headers in it.</i></td></tr>
<tr><th id="81">81</th><td><i> */</i></td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td><i class="doc">/**<span class="command"> @cond</span> */</i></td></tr>
<tr><th id="84">84</th><td><u>#<span data-ppcond="84">if</span> defined(<span class="macro" data-ref="_M/_MSC_VER">_MSC_VER</span>) &amp;&amp; _MSC_VER &lt; 1800 &amp;&amp; !defined(<span class="macro" data-ref="_M/__cplusplus">__cplusplus</span>)</u></td></tr>
<tr><th id="85">85</th><td>    <u>#error "In Visual Studio 2012 and earlier, MPack must be compiled as C++. Enable the /Tp compiler flag."</u></td></tr>
<tr><th id="86">86</th><td><u>#<span data-ppcond="84">endif</span></u></td></tr>
<tr><th id="87">87</th><td></td></tr>
<tr><th id="88">88</th><td><u>#<span data-ppcond="88">if</span> defined(<span class="macro" data-ref="_M/_WIN32">_WIN32</span>) &amp;&amp; MPACK_INTERNAL</u></td></tr>
<tr><th id="89">89</th><td>    <u>#define _CRT_SECURE_NO_WARNINGS 1</u></td></tr>
<tr><th id="90">90</th><td><u>#<span data-ppcond="88">endif</span></u></td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td><u>#<span data-ppcond="92">ifndef</span> <span class="macro" data-ref="_M/__STDC_LIMIT_MACROS">__STDC_LIMIT_MACROS</span></u></td></tr>
<tr><th id="93">93</th><td>    <u>#define <dfn class="macro" id="_M/__STDC_LIMIT_MACROS" data-ref="_M/__STDC_LIMIT_MACROS">__STDC_LIMIT_MACROS</dfn> 1</u></td></tr>
<tr><th id="94">94</th><td><u>#<span data-ppcond="92">endif</span></u></td></tr>
<tr><th id="95">95</th><td><u>#<span data-ppcond="95">ifndef</span> <span class="macro" data-ref="_M/__STDC_FORMAT_MACROS">__STDC_FORMAT_MACROS</span></u></td></tr>
<tr><th id="96">96</th><td>    <u>#define <dfn class="macro" id="_M/__STDC_FORMAT_MACROS" data-ref="_M/__STDC_FORMAT_MACROS">__STDC_FORMAT_MACROS</dfn> 1</u></td></tr>
<tr><th id="97">97</th><td><u>#<span data-ppcond="95">endif</span></u></td></tr>
<tr><th id="98">98</th><td><u>#<span data-ppcond="98">ifndef</span> <span class="macro" data-ref="_M/__STDC_CONSTANT_MACROS">__STDC_CONSTANT_MACROS</span></u></td></tr>
<tr><th id="99">99</th><td>    <u>#define <dfn class="macro" id="_M/__STDC_CONSTANT_MACROS" data-ref="_M/__STDC_CONSTANT_MACROS">__STDC_CONSTANT_MACROS</dfn> 1</u></td></tr>
<tr><th id="100">100</th><td><u>#<span data-ppcond="98">endif</span></u></td></tr>
<tr><th id="101">101</th><td><i class="doc">/**<span class="command"> @endcond</span> */</i></td></tr>
<tr><th id="102">102</th><td></td></tr>
<tr><th id="103">103</th><td></td></tr>
<tr><th id="104">104</th><td></td></tr>
<tr><th id="105">105</th><td><i class="doc">/**</i></td></tr>
<tr><th id="106">106</th><td><i class="doc"> * <span class="command">@name</span> <span class="verb">File Configuration</span></i></td></tr>
<tr><th id="107">107</th><td><i class="doc"> * @{</i></td></tr>
<tr><th id="108">108</th><td><i class="doc"> */</i></td></tr>
<tr><th id="109">109</th><td></td></tr>
<tr><th id="110">110</th><td><i class="doc">/**</i></td></tr>
<tr><th id="111">111</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_HAS_CONFIG</span></i></td></tr>
<tr><th id="112">112</th><td><i class="doc"> *</i></td></tr>
<tr><th id="113">113</th><td><i class="doc"> * Causes MPack to include a file you create called<span class="command"> @c</span> <span class="arg">mpack-config.h</span> .</i></td></tr>
<tr><th id="114">114</th><td><i class="doc"> *</i></td></tr>
<tr><th id="115">115</th><td><i class="doc"> * The file is included before MPack sets any defaults for undefined</i></td></tr>
<tr><th id="116">116</th><td><i class="doc"> * configuration options. You can use it to configure MPack.</i></td></tr>
<tr><th id="117">117</th><td><i class="doc"> *</i></td></tr>
<tr><th id="118">118</th><td><i class="doc"> * This is off by default.</i></td></tr>
<tr><th id="119">119</th><td><i class="doc"> */</i></td></tr>
<tr><th id="120">120</th><td><u>#<span data-ppcond="120">if</span> defined(<span class="macro" data-ref="_M/MPACK_HAS_CONFIG">MPACK_HAS_CONFIG</span>)</u></td></tr>
<tr><th id="121">121</th><td>    <u>#if MPACK_HAS_CONFIG</u></td></tr>
<tr><th id="122">122</th><td>        <u>#include "mpack-config.h"</u></td></tr>
<tr><th id="123">123</th><td>    <u>#endif</u></td></tr>
<tr><th id="124">124</th><td><u>#<span data-ppcond="120">else</span></u></td></tr>
<tr><th id="125">125</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_HAS_CONFIG" data-ref="_M/MPACK_HAS_CONFIG">MPACK_HAS_CONFIG</dfn> 0</u></td></tr>
<tr><th id="126">126</th><td><u>#<span data-ppcond="120">endif</span></u></td></tr>
<tr><th id="127">127</th><td></td></tr>
<tr><th id="128">128</th><td><i class="doc">/**</i></td></tr>
<tr><th id="129">129</th><td><i class="doc"> * @}</i></td></tr>
<tr><th id="130">130</th><td><i class="doc"> */</i></td></tr>
<tr><th id="131">131</th><td><i class="doc"></i></td></tr>
<tr><th id="132">132</th><td><i class="doc">// this needs to come first since some stuff depends on it</i></td></tr>
<tr><th id="133">133</th><td><i class="doc">/**<span class="command"> @cond</span> */</i></td></tr>
<tr><th id="134">134</th><td><u>#<span data-ppcond="134">ifndef</span> <span class="macro" data-ref="_M/MPACK_NO_BUILTINS">MPACK_NO_BUILTINS</span></u></td></tr>
<tr><th id="135">135</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_NO_BUILTINS" data-ref="_M/MPACK_NO_BUILTINS">MPACK_NO_BUILTINS</dfn> 0</u></td></tr>
<tr><th id="136">136</th><td><u>#<span data-ppcond="134">endif</span></u></td></tr>
<tr><th id="137">137</th><td><i class="doc">/**<span class="command"> @endcond</span> */</i></td></tr>
<tr><th id="138">138</th><td></td></tr>
<tr><th id="139">139</th><td></td></tr>
<tr><th id="140">140</th><td></td></tr>
<tr><th id="141">141</th><td><i class="doc">/**</i></td></tr>
<tr><th id="142">142</th><td><i class="doc"> * <span class="command">@name</span> <span class="verb">Features</span></i></td></tr>
<tr><th id="143">143</th><td><i class="doc"> * @{</i></td></tr>
<tr><th id="144">144</th><td><i class="doc"> */</i></td></tr>
<tr><th id="145">145</th><td></td></tr>
<tr><th id="146">146</th><td><i class="doc">/**</i></td></tr>
<tr><th id="147">147</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_READER</span></i></td></tr>
<tr><th id="148">148</th><td><i class="doc"> *</i></td></tr>
<tr><th id="149">149</th><td><i class="doc"> * Enables compilation of the base Tag Reader.</i></td></tr>
<tr><th id="150">150</th><td><i class="doc"> */</i></td></tr>
<tr><th id="151">151</th><td><u>#<span data-ppcond="151">ifndef</span> <span class="macro" data-ref="_M/MPACK_READER">MPACK_READER</span></u></td></tr>
<tr><th id="152">152</th><td><u>#define <dfn class="macro" id="_M/MPACK_READER" data-ref="_M/MPACK_READER">MPACK_READER</dfn> 1</u></td></tr>
<tr><th id="153">153</th><td><u>#<span data-ppcond="151">endif</span></u></td></tr>
<tr><th id="154">154</th><td></td></tr>
<tr><th id="155">155</th><td><i class="doc">/**</i></td></tr>
<tr><th id="156">156</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_EXPECT</span></i></td></tr>
<tr><th id="157">157</th><td><i class="doc"> *</i></td></tr>
<tr><th id="158">158</th><td><i class="doc"> * Enables compilation of the static Expect API.</i></td></tr>
<tr><th id="159">159</th><td><i class="doc"> */</i></td></tr>
<tr><th id="160">160</th><td><u>#<span data-ppcond="160">ifndef</span> <span class="macro" data-ref="_M/MPACK_EXPECT">MPACK_EXPECT</span></u></td></tr>
<tr><th id="161">161</th><td><u>#define <dfn class="macro" id="_M/MPACK_EXPECT" data-ref="_M/MPACK_EXPECT">MPACK_EXPECT</dfn> 1</u></td></tr>
<tr><th id="162">162</th><td><u>#<span data-ppcond="160">endif</span></u></td></tr>
<tr><th id="163">163</th><td></td></tr>
<tr><th id="164">164</th><td><i class="doc">/**</i></td></tr>
<tr><th id="165">165</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_NODE</span></i></td></tr>
<tr><th id="166">166</th><td><i class="doc"> *</i></td></tr>
<tr><th id="167">167</th><td><i class="doc"> * Enables compilation of the dynamic Node API.</i></td></tr>
<tr><th id="168">168</th><td><i class="doc"> */</i></td></tr>
<tr><th id="169">169</th><td><u>#<span data-ppcond="169">ifndef</span> <span class="macro" data-ref="_M/MPACK_NODE">MPACK_NODE</span></u></td></tr>
<tr><th id="170">170</th><td><u>#define <dfn class="macro" id="_M/MPACK_NODE" data-ref="_M/MPACK_NODE">MPACK_NODE</dfn> 1</u></td></tr>
<tr><th id="171">171</th><td><u>#<span data-ppcond="169">endif</span></u></td></tr>
<tr><th id="172">172</th><td></td></tr>
<tr><th id="173">173</th><td><i class="doc">/**</i></td></tr>
<tr><th id="174">174</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_WRITER</span></i></td></tr>
<tr><th id="175">175</th><td><i class="doc"> *</i></td></tr>
<tr><th id="176">176</th><td><i class="doc"> * Enables compilation of the Writer.</i></td></tr>
<tr><th id="177">177</th><td><i class="doc"> */</i></td></tr>
<tr><th id="178">178</th><td><u>#<span data-ppcond="178">ifndef</span> <span class="macro" data-ref="_M/MPACK_WRITER">MPACK_WRITER</span></u></td></tr>
<tr><th id="179">179</th><td><u>#define <dfn class="macro" id="_M/MPACK_WRITER" data-ref="_M/MPACK_WRITER">MPACK_WRITER</dfn> 1</u></td></tr>
<tr><th id="180">180</th><td><u>#<span data-ppcond="178">endif</span></u></td></tr>
<tr><th id="181">181</th><td></td></tr>
<tr><th id="182">182</th><td><i class="doc">/**</i></td></tr>
<tr><th id="183">183</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_BUILDER</span></i></td></tr>
<tr><th id="184">184</th><td><i class="doc"> *</i></td></tr>
<tr><th id="185">185</th><td><i class="doc"> * Enables compilation of the Builder.</i></td></tr>
<tr><th id="186">186</th><td><i class="doc"> *</i></td></tr>
<tr><th id="187">187</th><td><i class="doc"> * The Builder API provides additional functions to the Writer for</i></td></tr>
<tr><th id="188">188</th><td><i class="doc"> * automatically determining the element count of compound elements so you do</i></td></tr>
<tr><th id="189">189</th><td><i class="doc"> * not have to specify them up-front.</i></td></tr>
<tr><th id="190">190</th><td><i class="doc"> *</i></td></tr>
<tr><th id="191">191</th><td><i class="doc"> * This requires a<span class="command"> @c</span> <span class="arg">malloc().</span> It is enabled by default if MPACK_WRITER is</i></td></tr>
<tr><th id="192">192</th><td><i class="doc"> * enabled and MPACK_MALLOC is defined.</i></td></tr>
<tr><th id="193">193</th><td><i class="doc"> *</i></td></tr>
<tr><th id="194">194</th><td><i class="doc"> * <span class="command">@see</span> mpack_build_map()</i></td></tr>
<tr><th id="195">195</th><td><i class="doc"> * <span class="command">@see</span> mpack_build_array()</i></td></tr>
<tr><th id="196">196</th><td><i class="doc"> * <span class="command">@see</span> mpack_complete_map()</i></td></tr>
<tr><th id="197">197</th><td><i class="doc"> * <span class="command">@see</span> mpack_complete_array()</i></td></tr>
<tr><th id="198">198</th><td><i class="doc"> */</i></td></tr>
<tr><th id="199">199</th><td><i class="doc">// This is defined furthur below after we've resolved whether we have malloc().</i></td></tr>
<tr><th id="200">200</th><td></td></tr>
<tr><th id="201">201</th><td><i class="doc">/**</i></td></tr>
<tr><th id="202">202</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_COMPATIBILITY</span></i></td></tr>
<tr><th id="203">203</th><td><i class="doc"> *</i></td></tr>
<tr><th id="204">204</th><td><i class="doc"> * Enables compatibility features for reading and writing older</i></td></tr>
<tr><th id="205">205</th><td><i class="doc"> * versions of MessagePack.</i></td></tr>
<tr><th id="206">206</th><td><i class="doc"> *</i></td></tr>
<tr><th id="207">207</th><td><i class="doc"> * This is disabled by default. When disabled, the behaviour is equivalent to</i></td></tr>
<tr><th id="208">208</th><td><i class="doc"> * using the default version, <span class="command">@ref</span> <span class="verb">mpack_version_current.</span></i></td></tr>
<tr><th id="209">209</th><td><i class="doc"> *</i></td></tr>
<tr><th id="210">210</th><td><i class="doc"> * Enable this if you need to interoperate with applications or data that do</i></td></tr>
<tr><th id="211">211</th><td><i class="doc"> * not support the new (v5) MessagePack spec. See the section on v4</i></td></tr>
<tr><th id="212">212</th><td><i class="doc"> * compatibility in <span class="command">@ref</span> <span class="verb">docs/protocol.md for more information.</span></i></td></tr>
<tr><th id="213">213</th><td><i class="doc"> */</i></td></tr>
<tr><th id="214">214</th><td><u>#<span data-ppcond="214">ifndef</span> <span class="macro" data-ref="_M/MPACK_COMPATIBILITY">MPACK_COMPATIBILITY</span></u></td></tr>
<tr><th id="215">215</th><td><u>#define <dfn class="macro" id="_M/MPACK_COMPATIBILITY" data-ref="_M/MPACK_COMPATIBILITY">MPACK_COMPATIBILITY</dfn> 0</u></td></tr>
<tr><th id="216">216</th><td><u>#<span data-ppcond="214">endif</span></u></td></tr>
<tr><th id="217">217</th><td></td></tr>
<tr><th id="218">218</th><td><i class="doc">/**</i></td></tr>
<tr><th id="219">219</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_EXTENSIONS</span></i></td></tr>
<tr><th id="220">220</th><td><i class="doc"> *</i></td></tr>
<tr><th id="221">221</th><td><i class="doc"> * Enables the use of extension types.</i></td></tr>
<tr><th id="222">222</th><td><i class="doc"> *</i></td></tr>
<tr><th id="223">223</th><td><i class="doc"> * This is disabled by default. Define it to 1 to enable it. If disabled,</i></td></tr>
<tr><th id="224">224</th><td><i class="doc"> * functions to read and write extensions will not exist, and any occurrence of</i></td></tr>
<tr><th id="225">225</th><td><i class="doc"> * extension types in parsed messages will flag <span class="command">@ref</span> <span class="verb">mpack_error_invalid.</span></i></td></tr>
<tr><th id="226">226</th><td><i class="doc"> *</i></td></tr>
<tr><th id="227">227</th><td><i class="doc"> * MPack discourages the use of extension types. See the section on extension</i></td></tr>
<tr><th id="228">228</th><td><i class="doc"> * types in <span class="command">@ref</span> <span class="verb">docs/protocol.md for more information.</span></i></td></tr>
<tr><th id="229">229</th><td><i class="doc"> */</i></td></tr>
<tr><th id="230">230</th><td><u>#<span data-ppcond="230">ifndef</span> <span class="macro" data-ref="_M/MPACK_EXTENSIONS">MPACK_EXTENSIONS</span></u></td></tr>
<tr><th id="231">231</th><td><u>#define <dfn class="macro" id="_M/MPACK_EXTENSIONS" data-ref="_M/MPACK_EXTENSIONS">MPACK_EXTENSIONS</dfn> 0</u></td></tr>
<tr><th id="232">232</th><td><u>#<span data-ppcond="230">endif</span></u></td></tr>
<tr><th id="233">233</th><td></td></tr>
<tr><th id="234">234</th><td><i class="doc">/**</i></td></tr>
<tr><th id="235">235</th><td><i class="doc"> * @}</i></td></tr>
<tr><th id="236">236</th><td><i class="doc"> */</i></td></tr>
<tr><th id="237">237</th><td><i class="doc"></i></td></tr>
<tr><th id="238">238</th><td><i class="doc"></i></td></tr>
<tr><th id="239">239</th><td><i class="doc"></i></td></tr>
<tr><th id="240">240</th><td><i class="doc">// workarounds for Doxygen</i></td></tr>
<tr><th id="241">241</th><td><u>#<span data-ppcond="241">if</span> defined(<span class="macro" data-ref="_M/MPACK_DOXYGEN">MPACK_DOXYGEN</span>)</u></td></tr>
<tr><th id="242">242</th><td><u>#if MPACK_DOXYGEN</u></td></tr>
<tr><th id="243">243</th><td><i>// We give these their default values of 0 here even though they are defined to</i></td></tr>
<tr><th id="244">244</th><td><i>// 1 in the doxyfile. Doxygen will show this as the value in the docs, even</i></td></tr>
<tr><th id="245">245</th><td><i>// though it ignores it when parsing the rest of the source. This is what we</i></td></tr>
<tr><th id="246">246</th><td><i>// want, since we want the documentation to show these defaults but still</i></td></tr>
<tr><th id="247">247</th><td><i>// generate documentation for the functions they add when they're on.</i></td></tr>
<tr><th id="248">248</th><td><u>#define MPACK_COMPATIBILITY 0</u></td></tr>
<tr><th id="249">249</th><td><u>#define MPACK_EXTENSIONS 0</u></td></tr>
<tr><th id="250">250</th><td><u>#endif</u></td></tr>
<tr><th id="251">251</th><td><u>#<span data-ppcond="241">endif</span></u></td></tr>
<tr><th id="252">252</th><td></td></tr>
<tr><th id="253">253</th><td></td></tr>
<tr><th id="254">254</th><td></td></tr>
<tr><th id="255">255</th><td><i class="doc">/**</i></td></tr>
<tr><th id="256">256</th><td><i class="doc"> * <span class="command">@name</span> <span class="verb">Dependencies</span></i></td></tr>
<tr><th id="257">257</th><td><i class="doc"> * @{</i></td></tr>
<tr><th id="258">258</th><td><i class="doc"> */</i></td></tr>
<tr><th id="259">259</th><td></td></tr>
<tr><th id="260">260</th><td><i class="doc">/**</i></td></tr>
<tr><th id="261">261</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_CONFORMING</span></i></td></tr>
<tr><th id="262">262</th><td><i class="doc"> *</i></td></tr>
<tr><th id="263">263</th><td><i class="doc"> * Enables the inclusion of basic C headers to define standard types and</i></td></tr>
<tr><th id="264">264</th><td><i class="doc"> * macros.</i></td></tr>
<tr><th id="265">265</th><td><i class="doc"> *</i></td></tr>
<tr><th id="266">266</th><td><i class="doc"> * This causes MPack to include headers required for conforming implementations</i></td></tr>
<tr><th id="267">267</th><td><i class="doc"> * of C99 even in freestanding, in particular &lt;stddef.h&gt;, &lt;stdint.h&gt;,</i></td></tr>
<tr><th id="268">268</th><td><i class="doc"> * &lt;stdbool.h&gt; and &lt;limits.h&gt;. It also includes &lt;inttypes.h&gt;; this is</i></td></tr>
<tr><th id="269">269</th><td><i class="doc"> * technically not required for freestanding but MPack needs it to detect</i></td></tr>
<tr><th id="270">270</th><td><i class="doc"> * integer limits.</i></td></tr>
<tr><th id="271">271</th><td><i class="doc"> *</i></td></tr>
<tr><th id="272">272</th><td><i class="doc"> * You can disable this if these headers are unavailable or if they do not</i></td></tr>
<tr><th id="273">273</th><td><i class="doc"> * define the standard types and macros (for example inside the Linux kernel.)</i></td></tr>
<tr><th id="274">274</th><td><i class="doc"> * If this is disabled, MPack will include no headers and will assume a 32-bit</i></td></tr>
<tr><th id="275">275</th><td><i class="doc"> * int. You will probably also want to define <span class="command">@ref</span> <span class="verb">MPACK_HAS_CONFIG to 1 and</span></i></td></tr>
<tr><th id="276">276</th><td><i class="doc"> * include your own headers in the config file. You must provide definitions</i></td></tr>
<tr><th id="277">277</th><td><i class="doc"> * for standard types such as<span class="command"> @c</span> <span class="arg">size_t,</span><span class="command"> @c</span> <span class="arg">bool,</span><span class="command"> @c</span> <span class="arg">int32_t</span> and so on.</i></td></tr>
<tr><th id="278">278</th><td><i class="doc"> *</i></td></tr>
<tr><th id="279">279</th><td><i class="doc"> * <span class="command">@see</span> <span class="tag">&lt;a href="<a href="https://en.cppreference.com/w/c/language/conformance">https://en.cppreference.com/w/c/language/conformance</a>"&gt;</span></i></td></tr>
<tr><th id="280">280</th><td><i class="doc"> * cppreference.com documentation on Conformance<span class="tag">&lt;/a&gt;</span></i></td></tr>
<tr><th id="281">281</th><td><i class="doc"> */</i></td></tr>
<tr><th id="282">282</th><td><u>#<span data-ppcond="282">ifndef</span> <span class="macro" data-ref="_M/MPACK_CONFORMING">MPACK_CONFORMING</span></u></td></tr>
<tr><th id="283">283</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_CONFORMING" data-ref="_M/MPACK_CONFORMING">MPACK_CONFORMING</dfn> 1</u></td></tr>
<tr><th id="284">284</th><td><u>#<span data-ppcond="282">endif</span></u></td></tr>
<tr><th id="285">285</th><td></td></tr>
<tr><th id="286">286</th><td><i class="doc">/**</i></td></tr>
<tr><th id="287">287</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_STDLIB</span></i></td></tr>
<tr><th id="288">288</th><td><i class="doc"> *</i></td></tr>
<tr><th id="289">289</th><td><i class="doc"> * Enables the use of the C stdlib.</i></td></tr>
<tr><th id="290">290</th><td><i class="doc"> *</i></td></tr>
<tr><th id="291">291</th><td><i class="doc"> * This allows the library to use basic functions like<span class="command"> @c</span> <span class="arg">memcmp()</span> and<span class="command"> @c</span></i></td></tr>
<tr><th id="292">292</th><td><i class="doc"> * <span class="arg">strlen(),</span> as well as<span class="command"> @c</span> <span class="arg">malloc()</span> for debugging and in allocation helpers.</i></td></tr>
<tr><th id="293">293</th><td><i class="doc"> *</i></td></tr>
<tr><th id="294">294</th><td><i class="doc"> * If this is disabled, allocation helper functions will not be defined, and</i></td></tr>
<tr><th id="295">295</th><td><i class="doc"> * MPack will attempt to detect compiler intrinsics for functions like<span class="command"> @c</span></i></td></tr>
<tr><th id="296">296</th><td><i class="doc"> * <span class="arg">memcmp()</span> (assuming <span class="command">@ref</span> <span class="verb">MPACK_NO_BUILTINS is not set.) It will fallback to</span></i></td></tr>
<tr><th id="297">297</th><td><i class="doc"> * its own (slow) implementations if it cannot use builtins. You may want to</i></td></tr>
<tr><th id="298">298</th><td><i class="doc"> * define <span class="command">@ref</span> <span class="verb">MPACK_MEMCMP and friends if you disable this.</span></i></td></tr>
<tr><th id="299">299</th><td><i class="doc"> *</i></td></tr>
<tr><th id="300">300</th><td><i class="doc"> * <span class="command">@see</span> MPACK_MEMCMP</i></td></tr>
<tr><th id="301">301</th><td><i class="doc"> * <span class="command">@see</span> MPACK_MEMCPY</i></td></tr>
<tr><th id="302">302</th><td><i class="doc"> * <span class="command">@see</span> MPACK_MEMMOVE</i></td></tr>
<tr><th id="303">303</th><td><i class="doc"> * <span class="command">@see</span> MPACK_MEMSET</i></td></tr>
<tr><th id="304">304</th><td><i class="doc"> * <span class="command">@see</span> MPACK_STRLEN</i></td></tr>
<tr><th id="305">305</th><td><i class="doc"> * <span class="command">@see</span> MPACK_MALLOC</i></td></tr>
<tr><th id="306">306</th><td><i class="doc"> * <span class="command">@see</span> MPACK_REALLOC</i></td></tr>
<tr><th id="307">307</th><td><i class="doc"> * <span class="command">@see</span> MPACK_FREE</i></td></tr>
<tr><th id="308">308</th><td><i class="doc"> */</i></td></tr>
<tr><th id="309">309</th><td><u>#<span data-ppcond="309">ifndef</span> <span class="macro" data-ref="_M/MPACK_STDLIB">MPACK_STDLIB</span></u></td></tr>
<tr><th id="310">310</th><td>    <u>#<span data-ppcond="310">if</span> !<a class="macro" href="#283" title="1" data-ref="_M/MPACK_CONFORMING">MPACK_CONFORMING</a></u></td></tr>
<tr><th id="311">311</th><td>        <i>// If we don't even have a proper &lt;limits.h&gt; we assume we won't have</i></td></tr>
<tr><th id="312">312</th><td><i>        // malloc() either.</i></td></tr>
<tr><th id="313">313</th><td>        <u>#define MPACK_STDLIB 0</u></td></tr>
<tr><th id="314">314</th><td>    <u>#<span data-ppcond="310">else</span></u></td></tr>
<tr><th id="315">315</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_STDLIB" data-ref="_M/MPACK_STDLIB">MPACK_STDLIB</dfn> 1</u></td></tr>
<tr><th id="316">316</th><td>    <u>#<span data-ppcond="310">endif</span></u></td></tr>
<tr><th id="317">317</th><td><u>#<span data-ppcond="309">endif</span></u></td></tr>
<tr><th id="318">318</th><td></td></tr>
<tr><th id="319">319</th><td><i class="doc">/**</i></td></tr>
<tr><th id="320">320</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_STDIO</span></i></td></tr>
<tr><th id="321">321</th><td><i class="doc"> *</i></td></tr>
<tr><th id="322">322</th><td><i class="doc"> * Enables the use of C stdio. This adds helpers for easily</i></td></tr>
<tr><th id="323">323</th><td><i class="doc"> * reading/writing C files and makes debugging easier.</i></td></tr>
<tr><th id="324">324</th><td><i class="doc"> */</i></td></tr>
<tr><th id="325">325</th><td><u>#<span data-ppcond="325">ifndef</span> <span class="macro" data-ref="_M/MPACK_STDIO">MPACK_STDIO</span></u></td></tr>
<tr><th id="326">326</th><td>    <u>#<span data-ppcond="326">if</span> !<a class="macro" href="#315" title="1" data-ref="_M/MPACK_STDLIB">MPACK_STDLIB</a> || defined(<span class="macro" data-ref="_M/__AVR__">__AVR__</span>)</u></td></tr>
<tr><th id="327">327</th><td>        <u>#define MPACK_STDIO 0</u></td></tr>
<tr><th id="328">328</th><td>    <u>#<span data-ppcond="326">else</span></u></td></tr>
<tr><th id="329">329</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_STDIO" data-ref="_M/MPACK_STDIO">MPACK_STDIO</dfn> 1</u></td></tr>
<tr><th id="330">330</th><td>    <u>#<span data-ppcond="326">endif</span></u></td></tr>
<tr><th id="331">331</th><td><u>#<span data-ppcond="325">endif</span></u></td></tr>
<tr><th id="332">332</th><td></td></tr>
<tr><th id="333">333</th><td><i class="doc">/**</i></td></tr>
<tr><th id="334">334</th><td><i class="doc"> * Whether the 'float' type and floating point operations are supported.</i></td></tr>
<tr><th id="335">335</th><td><i class="doc"> *</i></td></tr>
<tr><th id="336">336</th><td><i class="doc"> * If <span class="command">@ref</span> <span class="verb">MPACK_FLOAT is disabled, floats are read and written as @c uint32_t</span></i></td></tr>
<tr><th id="337">337</th><td><i class="doc"> * instead. This way messages with floats do not result in errors and you can</i></td></tr>
<tr><th id="338">338</th><td><i class="doc"> * still perform manual float parsing yourself.</i></td></tr>
<tr><th id="339">339</th><td><i class="doc"> */</i></td></tr>
<tr><th id="340">340</th><td><u>#<span data-ppcond="340">ifndef</span> <span class="macro" data-ref="_M/MPACK_FLOAT">MPACK_FLOAT</span></u></td></tr>
<tr><th id="341">341</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_FLOAT" data-ref="_M/MPACK_FLOAT">MPACK_FLOAT</dfn> 1</u></td></tr>
<tr><th id="342">342</th><td><u>#<span data-ppcond="340">endif</span></u></td></tr>
<tr><th id="343">343</th><td></td></tr>
<tr><th id="344">344</th><td><i class="doc">/**</i></td></tr>
<tr><th id="345">345</th><td><i class="doc"> * Whether the 'double' type is supported. This requires support for 'float'.</i></td></tr>
<tr><th id="346">346</th><td><i class="doc"> *</i></td></tr>
<tr><th id="347">347</th><td><i class="doc"> * If <span class="command">@ref</span> <span class="verb">MPACK_DOUBLE is disabled, doubles are read and written as @c</span></i></td></tr>
<tr><th id="348">348</th><td><i class="doc"> * uint32_t instead. This way messages with doubles do not result in errors and</i></td></tr>
<tr><th id="349">349</th><td><i class="doc"> * you can still perform manual doubles parsing yourself.</i></td></tr>
<tr><th id="350">350</th><td><i class="doc"> *</i></td></tr>
<tr><th id="351">351</th><td><i class="doc"> * If <span class="command">@ref</span> <span class="verb">MPACK_FLOAT is enabled but @ref MPACK_DOUBLE is not, doubles can be</span></i></td></tr>
<tr><th id="352">352</th><td><i class="doc"> * read as floats using the shortening conversion functions, e.g. <span class="command">@ref</span></i></td></tr>
<tr><th id="353">353</th><td><i class="doc"> * mpack_expect_float() or <span class="command">@ref</span> <span class="verb">mpack_node_float().</span></i></td></tr>
<tr><th id="354">354</th><td><i class="doc"> */</i></td></tr>
<tr><th id="355">355</th><td><u>#<span data-ppcond="355">ifndef</span> <span class="macro" data-ref="_M/MPACK_DOUBLE">MPACK_DOUBLE</span></u></td></tr>
<tr><th id="356">356</th><td>    <u>#<span data-ppcond="356">if</span> !<a class="macro" href="#341" title="1" data-ref="_M/MPACK_FLOAT">MPACK_FLOAT</a> || defined(<span class="macro" data-ref="_M/__AVR__">__AVR__</span>)</u></td></tr>
<tr><th id="357">357</th><td>        <i>// AVR supports only float, not double.</i></td></tr>
<tr><th id="358">358</th><td>        <u>#define MPACK_DOUBLE 0</u></td></tr>
<tr><th id="359">359</th><td>    <u>#<span data-ppcond="356">else</span></u></td></tr>
<tr><th id="360">360</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_DOUBLE" data-ref="_M/MPACK_DOUBLE">MPACK_DOUBLE</dfn> 1</u></td></tr>
<tr><th id="361">361</th><td>    <u>#<span data-ppcond="356">endif</span></u></td></tr>
<tr><th id="362">362</th><td><u>#<span data-ppcond="355">endif</span></u></td></tr>
<tr><th id="363">363</th><td></td></tr>
<tr><th id="364">364</th><td><i class="doc">/**</i></td></tr>
<tr><th id="365">365</th><td><i class="doc"> * @}</i></td></tr>
<tr><th id="366">366</th><td><i class="doc"> */</i></td></tr>
<tr><th id="367">367</th><td></td></tr>
<tr><th id="368">368</th><td></td></tr>
<tr><th id="369">369</th><td></td></tr>
<tr><th id="370">370</th><td><i class="doc">/**</i></td></tr>
<tr><th id="371">371</th><td><i class="doc"> * <span class="command">@name</span> <span class="verb">Allocation Functions</span></i></td></tr>
<tr><th id="372">372</th><td><i class="doc"> * @{</i></td></tr>
<tr><th id="373">373</th><td><i class="doc"> */</i></td></tr>
<tr><th id="374">374</th><td></td></tr>
<tr><th id="375">375</th><td><i class="doc">/**</i></td></tr>
<tr><th id="376">376</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_MALLOC</span></i></td></tr>
<tr><th id="377">377</th><td><i class="doc"> *</i></td></tr>
<tr><th id="378">378</th><td><i class="doc"> * Defines the memory allocation function used by MPack. This is used by</i></td></tr>
<tr><th id="379">379</th><td><i class="doc"> * helpers for automatically allocating data the correct size, and for</i></td></tr>
<tr><th id="380">380</th><td><i class="doc"> * debugging functions. If this macro is undefined, the allocation helpers</i></td></tr>
<tr><th id="381">381</th><td><i class="doc"> * will not be compiled.</i></td></tr>
<tr><th id="382">382</th><td><i class="doc"> *</i></td></tr>
<tr><th id="383">383</th><td><i class="doc"> * Set this to use a custom<span class="command"> @c</span> <span class="arg">malloc()</span> function. Your function must have the</i></td></tr>
<tr><th id="384">384</th><td><i class="doc"> * signature:</i></td></tr>
<tr><th id="385">385</th><td><i class="doc"> *</i></td></tr>
<tr><th id="386">386</th><td><i class="doc"> * <span class="command">@code</span></i></td></tr>
<tr><th id="387">387</th><td><i class="doc"> *<span class="verb"> void* malloc(size_t size);</span></i></td></tr>
<tr><th id="388">388</th><td><i class="doc"><span class="verb"></span> * @endcode</i></td></tr>
<tr><th id="389">389</th><td><i class="doc"> *</i></td></tr>
<tr><th id="390">390</th><td><i class="doc"> * The default is<span class="command"> @c</span> <span class="arg">malloc()</span> if <span class="command">@ref</span> <span class="verb">MPACK_STDLIB is enabled.</span></i></td></tr>
<tr><th id="391">391</th><td><i class="doc"> */</i></td></tr>
<tr><th id="392">392</th><td><i class="doc">/**</i></td></tr>
<tr><th id="393">393</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_FREE</span></i></td></tr>
<tr><th id="394">394</th><td><i class="doc"> *</i></td></tr>
<tr><th id="395">395</th><td><i class="doc"> * Defines the memory free function used by MPack. This is used by helpers</i></td></tr>
<tr><th id="396">396</th><td><i class="doc"> * for automatically allocating data the correct size. If this macro is</i></td></tr>
<tr><th id="397">397</th><td><i class="doc"> * undefined, the allocation helpers will not be compiled.</i></td></tr>
<tr><th id="398">398</th><td><i class="doc"> *</i></td></tr>
<tr><th id="399">399</th><td><i class="doc"> * Set this to use a custom<span class="command"> @c</span> <span class="arg">free()</span> function. Your function must have the</i></td></tr>
<tr><th id="400">400</th><td><i class="doc"> * signature:</i></td></tr>
<tr><th id="401">401</th><td><i class="doc"> *</i></td></tr>
<tr><th id="402">402</th><td><i class="doc"> * <span class="command">@code</span></i></td></tr>
<tr><th id="403">403</th><td><i class="doc"> *<span class="verb"> void free(void* p);</span></i></td></tr>
<tr><th id="404">404</th><td><i class="doc"><span class="verb"></span> * @endcode</i></td></tr>
<tr><th id="405">405</th><td><i class="doc"> *</i></td></tr>
<tr><th id="406">406</th><td><i class="doc"> * The default is<span class="command"> @c</span> <span class="arg">free()</span> if <span class="command">@ref</span> <span class="verb">MPACK_MALLOC has not been customized and</span></i></td></tr>
<tr><th id="407">407</th><td><i class="doc"> * <span class="command">@ref</span> <span class="verb">MPACK_STDLIB is enabled.</span></i></td></tr>
<tr><th id="408">408</th><td><i class="doc"> */</i></td></tr>
<tr><th id="409">409</th><td><i class="doc">/**</i></td></tr>
<tr><th id="410">410</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_REALLOC</span></i></td></tr>
<tr><th id="411">411</th><td><i class="doc"> *</i></td></tr>
<tr><th id="412">412</th><td><i class="doc"> * Defines the realloc function used by MPack. It is used by growable</i></td></tr>
<tr><th id="413">413</th><td><i class="doc"> * buffers to resize more efficiently.</i></td></tr>
<tr><th id="414">414</th><td><i class="doc"> *</i></td></tr>
<tr><th id="415">415</th><td><i class="doc"> * The default is<span class="command"> @c</span> <span class="arg">realloc()</span> if <span class="command">@ref</span> <span class="verb">MPACK_MALLOC has not been customized and</span></i></td></tr>
<tr><th id="416">416</th><td><i class="doc"> * <span class="command">@ref</span> <span class="verb">MPACK_STDLIB is enabled.</span></i></td></tr>
<tr><th id="417">417</th><td><i class="doc"> *</i></td></tr>
<tr><th id="418">418</th><td><i class="doc"> * Set this to use a custom<span class="command"> @c</span> <span class="arg">realloc()</span> function. Your function must have the</i></td></tr>
<tr><th id="419">419</th><td><i class="doc"> * signature:</i></td></tr>
<tr><th id="420">420</th><td><i class="doc"> *</i></td></tr>
<tr><th id="421">421</th><td><i class="doc"> * <span class="command">@code</span></i></td></tr>
<tr><th id="422">422</th><td><i class="doc"> *<span class="verb"> void* realloc(void* p, size_t new_size);</span></i></td></tr>
<tr><th id="423">423</th><td><i class="doc"><span class="verb"></span> * @endcode</i></td></tr>
<tr><th id="424">424</th><td><i class="doc"> *</i></td></tr>
<tr><th id="425">425</th><td><i class="doc"> * This is optional, even when <span class="command">@ref</span> <span class="verb">MPACK_MALLOC is used. If @ref MPACK_MALLOC is</span></i></td></tr>
<tr><th id="426">426</th><td><i class="doc"> * set and <span class="command">@ref</span> <span class="verb">MPACK_REALLOC is not, @ref MPACK_MALLOC is used with a simple copy</span></i></td></tr>
<tr><th id="427">427</th><td><i class="doc"> * to grow buffers.</i></td></tr>
<tr><th id="428">428</th><td><i class="doc"> */</i></td></tr>
<tr><th id="429">429</th><td></td></tr>
<tr><th id="430">430</th><td><u>#<span data-ppcond="430">if</span> defined(<span class="macro" data-ref="_M/MPACK_MALLOC">MPACK_MALLOC</span>) &amp;&amp; !defined(<span class="macro" data-ref="_M/MPACK_FREE">MPACK_FREE</span>)</u></td></tr>
<tr><th id="431">431</th><td>    <u>#error "MPACK_MALLOC requires MPACK_FREE."</u></td></tr>
<tr><th id="432">432</th><td><u>#<span data-ppcond="430">endif</span></u></td></tr>
<tr><th id="433">433</th><td><u>#<span data-ppcond="433">if</span> !defined(<span class="macro" data-ref="_M/MPACK_MALLOC">MPACK_MALLOC</span>) &amp;&amp; defined(<span class="macro" data-ref="_M/MPACK_FREE">MPACK_FREE</span>)</u></td></tr>
<tr><th id="434">434</th><td>    <u>#error "MPACK_FREE requires MPACK_MALLOC."</u></td></tr>
<tr><th id="435">435</th><td><u>#<span data-ppcond="433">endif</span></u></td></tr>
<tr><th id="436">436</th><td></td></tr>
<tr><th id="437">437</th><td><i>// These were never configurable in lowercase but we check anyway.</i></td></tr>
<tr><th id="438">438</th><td><u>#<span data-ppcond="438">ifdef</span> <span class="macro" data-ref="_M/mpack_malloc">mpack_malloc</span></u></td></tr>
<tr><th id="439">439</th><td>    <u>#error "Define MPACK_MALLOC, not mpack_malloc."</u></td></tr>
<tr><th id="440">440</th><td><u>#<span data-ppcond="438">endif</span></u></td></tr>
<tr><th id="441">441</th><td><u>#<span data-ppcond="441">ifdef</span> <span class="macro" data-ref="_M/mpack_realloc">mpack_realloc</span></u></td></tr>
<tr><th id="442">442</th><td>    <u>#error "Define MPACK_REALLOC, not mpack_realloc."</u></td></tr>
<tr><th id="443">443</th><td><u>#<span data-ppcond="441">endif</span></u></td></tr>
<tr><th id="444">444</th><td><u>#<span data-ppcond="444">ifdef</span> <span class="macro" data-ref="_M/mpack_free">mpack_free</span></u></td></tr>
<tr><th id="445">445</th><td>    <u>#error "Define MPACK_FREE, not mpack_free."</u></td></tr>
<tr><th id="446">446</th><td><u>#<span data-ppcond="444">endif</span></u></td></tr>
<tr><th id="447">447</th><td></td></tr>
<tr><th id="448">448</th><td><i>// We don't use calloc() at all.</i></td></tr>
<tr><th id="449">449</th><td><u>#<span data-ppcond="449">ifdef</span> <span class="macro" data-ref="_M/MPACK_CALLOC">MPACK_CALLOC</span></u></td></tr>
<tr><th id="450">450</th><td>    <u>#error "Don't define MPACK_CALLOC. MPack does not use calloc()."</u></td></tr>
<tr><th id="451">451</th><td><u>#<span data-ppcond="449">endif</span></u></td></tr>
<tr><th id="452">452</th><td><u>#<span data-ppcond="452">ifdef</span> <span class="macro" data-ref="_M/mpack_calloc">mpack_calloc</span></u></td></tr>
<tr><th id="453">453</th><td>    <u>#error "Don't define mpack_calloc. MPack does not use calloc()."</u></td></tr>
<tr><th id="454">454</th><td><u>#<span data-ppcond="452">endif</span></u></td></tr>
<tr><th id="455">455</th><td></td></tr>
<tr><th id="456">456</th><td><i>// Use defaults in stdlib if we have them. Without it we don't use malloc.</i></td></tr>
<tr><th id="457">457</th><td><u>#<span data-ppcond="457">if</span> defined(<a class="macro" href="#315" data-ref="_M/MPACK_STDLIB">MPACK_STDLIB</a>)</u></td></tr>
<tr><th id="458">458</th><td>    <u>#<span data-ppcond="458">if</span> <a class="macro" href="#315" title="1" data-ref="_M/MPACK_STDLIB">MPACK_STDLIB</a> &amp;&amp; !defined(<span class="macro" data-ref="_M/MPACK_MALLOC">MPACK_MALLOC</span>)</u></td></tr>
<tr><th id="459">459</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_MALLOC" data-ref="_M/MPACK_MALLOC">MPACK_MALLOC</dfn> malloc</u></td></tr>
<tr><th id="460">460</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_REALLOC" data-ref="_M/MPACK_REALLOC">MPACK_REALLOC</dfn> <a class="ref fn" href="../../../include/stdlib.h.html#realloc" title='realloc' data-ref="realloc" data-ref-filename="realloc">realloc</a></u></td></tr>
<tr><th id="461">461</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_FREE" data-ref="_M/MPACK_FREE">MPACK_FREE</dfn> free</u></td></tr>
<tr><th id="462">462</th><td>    <u>#<span data-ppcond="458">endif</span></u></td></tr>
<tr><th id="463">463</th><td><u>#<span data-ppcond="457">endif</span></u></td></tr>
<tr><th id="464">464</th><td></td></tr>
<tr><th id="465">465</th><td><i class="doc">/**</i></td></tr>
<tr><th id="466">466</th><td><i class="doc"> * @}</i></td></tr>
<tr><th id="467">467</th><td><i class="doc"> */</i></td></tr>
<tr><th id="468">468</th><td><i class="doc"></i></td></tr>
<tr><th id="469">469</th><td><i class="doc"></i></td></tr>
<tr><th id="470">470</th><td><i class="doc"></i></td></tr>
<tr><th id="471">471</th><td><i class="doc">// This needs to be defined after we've decided whether we have malloc().</i></td></tr>
<tr><th id="472">472</th><td><u>#<span data-ppcond="472">ifndef</span> <span class="macro" data-ref="_M/MPACK_BUILDER">MPACK_BUILDER</span></u></td></tr>
<tr><th id="473">473</th><td>    <u>#<span data-ppcond="473">if</span> defined(<a class="macro" href="#459" data-ref="_M/MPACK_MALLOC">MPACK_MALLOC</a>) &amp;&amp; <a class="macro" href="#179" title="1" data-ref="_M/MPACK_WRITER">MPACK_WRITER</a></u></td></tr>
<tr><th id="474">474</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_BUILDER" data-ref="_M/MPACK_BUILDER">MPACK_BUILDER</dfn> 1</u></td></tr>
<tr><th id="475">475</th><td>    <u>#<span data-ppcond="473">else</span></u></td></tr>
<tr><th id="476">476</th><td>        <u>#define MPACK_BUILDER 0</u></td></tr>
<tr><th id="477">477</th><td>    <u>#<span data-ppcond="473">endif</span></u></td></tr>
<tr><th id="478">478</th><td><u>#<span data-ppcond="472">endif</span></u></td></tr>
<tr><th id="479">479</th><td></td></tr>
<tr><th id="480">480</th><td></td></tr>
<tr><th id="481">481</th><td></td></tr>
<tr><th id="482">482</th><td><i class="doc">/**</i></td></tr>
<tr><th id="483">483</th><td><i class="doc"> * <span class="command">@name</span> <span class="verb">System Functions</span></i></td></tr>
<tr><th id="484">484</th><td><i class="doc"> * @{</i></td></tr>
<tr><th id="485">485</th><td><i class="doc"> */</i></td></tr>
<tr><th id="486">486</th><td></td></tr>
<tr><th id="487">487</th><td><i class="doc">/**</i></td></tr>
<tr><th id="488">488</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_MEMCMP</span></i></td></tr>
<tr><th id="489">489</th><td><i class="doc"> *</i></td></tr>
<tr><th id="490">490</th><td><i class="doc"> * The function MPack will use to provide<span class="command"> @c</span> <span class="arg">memcmp().</span></i></td></tr>
<tr><th id="491">491</th><td><i class="doc"> *</i></td></tr>
<tr><th id="492">492</th><td><i class="doc"> * Set this to use a custom<span class="command"> @c</span> <span class="arg">memcmp()</span> function. Your function must have the</i></td></tr>
<tr><th id="493">493</th><td><i class="doc"> * signature:</i></td></tr>
<tr><th id="494">494</th><td><i class="doc"> *</i></td></tr>
<tr><th id="495">495</th><td><i class="doc"> * <span class="command">@code</span></i></td></tr>
<tr><th id="496">496</th><td><i class="doc"> *<span class="verb"> int memcmp(const void* left, const void* right, size_t count);</span></i></td></tr>
<tr><th id="497">497</th><td><i class="doc"><span class="verb"></span> * @endcode</i></td></tr>
<tr><th id="498">498</th><td><i class="doc"> */</i></td></tr>
<tr><th id="499">499</th><td><i class="doc">/**</i></td></tr>
<tr><th id="500">500</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_MEMCPY</span></i></td></tr>
<tr><th id="501">501</th><td><i class="doc"> *</i></td></tr>
<tr><th id="502">502</th><td><i class="doc"> * The function MPack will use to provide<span class="command"> @c</span> <span class="arg">memcpy().</span></i></td></tr>
<tr><th id="503">503</th><td><i class="doc"> *</i></td></tr>
<tr><th id="504">504</th><td><i class="doc"> * Set this to use a custom<span class="command"> @c</span> <span class="arg">memcpy()</span> function. Your function must have the</i></td></tr>
<tr><th id="505">505</th><td><i class="doc"> * signature:</i></td></tr>
<tr><th id="506">506</th><td><i class="doc"> *</i></td></tr>
<tr><th id="507">507</th><td><i class="doc"> * <span class="command">@code</span></i></td></tr>
<tr><th id="508">508</th><td><i class="doc"> *<span class="verb"> void* memcpy(void* restrict dest, const void* restrict src, size_t count);</span></i></td></tr>
<tr><th id="509">509</th><td><i class="doc"><span class="verb"></span> * @endcode</i></td></tr>
<tr><th id="510">510</th><td><i class="doc"> */</i></td></tr>
<tr><th id="511">511</th><td><i class="doc">/**</i></td></tr>
<tr><th id="512">512</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_MEMMOVE</span></i></td></tr>
<tr><th id="513">513</th><td><i class="doc"> *</i></td></tr>
<tr><th id="514">514</th><td><i class="doc"> * The function MPack will use to provide<span class="command"> @c</span> <span class="arg">memmove().</span></i></td></tr>
<tr><th id="515">515</th><td><i class="doc"> *</i></td></tr>
<tr><th id="516">516</th><td><i class="doc"> * Set this to use a custom<span class="command"> @c</span> <span class="arg">memmove()</span> function. Your function must have the</i></td></tr>
<tr><th id="517">517</th><td><i class="doc"> * signature:</i></td></tr>
<tr><th id="518">518</th><td><i class="doc"> *</i></td></tr>
<tr><th id="519">519</th><td><i class="doc"> * <span class="command">@code</span></i></td></tr>
<tr><th id="520">520</th><td><i class="doc"> *<span class="verb"> void* memmove(void* dest, const void* src, size_t count);</span></i></td></tr>
<tr><th id="521">521</th><td><i class="doc"><span class="verb"></span> * @endcode</i></td></tr>
<tr><th id="522">522</th><td><i class="doc"> */</i></td></tr>
<tr><th id="523">523</th><td><i class="doc">/**</i></td></tr>
<tr><th id="524">524</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_MEMSET</span></i></td></tr>
<tr><th id="525">525</th><td><i class="doc"> *</i></td></tr>
<tr><th id="526">526</th><td><i class="doc"> * The function MPack will use to provide<span class="command"> @c</span> <span class="arg">memset().</span></i></td></tr>
<tr><th id="527">527</th><td><i class="doc"> *</i></td></tr>
<tr><th id="528">528</th><td><i class="doc"> * Set this to use a custom<span class="command"> @c</span> <span class="arg">memset()</span> function. Your function must have the</i></td></tr>
<tr><th id="529">529</th><td><i class="doc"> * signature:</i></td></tr>
<tr><th id="530">530</th><td><i class="doc"> *</i></td></tr>
<tr><th id="531">531</th><td><i class="doc"> * <span class="command">@code</span></i></td></tr>
<tr><th id="532">532</th><td><i class="doc"> *<span class="verb"> void* memset(void* p, int c, size_t count);</span></i></td></tr>
<tr><th id="533">533</th><td><i class="doc"><span class="verb"></span> * @endcode</i></td></tr>
<tr><th id="534">534</th><td><i class="doc"> */</i></td></tr>
<tr><th id="535">535</th><td><i class="doc">/**</i></td></tr>
<tr><th id="536">536</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_STRLEN</span></i></td></tr>
<tr><th id="537">537</th><td><i class="doc"> *</i></td></tr>
<tr><th id="538">538</th><td><i class="doc"> * The function MPack will use to provide<span class="command"> @c</span> <span class="arg">strlen().</span></i></td></tr>
<tr><th id="539">539</th><td><i class="doc"> *</i></td></tr>
<tr><th id="540">540</th><td><i class="doc"> * Set this to use a custom<span class="command"> @c</span> <span class="arg">strlen()</span> function. Your function must have the</i></td></tr>
<tr><th id="541">541</th><td><i class="doc"> * signature:</i></td></tr>
<tr><th id="542">542</th><td><i class="doc"> *</i></td></tr>
<tr><th id="543">543</th><td><i class="doc"> * <span class="command">@code</span></i></td></tr>
<tr><th id="544">544</th><td><i class="doc"> *<span class="verb"> size_t strlen(const char* str);</span></i></td></tr>
<tr><th id="545">545</th><td><i class="doc"><span class="verb"></span> * @endcode</i></td></tr>
<tr><th id="546">546</th><td><i class="doc"> */</i></td></tr>
<tr><th id="547">547</th><td><i class="doc"></i></td></tr>
<tr><th id="548">548</th><td><i class="doc">// These were briefly configurable in lowercase in an unreleased version. Just</i></td></tr>
<tr><th id="549">549</th><td><i class="doc">// to make sure no one is doing this, we make sure these aren't already defined.</i></td></tr>
<tr><th id="550">550</th><td><u>#<span data-ppcond="550">ifdef</span> <span class="macro" data-ref="_M/mpack_memcmp">mpack_memcmp</span></u></td></tr>
<tr><th id="551">551</th><td>    <u>#error "Define MPACK_MEMCMP, not mpack_memcmp."</u></td></tr>
<tr><th id="552">552</th><td><u>#<span data-ppcond="550">endif</span></u></td></tr>
<tr><th id="553">553</th><td><u>#<span data-ppcond="553">ifdef</span> <span class="macro" data-ref="_M/mpack_memcpy">mpack_memcpy</span></u></td></tr>
<tr><th id="554">554</th><td>    <u>#error "Define MPACK_MEMCPY, not mpack_memcpy."</u></td></tr>
<tr><th id="555">555</th><td><u>#<span data-ppcond="553">endif</span></u></td></tr>
<tr><th id="556">556</th><td><u>#<span data-ppcond="556">ifdef</span> <span class="macro" data-ref="_M/mpack_memmove">mpack_memmove</span></u></td></tr>
<tr><th id="557">557</th><td>    <u>#error "Define MPACK_MEMMOVE, not mpack_memmove."</u></td></tr>
<tr><th id="558">558</th><td><u>#<span data-ppcond="556">endif</span></u></td></tr>
<tr><th id="559">559</th><td><u>#<span data-ppcond="559">ifdef</span> <span class="macro" data-ref="_M/mpack_memset">mpack_memset</span></u></td></tr>
<tr><th id="560">560</th><td>    <u>#error "Define MPACK_MEMSET, not mpack_memset."</u></td></tr>
<tr><th id="561">561</th><td><u>#<span data-ppcond="559">endif</span></u></td></tr>
<tr><th id="562">562</th><td><u>#<span data-ppcond="562">ifdef</span> <span class="macro" data-ref="_M/mpack_strlen">mpack_strlen</span></u></td></tr>
<tr><th id="563">563</th><td>    <u>#error "Define MPACK_STRLEN, not mpack_strlen."</u></td></tr>
<tr><th id="564">564</th><td><u>#<span data-ppcond="562">endif</span></u></td></tr>
<tr><th id="565">565</th><td></td></tr>
<tr><th id="566">566</th><td><i>// If the standard library is available, we prefer to use its functions.</i></td></tr>
<tr><th id="567">567</th><td><u>#<span data-ppcond="567">if</span> <a class="macro" href="#315" title="1" data-ref="_M/MPACK_STDLIB">MPACK_STDLIB</a></u></td></tr>
<tr><th id="568">568</th><td>    <u>#<span data-ppcond="568">ifndef</span> <span class="macro" data-ref="_M/MPACK_MEMCMP">MPACK_MEMCMP</span></u></td></tr>
<tr><th id="569">569</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_MEMCMP" data-ref="_M/MPACK_MEMCMP">MPACK_MEMCMP</dfn> memcmp</u></td></tr>
<tr><th id="570">570</th><td>    <u>#<span data-ppcond="568">endif</span></u></td></tr>
<tr><th id="571">571</th><td>    <u>#<span data-ppcond="571">ifndef</span> <span class="macro" data-ref="_M/MPACK_MEMCPY">MPACK_MEMCPY</span></u></td></tr>
<tr><th id="572">572</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_MEMCPY" data-ref="_M/MPACK_MEMCPY">MPACK_MEMCPY</dfn> memcpy</u></td></tr>
<tr><th id="573">573</th><td>    <u>#<span data-ppcond="571">endif</span></u></td></tr>
<tr><th id="574">574</th><td>    <u>#<span data-ppcond="574">ifndef</span> <span class="macro" data-ref="_M/MPACK_MEMMOVE">MPACK_MEMMOVE</span></u></td></tr>
<tr><th id="575">575</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_MEMMOVE" data-ref="_M/MPACK_MEMMOVE">MPACK_MEMMOVE</dfn> memmove</u></td></tr>
<tr><th id="576">576</th><td>    <u>#<span data-ppcond="574">endif</span></u></td></tr>
<tr><th id="577">577</th><td>    <u>#<span data-ppcond="577">ifndef</span> <span class="macro" data-ref="_M/MPACK_MEMSET">MPACK_MEMSET</span></u></td></tr>
<tr><th id="578">578</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_MEMSET" data-ref="_M/MPACK_MEMSET">MPACK_MEMSET</dfn> memset</u></td></tr>
<tr><th id="579">579</th><td>    <u>#<span data-ppcond="577">endif</span></u></td></tr>
<tr><th id="580">580</th><td>    <u>#<span data-ppcond="580">ifndef</span> <span class="macro" data-ref="_M/MPACK_STRLEN">MPACK_STRLEN</span></u></td></tr>
<tr><th id="581">581</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_STRLEN" data-ref="_M/MPACK_STRLEN">MPACK_STRLEN</dfn> strlen</u></td></tr>
<tr><th id="582">582</th><td>    <u>#<span data-ppcond="580">endif</span></u></td></tr>
<tr><th id="583">583</th><td><u>#<span data-ppcond="567">endif</span></u></td></tr>
<tr><th id="584">584</th><td></td></tr>
<tr><th id="585">585</th><td><u>#<span data-ppcond="585">if</span> !<a class="macro" href="#135" title="0" data-ref="_M/MPACK_NO_BUILTINS">MPACK_NO_BUILTINS</a></u></td></tr>
<tr><th id="586">586</th><td>    <u>#<span data-ppcond="586">ifdef</span> <span class="macro" data-ref="_M/__has_builtin">__has_builtin</span></u></td></tr>
<tr><th id="587">587</th><td>        <u>#<span data-ppcond="587">if</span> !defined(<a class="macro" href="#569" data-ref="_M/MPACK_MEMCMP">MPACK_MEMCMP</a>) &amp;&amp; <span class="macro" title="" data-ref="_M/__has_builtin">__has_builtin</span>(__builtin_memcmp)</u></td></tr>
<tr><th id="588">588</th><td>            <u>#define MPACK_MEMCMP __builtin_memcmp</u></td></tr>
<tr><th id="589">589</th><td>        <u>#<span data-ppcond="587">endif</span></u></td></tr>
<tr><th id="590">590</th><td>        <u>#<span data-ppcond="590">if</span> !defined(<a class="macro" href="#572" data-ref="_M/MPACK_MEMCPY">MPACK_MEMCPY</a>) &amp;&amp; <span class="macro" title="" data-ref="_M/__has_builtin">__has_builtin</span>(__builtin_memcpy)</u></td></tr>
<tr><th id="591">591</th><td>            <u>#define MPACK_MEMCPY __builtin_memcpy</u></td></tr>
<tr><th id="592">592</th><td>        <u>#<span data-ppcond="590">endif</span></u></td></tr>
<tr><th id="593">593</th><td>        <u>#<span data-ppcond="593">if</span> !defined(<a class="macro" href="#575" data-ref="_M/MPACK_MEMMOVE">MPACK_MEMMOVE</a>) &amp;&amp; <span class="macro" title="" data-ref="_M/__has_builtin">__has_builtin</span>(__builtin_memmove)</u></td></tr>
<tr><th id="594">594</th><td>            <u>#define MPACK_MEMMOVE __builtin_memmove</u></td></tr>
<tr><th id="595">595</th><td>        <u>#<span data-ppcond="593">endif</span></u></td></tr>
<tr><th id="596">596</th><td>        <u>#<span data-ppcond="596">if</span> !defined(<a class="macro" href="#578" data-ref="_M/MPACK_MEMSET">MPACK_MEMSET</a>) &amp;&amp; <span class="macro" title="" data-ref="_M/__has_builtin">__has_builtin</span>(__builtin_memset)</u></td></tr>
<tr><th id="597">597</th><td>            <u>#define MPACK_MEMSET __builtin_memset</u></td></tr>
<tr><th id="598">598</th><td>        <u>#<span data-ppcond="596">endif</span></u></td></tr>
<tr><th id="599">599</th><td>        <u>#<span data-ppcond="599">if</span> !defined(<a class="macro" href="#581" data-ref="_M/MPACK_STRLEN">MPACK_STRLEN</a>) &amp;&amp; <span class="macro" title="" data-ref="_M/__has_builtin">__has_builtin</span>(__builtin_strlen)</u></td></tr>
<tr><th id="600">600</th><td>            <u>#define MPACK_STRLEN __builtin_strlen</u></td></tr>
<tr><th id="601">601</th><td>        <u>#<span data-ppcond="599">endif</span></u></td></tr>
<tr><th id="602">602</th><td>    <u>#<span data-ppcond="586">elif</span> defined(__GNUC__)</u></td></tr>
<tr><th id="603">603</th><td>        <u>#ifndef MPACK_MEMCMP</u></td></tr>
<tr><th id="604">604</th><td>            <u>#define MPACK_MEMCMP __builtin_memcmp</u></td></tr>
<tr><th id="605">605</th><td>        <u>#endif</u></td></tr>
<tr><th id="606">606</th><td>        <u>#ifndef MPACK_MEMCPY</u></td></tr>
<tr><th id="607">607</th><td>            <u>#define MPACK_MEMCPY __builtin_memcpy</u></td></tr>
<tr><th id="608">608</th><td>        <u>#endif</u></td></tr>
<tr><th id="609">609</th><td>        <i>// There's not always a builtin memmove for GCC. If we can't test for</i></td></tr>
<tr><th id="610">610</th><td><i>        // it with __has_builtin above, we don't use it. It's been around for</i></td></tr>
<tr><th id="611">611</th><td><i>        // much longer under clang, but then so has __has_builtin, so we let</i></td></tr>
<tr><th id="612">612</th><td><i>        // the block above handle it.</i></td></tr>
<tr><th id="613">613</th><td>        <u>#ifndef MPACK_MEMSET</u></td></tr>
<tr><th id="614">614</th><td>            <u>#define MPACK_MEMSET __builtin_memset</u></td></tr>
<tr><th id="615">615</th><td>        <u>#endif</u></td></tr>
<tr><th id="616">616</th><td>        <u>#ifndef MPACK_STRLEN</u></td></tr>
<tr><th id="617">617</th><td>            <u>#define MPACK_STRLEN __builtin_strlen</u></td></tr>
<tr><th id="618">618</th><td>        <u>#endif</u></td></tr>
<tr><th id="619">619</th><td>    <u>#<span data-ppcond="586">endif</span></u></td></tr>
<tr><th id="620">620</th><td><u>#<span data-ppcond="585">endif</span></u></td></tr>
<tr><th id="621">621</th><td></td></tr>
<tr><th id="622">622</th><td><i class="doc">/**</i></td></tr>
<tr><th id="623">623</th><td><i class="doc"> * @}</i></td></tr>
<tr><th id="624">624</th><td><i class="doc"> */</i></td></tr>
<tr><th id="625">625</th><td></td></tr>
<tr><th id="626">626</th><td></td></tr>
<tr><th id="627">627</th><td></td></tr>
<tr><th id="628">628</th><td><i class="doc">/**</i></td></tr>
<tr><th id="629">629</th><td><i class="doc"> * <span class="command">@name</span> <span class="verb">Debugging Options</span></i></td></tr>
<tr><th id="630">630</th><td><i class="doc"> * @{</i></td></tr>
<tr><th id="631">631</th><td><i class="doc"> */</i></td></tr>
<tr><th id="632">632</th><td></td></tr>
<tr><th id="633">633</th><td><i class="doc">/**</i></td></tr>
<tr><th id="634">634</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_DEBUG</span></i></td></tr>
<tr><th id="635">635</th><td><i class="doc"> *</i></td></tr>
<tr><th id="636">636</th><td><i class="doc"> * Enables debug features. You may want to wrap this around your</i></td></tr>
<tr><th id="637">637</th><td><i class="doc"> * own debug preprocs. By default, this is enabled if<span class="command"> @c</span> <span class="arg">DEBUG</span> or<span class="command"> @c</span> <span class="arg">_DEBUG</span></i></td></tr>
<tr><th id="638">638</th><td><i class="doc"> * are defined. <span class="command">(@c</span> <span class="arg">NDEBUG</span> is not used since it is allowed to have</i></td></tr>
<tr><th id="639">639</th><td><i class="doc"> * different values in different translation units.)</i></td></tr>
<tr><th id="640">640</th><td><i class="doc"> */</i></td></tr>
<tr><th id="641">641</th><td><u>#<span data-ppcond="641">if</span> !defined(<span class="macro" data-ref="_M/MPACK_DEBUG">MPACK_DEBUG</span>)</u></td></tr>
<tr><th id="642">642</th><td>    <u>#<span data-ppcond="642">if</span> defined(<span class="macro" data-ref="_M/DEBUG">DEBUG</span>) || defined(<span class="macro" data-ref="_M/_DEBUG">_DEBUG</span>)</u></td></tr>
<tr><th id="643">643</th><td>        <u>#define MPACK_DEBUG 1</u></td></tr>
<tr><th id="644">644</th><td>    <u>#<span data-ppcond="642">else</span></u></td></tr>
<tr><th id="645">645</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_DEBUG" data-ref="_M/MPACK_DEBUG">MPACK_DEBUG</dfn> 0</u></td></tr>
<tr><th id="646">646</th><td>    <u>#<span data-ppcond="642">endif</span></u></td></tr>
<tr><th id="647">647</th><td><u>#<span data-ppcond="641">endif</span></u></td></tr>
<tr><th id="648">648</th><td></td></tr>
<tr><th id="649">649</th><td><i class="doc">/**</i></td></tr>
<tr><th id="650">650</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_STRINGS</span></i></td></tr>
<tr><th id="651">651</th><td><i class="doc"> *</i></td></tr>
<tr><th id="652">652</th><td><i class="doc"> * Enables descriptive error and type strings.</i></td></tr>
<tr><th id="653">653</th><td><i class="doc"> *</i></td></tr>
<tr><th id="654">654</th><td><i class="doc"> * This can be turned off (by defining it to 0) to maximize space savings</i></td></tr>
<tr><th id="655">655</th><td><i class="doc"> * on embedded devices. If this is disabled, string functions such as</i></td></tr>
<tr><th id="656">656</th><td><i class="doc"> * mpack_error_to_string() and mpack_type_to_string() return an empty string.</i></td></tr>
<tr><th id="657">657</th><td><i class="doc"> */</i></td></tr>
<tr><th id="658">658</th><td><u>#<span data-ppcond="658">ifndef</span> <span class="macro" data-ref="_M/MPACK_STRINGS">MPACK_STRINGS</span></u></td></tr>
<tr><th id="659">659</th><td>    <u>#<span data-ppcond="659">ifdef</span> <span class="macro" data-ref="_M/__AVR__">__AVR__</span></u></td></tr>
<tr><th id="660">660</th><td>        <u>#define MPACK_STRINGS 0</u></td></tr>
<tr><th id="661">661</th><td>    <u>#<span data-ppcond="659">else</span></u></td></tr>
<tr><th id="662">662</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_STRINGS" data-ref="_M/MPACK_STRINGS">MPACK_STRINGS</dfn> 1</u></td></tr>
<tr><th id="663">663</th><td>    <u>#<span data-ppcond="659">endif</span></u></td></tr>
<tr><th id="664">664</th><td><u>#<span data-ppcond="658">endif</span></u></td></tr>
<tr><th id="665">665</th><td></td></tr>
<tr><th id="666">666</th><td><i class="doc">/**</i></td></tr>
<tr><th id="667">667</th><td><i class="doc"> * Set this to 1 to implement a custom <span class="command">@ref</span> <span class="verb">mpack_assert_fail() function.</span></i></td></tr>
<tr><th id="668">668</th><td><i class="doc"> * See the documentation on <span class="command">@ref</span> <span class="verb">mpack_assert_fail() for details.</span></i></td></tr>
<tr><th id="669">669</th><td><i class="doc"> *</i></td></tr>
<tr><th id="670">670</th><td><i class="doc"> * Asserts are only used when <span class="command">@ref</span> <span class="verb">MPACK_DEBUG is enabled, and can be</span></i></td></tr>
<tr><th id="671">671</th><td><i class="doc"> * triggered by bugs in MPack or bugs due to incorrect usage of MPack.</i></td></tr>
<tr><th id="672">672</th><td><i class="doc"> */</i></td></tr>
<tr><th id="673">673</th><td><u>#<span data-ppcond="673">ifndef</span> <span class="macro" data-ref="_M/MPACK_CUSTOM_ASSERT">MPACK_CUSTOM_ASSERT</span></u></td></tr>
<tr><th id="674">674</th><td><u>#define <dfn class="macro" id="_M/MPACK_CUSTOM_ASSERT" data-ref="_M/MPACK_CUSTOM_ASSERT">MPACK_CUSTOM_ASSERT</dfn> 0</u></td></tr>
<tr><th id="675">675</th><td><u>#<span data-ppcond="673">endif</span></u></td></tr>
<tr><th id="676">676</th><td></td></tr>
<tr><th id="677">677</th><td><i class="doc">/**</i></td></tr>
<tr><th id="678">678</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_READ_TRACKING</span></i></td></tr>
<tr><th id="679">679</th><td><i class="doc"> *</i></td></tr>
<tr><th id="680">680</th><td><i class="doc"> * Enables compound type size tracking for readers. This ensures that the</i></td></tr>
<tr><th id="681">681</th><td><i class="doc"> * correct number of elements or bytes are read from a compound type.</i></td></tr>
<tr><th id="682">682</th><td><i class="doc"> *</i></td></tr>
<tr><th id="683">683</th><td><i class="doc"> * This is enabled by default in debug builds (provided a<span class="command"> @c</span> <span class="arg">malloc()</span> is</i></td></tr>
<tr><th id="684">684</th><td><i class="doc"> * available.)</i></td></tr>
<tr><th id="685">685</th><td><i class="doc"> */</i></td></tr>
<tr><th id="686">686</th><td><u>#<span data-ppcond="686">if</span> !defined(<span class="macro" data-ref="_M/MPACK_READ_TRACKING">MPACK_READ_TRACKING</span>)</u></td></tr>
<tr><th id="687">687</th><td>    <u>#<span data-ppcond="687">if</span> <a class="macro" href="#645" title="0" data-ref="_M/MPACK_DEBUG">MPACK_DEBUG</a> &amp;&amp; <a class="macro" href="#152" title="1" data-ref="_M/MPACK_READER">MPACK_READER</a> &amp;&amp; defined(<a class="macro" href="#459" data-ref="_M/MPACK_MALLOC">MPACK_MALLOC</a>)</u></td></tr>
<tr><th id="688">688</th><td>        <u>#define MPACK_READ_TRACKING 1</u></td></tr>
<tr><th id="689">689</th><td>    <u>#<span data-ppcond="687">else</span></u></td></tr>
<tr><th id="690">690</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_READ_TRACKING" data-ref="_M/MPACK_READ_TRACKING">MPACK_READ_TRACKING</dfn> 0</u></td></tr>
<tr><th id="691">691</th><td>    <u>#<span data-ppcond="687">endif</span></u></td></tr>
<tr><th id="692">692</th><td><u>#<span data-ppcond="686">endif</span></u></td></tr>
<tr><th id="693">693</th><td><u>#<span data-ppcond="693">if</span> <a class="macro" href="#690" title="0" data-ref="_M/MPACK_READ_TRACKING">MPACK_READ_TRACKING</a> &amp;&amp; !<a class="macro" href="#152" title="1" data-ref="_M/MPACK_READER">MPACK_READER</a></u></td></tr>
<tr><th id="694">694</th><td>    <u>#error "MPACK_READ_TRACKING requires MPACK_READER."</u></td></tr>
<tr><th id="695">695</th><td><u>#<span data-ppcond="693">endif</span></u></td></tr>
<tr><th id="696">696</th><td></td></tr>
<tr><th id="697">697</th><td><i class="doc">/**</i></td></tr>
<tr><th id="698">698</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_WRITE_TRACKING</span></i></td></tr>
<tr><th id="699">699</th><td><i class="doc"> *</i></td></tr>
<tr><th id="700">700</th><td><i class="doc"> * Enables compound type size tracking for writers. This ensures that the</i></td></tr>
<tr><th id="701">701</th><td><i class="doc"> * correct number of elements or bytes are written in a compound type.</i></td></tr>
<tr><th id="702">702</th><td><i class="doc"> *</i></td></tr>
<tr><th id="703">703</th><td><i class="doc"> * Note that without write tracking enabled, it is possible for buggy code</i></td></tr>
<tr><th id="704">704</th><td><i class="doc"> * to emit invalid MessagePack without flagging an error by writing the wrong</i></td></tr>
<tr><th id="705">705</th><td><i class="doc"> * number of elements or bytes in a compound type. With tracking enabled,</i></td></tr>
<tr><th id="706">706</th><td><i class="doc"> * MPack will catch such errors and break on the offending line of code.</i></td></tr>
<tr><th id="707">707</th><td><i class="doc"> *</i></td></tr>
<tr><th id="708">708</th><td><i class="doc"> * This is enabled by default in debug builds (provided a<span class="command"> @c</span> <span class="arg">malloc()</span> is</i></td></tr>
<tr><th id="709">709</th><td><i class="doc"> * available.)</i></td></tr>
<tr><th id="710">710</th><td><i class="doc"> */</i></td></tr>
<tr><th id="711">711</th><td><u>#<span data-ppcond="711">if</span> !defined(<span class="macro" data-ref="_M/MPACK_WRITE_TRACKING">MPACK_WRITE_TRACKING</span>)</u></td></tr>
<tr><th id="712">712</th><td>    <u>#<span data-ppcond="712">if</span> <a class="macro" href="#645" title="0" data-ref="_M/MPACK_DEBUG">MPACK_DEBUG</a> &amp;&amp; <a class="macro" href="#179" title="1" data-ref="_M/MPACK_WRITER">MPACK_WRITER</a> &amp;&amp; defined(<a class="macro" href="#459" data-ref="_M/MPACK_MALLOC">MPACK_MALLOC</a>)</u></td></tr>
<tr><th id="713">713</th><td>        <u>#define MPACK_WRITE_TRACKING 1</u></td></tr>
<tr><th id="714">714</th><td>    <u>#<span data-ppcond="712">else</span></u></td></tr>
<tr><th id="715">715</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_WRITE_TRACKING" data-ref="_M/MPACK_WRITE_TRACKING">MPACK_WRITE_TRACKING</dfn> 0</u></td></tr>
<tr><th id="716">716</th><td>    <u>#<span data-ppcond="712">endif</span></u></td></tr>
<tr><th id="717">717</th><td><u>#<span data-ppcond="711">endif</span></u></td></tr>
<tr><th id="718">718</th><td><u>#<span data-ppcond="718">if</span> <a class="macro" href="#715" title="0" data-ref="_M/MPACK_WRITE_TRACKING">MPACK_WRITE_TRACKING</a> &amp;&amp; !<a class="macro" href="#179" title="1" data-ref="_M/MPACK_WRITER">MPACK_WRITER</a></u></td></tr>
<tr><th id="719">719</th><td>    <u>#error "MPACK_WRITE_TRACKING requires MPACK_WRITER."</u></td></tr>
<tr><th id="720">720</th><td><u>#<span data-ppcond="718">endif</span></u></td></tr>
<tr><th id="721">721</th><td></td></tr>
<tr><th id="722">722</th><td><i class="doc">/**</i></td></tr>
<tr><th id="723">723</th><td><i class="doc"> * @}</i></td></tr>
<tr><th id="724">724</th><td><i class="doc"> */</i></td></tr>
<tr><th id="725">725</th><td></td></tr>
<tr><th id="726">726</th><td></td></tr>
<tr><th id="727">727</th><td></td></tr>
<tr><th id="728">728</th><td></td></tr>
<tr><th id="729">729</th><td><i class="doc">/**</i></td></tr>
<tr><th id="730">730</th><td><i class="doc"> * <span class="command">@name</span> <span class="verb">Miscellaneous Options</span></i></td></tr>
<tr><th id="731">731</th><td><i class="doc"> * @{</i></td></tr>
<tr><th id="732">732</th><td><i class="doc"> */</i></td></tr>
<tr><th id="733">733</th><td></td></tr>
<tr><th id="734">734</th><td><i class="doc">/**</i></td></tr>
<tr><th id="735">735</th><td><i class="doc"> * Whether to optimize for size or speed.</i></td></tr>
<tr><th id="736">736</th><td><i class="doc"> *</i></td></tr>
<tr><th id="737">737</th><td><i class="doc"> * Optimizing for size simplifies some parsing and encoding algorithms</i></td></tr>
<tr><th id="738">738</th><td><i class="doc"> * at the expense of speed and saves a few kilobytes of space in the</i></td></tr>
<tr><th id="739">739</th><td><i class="doc"> * resulting executable.</i></td></tr>
<tr><th id="740">740</th><td><i class="doc"> *</i></td></tr>
<tr><th id="741">741</th><td><i class="doc"> * This automatically detects -Os with GCC/Clang. Unfortunately there</i></td></tr>
<tr><th id="742">742</th><td><i class="doc"> * doesn't seem to be a macro defined for /Os under MSVC.</i></td></tr>
<tr><th id="743">743</th><td><i class="doc"> */</i></td></tr>
<tr><th id="744">744</th><td><u>#<span data-ppcond="744">ifndef</span> <span class="macro" data-ref="_M/MPACK_OPTIMIZE_FOR_SIZE">MPACK_OPTIMIZE_FOR_SIZE</span></u></td></tr>
<tr><th id="745">745</th><td>    <u>#<span data-ppcond="745">ifdef</span> <span class="macro" data-ref="_M/__OPTIMIZE_SIZE__">__OPTIMIZE_SIZE__</span></u></td></tr>
<tr><th id="746">746</th><td>        <u>#define MPACK_OPTIMIZE_FOR_SIZE 1</u></td></tr>
<tr><th id="747">747</th><td>    <u>#<span data-ppcond="745">else</span></u></td></tr>
<tr><th id="748">748</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_OPTIMIZE_FOR_SIZE" data-ref="_M/MPACK_OPTIMIZE_FOR_SIZE">MPACK_OPTIMIZE_FOR_SIZE</dfn> 0</u></td></tr>
<tr><th id="749">749</th><td>    <u>#<span data-ppcond="745">endif</span></u></td></tr>
<tr><th id="750">750</th><td><u>#<span data-ppcond="744">endif</span></u></td></tr>
<tr><th id="751">751</th><td></td></tr>
<tr><th id="752">752</th><td><i class="doc">/**</i></td></tr>
<tr><th id="753">753</th><td><i class="doc"> * Stack space in bytes to use when initializing a reader or writer</i></td></tr>
<tr><th id="754">754</th><td><i class="doc"> * with a stack-allocated buffer.</i></td></tr>
<tr><th id="755">755</th><td><i class="doc"> *</i></td></tr>
<tr><th id="756">756</th><td><i class="doc"> * <span class="command">@warning</span> Make sure you have sufficient stack space. Some libc use relatively</i></td></tr>
<tr><th id="757">757</th><td><i class="doc"> * small stacks even on desktop platforms, e.g. musl.</i></td></tr>
<tr><th id="758">758</th><td><i class="doc"> */</i></td></tr>
<tr><th id="759">759</th><td><u>#<span data-ppcond="759">ifndef</span> <span class="macro" data-ref="_M/MPACK_STACK_SIZE">MPACK_STACK_SIZE</span></u></td></tr>
<tr><th id="760">760</th><td><u>#define <dfn class="macro" id="_M/MPACK_STACK_SIZE" data-ref="_M/MPACK_STACK_SIZE">MPACK_STACK_SIZE</dfn> 4096</u></td></tr>
<tr><th id="761">761</th><td><u>#<span data-ppcond="759">endif</span></u></td></tr>
<tr><th id="762">762</th><td></td></tr>
<tr><th id="763">763</th><td><i class="doc">/**</i></td></tr>
<tr><th id="764">764</th><td><i class="doc"> * Buffer size to use for allocated buffers (such as for a file writer.)</i></td></tr>
<tr><th id="765">765</th><td><i class="doc"> *</i></td></tr>
<tr><th id="766">766</th><td><i class="doc"> * Starting with a single page and growing as needed seems to</i></td></tr>
<tr><th id="767">767</th><td><i class="doc"> * provide the best performance with minimal memory waste.</i></td></tr>
<tr><th id="768">768</th><td><i class="doc"> * Increasing this does not improve performance even when writing</i></td></tr>
<tr><th id="769">769</th><td><i class="doc"> * huge messages.</i></td></tr>
<tr><th id="770">770</th><td><i class="doc"> */</i></td></tr>
<tr><th id="771">771</th><td><u>#<span data-ppcond="771">ifndef</span> <span class="macro" data-ref="_M/MPACK_BUFFER_SIZE">MPACK_BUFFER_SIZE</span></u></td></tr>
<tr><th id="772">772</th><td><u>#define <dfn class="macro" id="_M/MPACK_BUFFER_SIZE" data-ref="_M/MPACK_BUFFER_SIZE">MPACK_BUFFER_SIZE</dfn> 4096</u></td></tr>
<tr><th id="773">773</th><td><u>#<span data-ppcond="771">endif</span></u></td></tr>
<tr><th id="774">774</th><td></td></tr>
<tr><th id="775">775</th><td><i class="doc">/**</i></td></tr>
<tr><th id="776">776</th><td><i class="doc"> * Minimum size for paged allocations in bytes.</i></td></tr>
<tr><th id="777">777</th><td><i class="doc"> *</i></td></tr>
<tr><th id="778">778</th><td><i class="doc"> * This is the value used by default for MPACK_NODE_PAGE_SIZE and</i></td></tr>
<tr><th id="779">779</th><td><i class="doc"> * MPACK_BUILDER_PAGE_SIZE.</i></td></tr>
<tr><th id="780">780</th><td><i class="doc"> */</i></td></tr>
<tr><th id="781">781</th><td><u>#<span data-ppcond="781">ifndef</span> <span class="macro" data-ref="_M/MPACK_PAGE_SIZE">MPACK_PAGE_SIZE</span></u></td></tr>
<tr><th id="782">782</th><td><u>#define <dfn class="macro" id="_M/MPACK_PAGE_SIZE" data-ref="_M/MPACK_PAGE_SIZE">MPACK_PAGE_SIZE</dfn> 4096</u></td></tr>
<tr><th id="783">783</th><td><u>#<span data-ppcond="781">endif</span></u></td></tr>
<tr><th id="784">784</th><td></td></tr>
<tr><th id="785">785</th><td><i class="doc">/**</i></td></tr>
<tr><th id="786">786</th><td><i class="doc"> * Minimum size of an allocated node page in bytes.</i></td></tr>
<tr><th id="787">787</th><td><i class="doc"> *</i></td></tr>
<tr><th id="788">788</th><td><i class="doc"> * The children for a given compound element must be contiguous, so</i></td></tr>
<tr><th id="789">789</th><td><i class="doc"> * larger pages than this may be allocated as needed. (Safety checks</i></td></tr>
<tr><th id="790">790</th><td><i class="doc"> * exist to prevent malicious data from causing too large allocations.)</i></td></tr>
<tr><th id="791">791</th><td><i class="doc"> *</i></td></tr>
<tr><th id="792">792</th><td><i class="doc"> * See <span class="command">@ref</span> <span class="verb">mpack_node_data_t for the size of nodes.</span></i></td></tr>
<tr><th id="793">793</th><td><i class="doc"> *</i></td></tr>
<tr><th id="794">794</th><td><i class="doc"> * Using as many nodes fit in one memory page seems to provide the</i></td></tr>
<tr><th id="795">795</th><td><i class="doc"> * best performance, and has very little waste when parsing small</i></td></tr>
<tr><th id="796">796</th><td><i class="doc"> * messages.</i></td></tr>
<tr><th id="797">797</th><td><i class="doc"> */</i></td></tr>
<tr><th id="798">798</th><td><u>#<span data-ppcond="798">ifndef</span> <span class="macro" data-ref="_M/MPACK_NODE_PAGE_SIZE">MPACK_NODE_PAGE_SIZE</span></u></td></tr>
<tr><th id="799">799</th><td><u>#define <dfn class="macro" id="_M/MPACK_NODE_PAGE_SIZE" data-ref="_M/MPACK_NODE_PAGE_SIZE">MPACK_NODE_PAGE_SIZE</dfn> MPACK_PAGE_SIZE</u></td></tr>
<tr><th id="800">800</th><td><u>#<span data-ppcond="798">endif</span></u></td></tr>
<tr><th id="801">801</th><td></td></tr>
<tr><th id="802">802</th><td><i class="doc">/**</i></td></tr>
<tr><th id="803">803</th><td><i class="doc"> * Minimum size of an allocated builder page in bytes.</i></td></tr>
<tr><th id="804">804</th><td><i class="doc"> *</i></td></tr>
<tr><th id="805">805</th><td><i class="doc"> * Builder writes are deferred to the allocated builder buffer which is</i></td></tr>
<tr><th id="806">806</th><td><i class="doc"> * composed of a list of buffer pages. This defines the size of those pages.</i></td></tr>
<tr><th id="807">807</th><td><i class="doc"> */</i></td></tr>
<tr><th id="808">808</th><td><u>#<span data-ppcond="808">ifndef</span> <span class="macro" data-ref="_M/MPACK_BUILDER_PAGE_SIZE">MPACK_BUILDER_PAGE_SIZE</span></u></td></tr>
<tr><th id="809">809</th><td><u>#define <dfn class="macro" id="_M/MPACK_BUILDER_PAGE_SIZE" data-ref="_M/MPACK_BUILDER_PAGE_SIZE">MPACK_BUILDER_PAGE_SIZE</dfn> MPACK_PAGE_SIZE</u></td></tr>
<tr><th id="810">810</th><td><u>#<span data-ppcond="808">endif</span></u></td></tr>
<tr><th id="811">811</th><td></td></tr>
<tr><th id="812">812</th><td><i class="doc">/**</i></td></tr>
<tr><th id="813">813</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_BUILDER_INTERNAL_STORAGE</span></i></td></tr>
<tr><th id="814">814</th><td><i class="doc"> *</i></td></tr>
<tr><th id="815">815</th><td><i class="doc"> * Enables a small amount of internal storage within the writer to avoid some</i></td></tr>
<tr><th id="816">816</th><td><i class="doc"> * allocations when using builders.</i></td></tr>
<tr><th id="817">817</th><td><i class="doc"> *</i></td></tr>
<tr><th id="818">818</th><td><i class="doc"> * This is disabled by default. Enable it to potentially improve performance at</i></td></tr>
<tr><th id="819">819</th><td><i class="doc"> * the expense of a larger writer.</i></td></tr>
<tr><th id="820">820</th><td><i class="doc"> *</i></td></tr>
<tr><th id="821">821</th><td><i class="doc"> * <span class="command">@see</span> MPACK_BUILDER_INTERNAL_STORAGE_SIZE to configure its size.</i></td></tr>
<tr><th id="822">822</th><td><i class="doc"> */</i></td></tr>
<tr><th id="823">823</th><td><u>#<span data-ppcond="823">ifndef</span> <span class="macro" data-ref="_M/MPACK_BUILDER_INTERNAL_STORAGE">MPACK_BUILDER_INTERNAL_STORAGE</span></u></td></tr>
<tr><th id="824">824</th><td><u>#define <dfn class="macro" id="_M/MPACK_BUILDER_INTERNAL_STORAGE" data-ref="_M/MPACK_BUILDER_INTERNAL_STORAGE">MPACK_BUILDER_INTERNAL_STORAGE</dfn> 0</u></td></tr>
<tr><th id="825">825</th><td><u>#<span data-ppcond="823">endif</span></u></td></tr>
<tr><th id="826">826</th><td></td></tr>
<tr><th id="827">827</th><td><i class="doc">/**</i></td></tr>
<tr><th id="828">828</th><td><i class="doc"> * Amount of space reserved inside <span class="command">@ref</span> <span class="verb">mpack_writer_t for the Builders. This</span></i></td></tr>
<tr><th id="829">829</th><td><i class="doc"> * can allow small messages to be built with the Builder API without incurring</i></td></tr>
<tr><th id="830">830</th><td><i class="doc"> * an allocation.</i></td></tr>
<tr><th id="831">831</th><td><i class="doc"> *</i></td></tr>
<tr><th id="832">832</th><td><i class="doc"> * Builder metadata is placed in this space in addition to the literal</i></td></tr>
<tr><th id="833">833</th><td><i class="doc"> * MessagePack data. It needs to be big enough to be useful, but not so big as</i></td></tr>
<tr><th id="834">834</th><td><i class="doc"> * to overflow the stack. If more space is needed, pages are allocated.</i></td></tr>
<tr><th id="835">835</th><td><i class="doc"> *</i></td></tr>
<tr><th id="836">836</th><td><i class="doc"> * This is only used if MPACK_BUILDER_INTERNAL_STORAGE is enabled.</i></td></tr>
<tr><th id="837">837</th><td><i class="doc"> *</i></td></tr>
<tr><th id="838">838</th><td><i class="doc"> * <span class="command">@see</span> MPACK_BUILDER_PAGE_SIZE</i></td></tr>
<tr><th id="839">839</th><td><i class="doc"> * <span class="command">@see</span> MPACK_BUILDER_INTERNAL_STORAGE</i></td></tr>
<tr><th id="840">840</th><td><i class="doc"> *</i></td></tr>
<tr><th id="841">841</th><td><i class="doc"> * <span class="command">@warning</span> Writers are typically placed on the stack so make sure you have</i></td></tr>
<tr><th id="842">842</th><td><i class="doc"> * sufficient stack space. Some libc use relatively small stacks even on</i></td></tr>
<tr><th id="843">843</th><td><i class="doc"> * desktop platforms, e.g. musl.</i></td></tr>
<tr><th id="844">844</th><td><i class="doc"> */</i></td></tr>
<tr><th id="845">845</th><td><u>#<span data-ppcond="845">ifndef</span> <span class="macro" data-ref="_M/MPACK_BUILDER_INTERNAL_STORAGE_SIZE">MPACK_BUILDER_INTERNAL_STORAGE_SIZE</span></u></td></tr>
<tr><th id="846">846</th><td><u>#define <dfn class="macro" id="_M/MPACK_BUILDER_INTERNAL_STORAGE_SIZE" data-ref="_M/MPACK_BUILDER_INTERNAL_STORAGE_SIZE">MPACK_BUILDER_INTERNAL_STORAGE_SIZE</dfn> 256</u></td></tr>
<tr><th id="847">847</th><td><u>#<span data-ppcond="845">endif</span></u></td></tr>
<tr><th id="848">848</th><td></td></tr>
<tr><th id="849">849</th><td><i class="doc">/**</i></td></tr>
<tr><th id="850">850</th><td><i class="doc"> * The initial depth for the node parser. When MPACK_MALLOC is available,</i></td></tr>
<tr><th id="851">851</th><td><i class="doc"> * the node parser has no practical depth limit, and it is not recursive</i></td></tr>
<tr><th id="852">852</th><td><i class="doc"> * so there is no risk of overflowing the call stack.</i></td></tr>
<tr><th id="853">853</th><td><i class="doc"> */</i></td></tr>
<tr><th id="854">854</th><td><u>#<span data-ppcond="854">ifndef</span> <span class="macro" data-ref="_M/MPACK_NODE_INITIAL_DEPTH">MPACK_NODE_INITIAL_DEPTH</span></u></td></tr>
<tr><th id="855">855</th><td><u>#define <dfn class="macro" id="_M/MPACK_NODE_INITIAL_DEPTH" data-ref="_M/MPACK_NODE_INITIAL_DEPTH">MPACK_NODE_INITIAL_DEPTH</dfn> 8</u></td></tr>
<tr><th id="856">856</th><td><u>#<span data-ppcond="854">endif</span></u></td></tr>
<tr><th id="857">857</th><td></td></tr>
<tr><th id="858">858</th><td><i class="doc">/**</i></td></tr>
<tr><th id="859">859</th><td><i class="doc"> * The maximum depth for the node parser if <span class="command">@ref</span> <span class="verb">MPACK_MALLOC is not available.</span></i></td></tr>
<tr><th id="860">860</th><td><i class="doc"> */</i></td></tr>
<tr><th id="861">861</th><td><u>#<span data-ppcond="861">ifndef</span> <span class="macro" data-ref="_M/MPACK_NODE_MAX_DEPTH_WITHOUT_MALLOC">MPACK_NODE_MAX_DEPTH_WITHOUT_MALLOC</span></u></td></tr>
<tr><th id="862">862</th><td><u>#define <dfn class="macro" id="_M/MPACK_NODE_MAX_DEPTH_WITHOUT_MALLOC" data-ref="_M/MPACK_NODE_MAX_DEPTH_WITHOUT_MALLOC">MPACK_NODE_MAX_DEPTH_WITHOUT_MALLOC</dfn> 32</u></td></tr>
<tr><th id="863">863</th><td><u>#<span data-ppcond="861">endif</span></u></td></tr>
<tr><th id="864">864</th><td></td></tr>
<tr><th id="865">865</th><td><i class="doc">/**</i></td></tr>
<tr><th id="866">866</th><td><i class="doc"> * <span class="command">@def</span> <span class="verb">MPACK_NO_BUILTINS</span></i></td></tr>
<tr><th id="867">867</th><td><i class="doc"> *</i></td></tr>
<tr><th id="868">868</th><td><i class="doc"> * Whether to disable compiler intrinsics and other built-in functions.</i></td></tr>
<tr><th id="869">869</th><td><i class="doc"> *</i></td></tr>
<tr><th id="870">870</th><td><i class="doc"> * If this is enabled, MPack won't use `__attribute__`, `__declspec`, any</i></td></tr>
<tr><th id="871">871</th><td><i class="doc"> * function starting with `__builtin`, or pretty much anything else that isn't</i></td></tr>
<tr><th id="872">872</th><td><i class="doc"> * standard C.</i></td></tr>
<tr><th id="873">873</th><td><i class="doc"> */</i></td></tr>
<tr><th id="874">874</th><td><u>#<span data-ppcond="874">if</span> defined(<span class="macro" data-ref="_M/MPACK_DOXYGEN">MPACK_DOXYGEN</span>)</u></td></tr>
<tr><th id="875">875</th><td><u>#if MPACK_DOXYGEN</u></td></tr>
<tr><th id="876">876</th><td>    <u>#define MPACK_NO_BUILTINS 0</u></td></tr>
<tr><th id="877">877</th><td><u>#endif</u></td></tr>
<tr><th id="878">878</th><td><u>#<span data-ppcond="874">endif</span></u></td></tr>
<tr><th id="879">879</th><td></td></tr>
<tr><th id="880">880</th><td><i class="doc">/**</i></td></tr>
<tr><th id="881">881</th><td><i class="doc"> * @}</i></td></tr>
<tr><th id="882">882</th><td><i class="doc"> */</i></td></tr>
<tr><th id="883">883</th><td></td></tr>
<tr><th id="884">884</th><td></td></tr>
<tr><th id="885">885</th><td></td></tr>
<tr><th id="886">886</th><td><u>#<span data-ppcond="886">if</span> <a class="macro" href="#645" title="0" data-ref="_M/MPACK_DEBUG">MPACK_DEBUG</a></u></td></tr>
<tr><th id="887">887</th><td><i class="doc">/**</i></td></tr>
<tr><th id="888">888</th><td><i class="doc"> * <span class="command">@name</span> <span class="verb">Debug Functions</span></i></td></tr>
<tr><th id="889">889</th><td><i class="doc"> * @{</i></td></tr>
<tr><th id="890">890</th><td><i class="doc"> */</i></td></tr>
<tr><th id="891">891</th><td><i class="doc">/**</i></td></tr>
<tr><th id="892">892</th><td><i class="doc"> * Implement this and define <span class="command">@ref</span> <span class="verb">MPACK_CUSTOM_ASSERT to use a custom</span></i></td></tr>
<tr><th id="893">893</th><td><i class="doc"> * assertion function.</i></td></tr>
<tr><th id="894">894</th><td><i class="doc"> *</i></td></tr>
<tr><th id="895">895</th><td><i class="doc"> * This function should not return. If it does, MPack will<span class="command"> @c</span> <span class="arg">abort().</span></i></td></tr>
<tr><th id="896">896</th><td><i class="doc"> *</i></td></tr>
<tr><th id="897">897</th><td><i class="doc"> * If you use C++, make sure you include<span class="command"> @c</span> <span class="arg">mpack.h</span> where you define</i></td></tr>
<tr><th id="898">898</th><td><i class="doc"> * this to get the correct linkage (or define it <span class="tag">&lt;code&gt;</span>extern "C"<span class="tag">&lt;/code&gt;</span>.)</i></td></tr>
<tr><th id="899">899</th><td><i class="doc"> *</i></td></tr>
<tr><th id="900">900</th><td><i class="doc"> * Asserts are only used when <span class="command">@ref</span> <span class="verb">MPACK_DEBUG is enabled, and can be</span></i></td></tr>
<tr><th id="901">901</th><td><i class="doc"> * triggered by bugs in MPack or bugs due to incorrect usage of MPack.</i></td></tr>
<tr><th id="902">902</th><td><i class="doc"> */</i></td></tr>
<tr><th id="903">903</th><td><em>void</em> mpack_assert_fail(<em>const</em> <em>char</em>* message);</td></tr>
<tr><th id="904">904</th><td><i class="doc">/**</i></td></tr>
<tr><th id="905">905</th><td><i class="doc"> * @}</i></td></tr>
<tr><th id="906">906</th><td><i class="doc"> */</i></td></tr>
<tr><th id="907">907</th><td><u>#<span data-ppcond="886">endif</span></u></td></tr>
<tr><th id="908">908</th><td></td></tr>
<tr><th id="909">909</th><td></td></tr>
<tr><th id="910">910</th><td></td></tr>
<tr><th id="911">911</th><td><i>// The rest of this file shouldn't show up in Doxygen docs.</i></td></tr>
<tr><th id="912">912</th><td><i class="doc">/**<span class="command"> @cond</span> */</i></td></tr>
<tr><th id="913">913</th><td></td></tr>
<tr><th id="914">914</th><td></td></tr>
<tr><th id="915">915</th><td></td></tr>
<tr><th id="916">916</th><td><i>/*</i></td></tr>
<tr><th id="917">917</th><td><i> * All remaining pseudo-configuration options that have not yet been set must</i></td></tr>
<tr><th id="918">918</th><td><i> * be defined here in order to support -Wundef.</i></td></tr>
<tr><th id="919">919</th><td><i> *</i></td></tr>
<tr><th id="920">920</th><td><i> * These aren't real configuration options; they are implementation details of</i></td></tr>
<tr><th id="921">921</th><td><i> * MPack.</i></td></tr>
<tr><th id="922">922</th><td><i> */</i></td></tr>
<tr><th id="923">923</th><td><u>#<span data-ppcond="923">ifndef</span> <span class="macro" data-ref="_M/MPACK_CUSTOM_BREAK">MPACK_CUSTOM_BREAK</span></u></td></tr>
<tr><th id="924">924</th><td><u>#define <dfn class="macro" id="_M/MPACK_CUSTOM_BREAK" data-ref="_M/MPACK_CUSTOM_BREAK">MPACK_CUSTOM_BREAK</dfn> 0</u></td></tr>
<tr><th id="925">925</th><td><u>#<span data-ppcond="923">endif</span></u></td></tr>
<tr><th id="926">926</th><td><u>#<span data-ppcond="926">ifndef</span> <span class="macro" data-ref="_M/MPACK_EMIT_INLINE_DEFS">MPACK_EMIT_INLINE_DEFS</span></u></td></tr>
<tr><th id="927">927</th><td><u>#define <dfn class="macro" id="_M/MPACK_EMIT_INLINE_DEFS" data-ref="_M/MPACK_EMIT_INLINE_DEFS">MPACK_EMIT_INLINE_DEFS</dfn> 0</u></td></tr>
<tr><th id="928">928</th><td><u>#<span data-ppcond="926">endif</span></u></td></tr>
<tr><th id="929">929</th><td><u>#<span data-ppcond="929">ifndef</span> <span class="macro" data-ref="_M/MPACK_AMALGAMATED">MPACK_AMALGAMATED</span></u></td></tr>
<tr><th id="930">930</th><td><u>#define <dfn class="macro" id="_M/MPACK_AMALGAMATED" data-ref="_M/MPACK_AMALGAMATED">MPACK_AMALGAMATED</dfn> 0</u></td></tr>
<tr><th id="931">931</th><td><u>#<span data-ppcond="929">endif</span></u></td></tr>
<tr><th id="932">932</th><td><u>#<span data-ppcond="932">ifndef</span> <span class="macro" data-ref="_M/MPACK_RELEASE_VERSION">MPACK_RELEASE_VERSION</span></u></td></tr>
<tr><th id="933">933</th><td><u>#define <dfn class="macro" id="_M/MPACK_RELEASE_VERSION" data-ref="_M/MPACK_RELEASE_VERSION">MPACK_RELEASE_VERSION</dfn> 0</u></td></tr>
<tr><th id="934">934</th><td><u>#<span data-ppcond="932">endif</span></u></td></tr>
<tr><th id="935">935</th><td><u>#<span data-ppcond="935">ifndef</span> <span class="macro" data-ref="_M/MPACK_INTERNAL">MPACK_INTERNAL</span></u></td></tr>
<tr><th id="936">936</th><td><u>#define <dfn class="macro" id="_M/MPACK_INTERNAL" data-ref="_M/MPACK_INTERNAL">MPACK_INTERNAL</dfn> 0</u></td></tr>
<tr><th id="937">937</th><td><u>#<span data-ppcond="935">endif</span></u></td></tr>
<tr><th id="938">938</th><td></td></tr>
<tr><th id="939">939</th><td></td></tr>
<tr><th id="940">940</th><td></td></tr>
<tr><th id="941">941</th><td><i>/* System headers (based on configuration) */</i></td></tr>
<tr><th id="942">942</th><td></td></tr>
<tr><th id="943">943</th><td><u>#<span data-ppcond="943">if</span> <a class="macro" href="#283" title="1" data-ref="_M/MPACK_CONFORMING">MPACK_CONFORMING</a></u></td></tr>
<tr><th id="944">944</th><td>    <u>#include &lt;stddef.h&gt;</u></td></tr>
<tr><th id="945">945</th><td>    <u>#include &lt;stdint.h&gt;</u></td></tr>
<tr><th id="946">946</th><td>    <u>#include &lt;stdbool.h&gt;</u></td></tr>
<tr><th id="947">947</th><td>    <u>#include &lt;inttypes.h&gt;</u></td></tr>
<tr><th id="948">948</th><td>    <u>#include &lt;limits.h&gt;</u></td></tr>
<tr><th id="949">949</th><td><u>#<span data-ppcond="943">endif</span></u></td></tr>
<tr><th id="950">950</th><td></td></tr>
<tr><th id="951">951</th><td><u>#<span data-ppcond="951">if</span> <a class="macro" href="#315" title="1" data-ref="_M/MPACK_STDLIB">MPACK_STDLIB</a></u></td></tr>
<tr><th id="952">952</th><td>    <u>#include <a href="../../../include/string.h.html">&lt;string.h&gt;</a></u></td></tr>
<tr><th id="953">953</th><td>    <u>#include <a href="../../../include/stdlib.h.html">&lt;stdlib.h&gt;</a></u></td></tr>
<tr><th id="954">954</th><td><u>#<span data-ppcond="951">endif</span></u></td></tr>
<tr><th id="955">955</th><td></td></tr>
<tr><th id="956">956</th><td><u>#<span data-ppcond="956">if</span> <a class="macro" href="#329" title="1" data-ref="_M/MPACK_STDIO">MPACK_STDIO</a></u></td></tr>
<tr><th id="957">957</th><td>    <u>#include <a href="../../../include/stdio.h.html">&lt;stdio.h&gt;</a></u></td></tr>
<tr><th id="958">958</th><td>    <u>#include <a href="../../../include/errno.h.html">&lt;errno.h&gt;</a></u></td></tr>
<tr><th id="959">959</th><td>    <u>#<span data-ppcond="959">if</span> <a class="macro" href="#645" title="0" data-ref="_M/MPACK_DEBUG">MPACK_DEBUG</a></u></td></tr>
<tr><th id="960">960</th><td>        <u>#include &lt;stdarg.h&gt;</u></td></tr>
<tr><th id="961">961</th><td>    <u>#<span data-ppcond="959">endif</span></u></td></tr>
<tr><th id="962">962</th><td><u>#<span data-ppcond="956">endif</span></u></td></tr>
<tr><th id="963">963</th><td></td></tr>
<tr><th id="964">964</th><td></td></tr>
<tr><th id="965">965</th><td></td></tr>
<tr><th id="966">966</th><td><i>/*</i></td></tr>
<tr><th id="967">967</th><td><i> * Integer Constants and Limits</i></td></tr>
<tr><th id="968">968</th><td><i> */</i></td></tr>
<tr><th id="969">969</th><td></td></tr>
<tr><th id="970">970</th><td><u>#<span data-ppcond="970">if</span> <a class="macro" href="#283" title="1" data-ref="_M/MPACK_CONFORMING">MPACK_CONFORMING</a></u></td></tr>
<tr><th id="971">971</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT64_C" data-ref="_M/MPACK_INT64_C">MPACK_INT64_C</dfn> INT64_C</u></td></tr>
<tr><th id="972">972</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_UINT64_C" data-ref="_M/MPACK_UINT64_C">MPACK_UINT64_C</dfn> UINT64_C</u></td></tr>
<tr><th id="973">973</th><td></td></tr>
<tr><th id="974">974</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT8_MIN" data-ref="_M/MPACK_INT8_MIN">MPACK_INT8_MIN</dfn> INT8_MIN</u></td></tr>
<tr><th id="975">975</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT16_MIN" data-ref="_M/MPACK_INT16_MIN">MPACK_INT16_MIN</dfn> INT16_MIN</u></td></tr>
<tr><th id="976">976</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT32_MIN" data-ref="_M/MPACK_INT32_MIN">MPACK_INT32_MIN</dfn> INT32_MIN</u></td></tr>
<tr><th id="977">977</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT64_MIN" data-ref="_M/MPACK_INT64_MIN">MPACK_INT64_MIN</dfn> INT64_MIN</u></td></tr>
<tr><th id="978">978</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT_MIN" data-ref="_M/MPACK_INT_MIN">MPACK_INT_MIN</dfn> INT_MIN</u></td></tr>
<tr><th id="979">979</th><td></td></tr>
<tr><th id="980">980</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT8_MAX" data-ref="_M/MPACK_INT8_MAX">MPACK_INT8_MAX</dfn> INT8_MAX</u></td></tr>
<tr><th id="981">981</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT16_MAX" data-ref="_M/MPACK_INT16_MAX">MPACK_INT16_MAX</dfn> INT16_MAX</u></td></tr>
<tr><th id="982">982</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT32_MAX" data-ref="_M/MPACK_INT32_MAX">MPACK_INT32_MAX</dfn> INT32_MAX</u></td></tr>
<tr><th id="983">983</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT64_MAX" data-ref="_M/MPACK_INT64_MAX">MPACK_INT64_MAX</dfn> INT64_MAX</u></td></tr>
<tr><th id="984">984</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_INT_MAX" data-ref="_M/MPACK_INT_MAX">MPACK_INT_MAX</dfn> INT_MAX</u></td></tr>
<tr><th id="985">985</th><td></td></tr>
<tr><th id="986">986</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_UINT8_MAX" data-ref="_M/MPACK_UINT8_MAX">MPACK_UINT8_MAX</dfn> UINT8_MAX</u></td></tr>
<tr><th id="987">987</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_UINT16_MAX" data-ref="_M/MPACK_UINT16_MAX">MPACK_UINT16_MAX</dfn> UINT16_MAX</u></td></tr>
<tr><th id="988">988</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_UINT32_MAX" data-ref="_M/MPACK_UINT32_MAX">MPACK_UINT32_MAX</dfn> UINT32_MAX</u></td></tr>
<tr><th id="989">989</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_UINT64_MAX" data-ref="_M/MPACK_UINT64_MAX">MPACK_UINT64_MAX</dfn> UINT64_MAX</u></td></tr>
<tr><th id="990">990</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_UINT_MAX" data-ref="_M/MPACK_UINT_MAX">MPACK_UINT_MAX</dfn> UINT_MAX</u></td></tr>
<tr><th id="991">991</th><td><u>#<span data-ppcond="970">else</span></u></td></tr>
<tr><th id="992">992</th><td>    <i>// For a non-conforming implementation we assume int is 32 bits.</i></td></tr>
<tr><th id="993">993</th><td></td></tr>
<tr><th id="994">994</th><td>    <u>#define MPACK_INT64_C(x) ((int64_t)(x##LL))</u></td></tr>
<tr><th id="995">995</th><td>    <u>#define MPACK_UINT64_C(x) ((uint64_t)(x##LLU))</u></td></tr>
<tr><th id="996">996</th><td></td></tr>
<tr><th id="997">997</th><td>    <u>#define MPACK_INT8_MIN ((int8_t)(0x80))</u></td></tr>
<tr><th id="998">998</th><td>    <u>#define MPACK_INT16_MIN ((int16_t)(0x8000))</u></td></tr>
<tr><th id="999">999</th><td>    <u>#define MPACK_INT32_MIN ((int32_t)(0x80000000))</u></td></tr>
<tr><th id="1000">1000</th><td>    <u>#define MPACK_INT64_MIN MPACK_INT64_C(0x8000000000000000)</u></td></tr>
<tr><th id="1001">1001</th><td>    <u>#define MPACK_INT_MIN MPACK_INT32_MIN</u></td></tr>
<tr><th id="1002">1002</th><td></td></tr>
<tr><th id="1003">1003</th><td>    <u>#define MPACK_INT8_MAX ((int8_t)(0x7f))</u></td></tr>
<tr><th id="1004">1004</th><td>    <u>#define MPACK_INT16_MAX ((int16_t)(0x7fff))</u></td></tr>
<tr><th id="1005">1005</th><td>    <u>#define MPACK_INT32_MAX ((int32_t)(0x7fffffff))</u></td></tr>
<tr><th id="1006">1006</th><td>    <u>#define MPACK_INT64_MAX MPACK_INT64_C(0x7fffffffffffffff)</u></td></tr>
<tr><th id="1007">1007</th><td>    <u>#define MPACK_INT_MAX MPACK_INT32_MAX</u></td></tr>
<tr><th id="1008">1008</th><td></td></tr>
<tr><th id="1009">1009</th><td>    <u>#define MPACK_UINT8_MAX ((uint8_t)(0xffu))</u></td></tr>
<tr><th id="1010">1010</th><td>    <u>#define MPACK_UINT16_MAX ((uint16_t)(0xffffu))</u></td></tr>
<tr><th id="1011">1011</th><td>    <u>#define MPACK_UINT32_MAX ((uint32_t)(0xffffffffu))</u></td></tr>
<tr><th id="1012">1012</th><td>    <u>#define MPACK_UINT64_MAX MPACK_UINT64_C(0xffffffffffffffff)</u></td></tr>
<tr><th id="1013">1013</th><td>    <u>#define MPACK_UINT_MAX MPACK_UINT32_MAX</u></td></tr>
<tr><th id="1014">1014</th><td><u>#<span data-ppcond="970">endif</span></u></td></tr>
<tr><th id="1015">1015</th><td></td></tr>
<tr><th id="1016">1016</th><td></td></tr>
<tr><th id="1017">1017</th><td></td></tr>
<tr><th id="1018">1018</th><td><i>/*</i></td></tr>
<tr><th id="1019">1019</th><td><i> * Floating point support</i></td></tr>
<tr><th id="1020">1020</th><td><i> */</i></td></tr>
<tr><th id="1021">1021</th><td></td></tr>
<tr><th id="1022">1022</th><td><u>#<span data-ppcond="1022">if</span> <a class="macro" href="#360" title="1" data-ref="_M/MPACK_DOUBLE">MPACK_DOUBLE</a> &amp;&amp; !<a class="macro" href="#341" title="1" data-ref="_M/MPACK_FLOAT">MPACK_FLOAT</a></u></td></tr>
<tr><th id="1023">1023</th><td>    <u>#error "MPACK_DOUBLE requires MPACK_FLOAT."</u></td></tr>
<tr><th id="1024">1024</th><td><u>#<span data-ppcond="1022">endif</span></u></td></tr>
<tr><th id="1025">1025</th><td></td></tr>
<tr><th id="1026">1026</th><td><i>// If we don't have support for float or double, we poison the identifiers to</i></td></tr>
<tr><th id="1027">1027</th><td><i>// make sure we don't define anything related to them.</i></td></tr>
<tr><th id="1028">1028</th><td><u>#<span data-ppcond="1028">if</span> <a class="macro" href="#936" title="0" data-ref="_M/MPACK_INTERNAL">MPACK_INTERNAL</a> &amp;&amp; defined(<span class="macro" data-ref="_M/MPACK_UNIT_TESTS">MPACK_UNIT_TESTS</span>) &amp;&amp; defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>)</u></td></tr>
<tr><th id="1029">1029</th><td>    <u>#if !MPACK_FLOAT</u></td></tr>
<tr><th id="1030">1030</th><td>        <u>#pragma GCC poison float</u></td></tr>
<tr><th id="1031">1031</th><td>    <u>#endif</u></td></tr>
<tr><th id="1032">1032</th><td>    <u>#if !MPACK_DOUBLE</u></td></tr>
<tr><th id="1033">1033</th><td>        <u>#pragma GCC poison double</u></td></tr>
<tr><th id="1034">1034</th><td>    <u>#endif</u></td></tr>
<tr><th id="1035">1035</th><td><u>#<span data-ppcond="1028">endif</span></u></td></tr>
<tr><th id="1036">1036</th><td></td></tr>
<tr><th id="1037">1037</th><td></td></tr>
<tr><th id="1038">1038</th><td></td></tr>
<tr><th id="1039">1039</th><td><i>/*</i></td></tr>
<tr><th id="1040">1040</th><td><i> * extern C</i></td></tr>
<tr><th id="1041">1041</th><td><i> */</i></td></tr>
<tr><th id="1042">1042</th><td></td></tr>
<tr><th id="1043">1043</th><td><u>#<span data-ppcond="1043">ifdef</span> <span class="macro" data-ref="_M/__cplusplus">__cplusplus</span></u></td></tr>
<tr><th id="1044">1044</th><td>    <u>#define MPACK_EXTERN_C_BEGIN extern "C" {</u></td></tr>
<tr><th id="1045">1045</th><td>    <u>#define MPACK_EXTERN_C_END   }</u></td></tr>
<tr><th id="1046">1046</th><td><u>#<span data-ppcond="1043">else</span></u></td></tr>
<tr><th id="1047">1047</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_EXTERN_C_BEGIN" data-ref="_M/MPACK_EXTERN_C_BEGIN">MPACK_EXTERN_C_BEGIN</dfn> /*nothing*/</u></td></tr>
<tr><th id="1048">1048</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_EXTERN_C_END" data-ref="_M/MPACK_EXTERN_C_END">MPACK_EXTERN_C_END</dfn>   /*nothing*/</u></td></tr>
<tr><th id="1049">1049</th><td><u>#<span data-ppcond="1043">endif</span></u></td></tr>
<tr><th id="1050">1050</th><td></td></tr>
<tr><th id="1051">1051</th><td></td></tr>
<tr><th id="1052">1052</th><td></td></tr>
<tr><th id="1053">1053</th><td><i>/*</i></td></tr>
<tr><th id="1054">1054</th><td><i> * Warnings</i></td></tr>
<tr><th id="1055">1055</th><td><i> */</i></td></tr>
<tr><th id="1056">1056</th><td></td></tr>
<tr><th id="1057">1057</th><td><u>#<span data-ppcond="1057">if</span> defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>)</u></td></tr>
<tr><th id="1058">1058</th><td>    <i>// Diagnostic push is not supported before GCC 4.6.</i></td></tr>
<tr><th id="1059">1059</th><td>    <u>#<span data-ppcond="1059">if</span> defined(<span class="macro" data-ref="_M/__clang__">__clang__</span>) || <span class="macro" title="4" data-ref="_M/__GNUC__">__GNUC__</span> &gt; 4 || (<span class="macro" title="4" data-ref="_M/__GNUC__">__GNUC__</span> == 4 &amp;&amp; <span class="macro" title="2" data-ref="_M/__GNUC_MINOR__">__GNUC_MINOR__</span> &gt;= 6)</u></td></tr>
<tr><th id="1060">1060</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_SILENCE_WARNINGS_PUSH" data-ref="_M/MPACK_SILENCE_WARNINGS_PUSH">MPACK_SILENCE_WARNINGS_PUSH</dfn> _Pragma ("GCC diagnostic push")</u></td></tr>
<tr><th id="1061">1061</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_SILENCE_WARNINGS_POP" data-ref="_M/MPACK_SILENCE_WARNINGS_POP">MPACK_SILENCE_WARNINGS_POP</dfn> _Pragma ("GCC diagnostic pop")</u></td></tr>
<tr><th id="1062">1062</th><td>    <u>#<span data-ppcond="1059">endif</span></u></td></tr>
<tr><th id="1063">1063</th><td><u>#<span data-ppcond="1057">elif</span> defined(_MSC_VER)</u></td></tr>
<tr><th id="1064">1064</th><td>    <i>// To support VS2017 and earlier we need to use __pragma and not _Pragma</i></td></tr>
<tr><th id="1065">1065</th><td>    <u>#define MPACK_SILENCE_WARNINGS_PUSH __pragma(warning(push))</u></td></tr>
<tr><th id="1066">1066</th><td>    <u>#define MPACK_SILENCE_WARNINGS_POP __pragma(warning(pop))</u></td></tr>
<tr><th id="1067">1067</th><td><u>#<span data-ppcond="1057">endif</span></u></td></tr>
<tr><th id="1068">1068</th><td></td></tr>
<tr><th id="1069">1069</th><td><u>#<span data-ppcond="1069">if</span> defined(<span class="macro" data-ref="_M/_MSC_VER">_MSC_VER</span>)</u></td></tr>
<tr><th id="1070">1070</th><td>    <i>// These are a bunch of mostly useless warnings emitted under MSVC /W4,</i></td></tr>
<tr><th id="1071">1071</th><td><i>    // some as a result of the expansion of macros.</i></td></tr>
<tr><th id="1072">1072</th><td>    <u>#define MPACK_SILENCE_WARNINGS_MSVC_W4 \</u></td></tr>
<tr><th id="1073">1073</th><td><u>            __pragma(warning(disable:4996)) /* _CRT_SECURE_NO_WARNINGS */ \</u></td></tr>
<tr><th id="1074">1074</th><td><u>            __pragma(warning(disable:4127)) /* comparison is constant */ \</u></td></tr>
<tr><th id="1075">1075</th><td><u>            __pragma(warning(disable:4702)) /* unreachable code */ \</u></td></tr>
<tr><th id="1076">1076</th><td><u>            __pragma(warning(disable:4310)) /* cast truncates constant value */</u></td></tr>
<tr><th id="1077">1077</th><td><u>#<span data-ppcond="1069">else</span></u></td></tr>
<tr><th id="1078">1078</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_SILENCE_WARNINGS_MSVC_W4" data-ref="_M/MPACK_SILENCE_WARNINGS_MSVC_W4">MPACK_SILENCE_WARNINGS_MSVC_W4</dfn> /*nothing*/</u></td></tr>
<tr><th id="1079">1079</th><td><u>#<span data-ppcond="1069">endif</span></u></td></tr>
<tr><th id="1080">1080</th><td></td></tr>
<tr><th id="1081">1081</th><td><i>/* GCC versions before 5.1 warn about defining a C99 non-static inline function</i></td></tr>
<tr><th id="1082">1082</th><td><i> * before declaring it (see issue #20). */</i></td></tr>
<tr><th id="1083">1083</th><td><u>#<span data-ppcond="1083">if</span> defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>) &amp;&amp; !defined(<span class="macro" data-ref="_M/__clang__">__clang__</span>)</u></td></tr>
<tr><th id="1084">1084</th><td>    <u>#if __GNUC__ &lt; 5 || (__GNUC__ == 5 &amp;&amp; __GNUC_MINOR__ &lt; 1)</u></td></tr>
<tr><th id="1085">1085</th><td>        <u>#ifdef __cplusplus</u></td></tr>
<tr><th id="1086">1086</th><td>            <u>#define MPACK_SILENCE_WARNINGS_MISSING_PROTOTYPES \</u></td></tr>
<tr><th id="1087">1087</th><td><u>                _Pragma ("GCC diagnostic ignored \"-Wmissing-declarations\"")</u></td></tr>
<tr><th id="1088">1088</th><td>        <u>#else</u></td></tr>
<tr><th id="1089">1089</th><td>            <u>#define MPACK_SILENCE_WARNINGS_MISSING_PROTOTYPES \</u></td></tr>
<tr><th id="1090">1090</th><td><u>                _Pragma ("GCC diagnostic ignored \"-Wmissing-prototypes\"")</u></td></tr>
<tr><th id="1091">1091</th><td>        <u>#endif</u></td></tr>
<tr><th id="1092">1092</th><td>    <u>#endif</u></td></tr>
<tr><th id="1093">1093</th><td><u>#<span data-ppcond="1083">endif</span></u></td></tr>
<tr><th id="1094">1094</th><td><u>#<span data-ppcond="1094">ifndef</span> <span class="macro" data-ref="_M/MPACK_SILENCE_WARNINGS_MISSING_PROTOTYPES">MPACK_SILENCE_WARNINGS_MISSING_PROTOTYPES</span></u></td></tr>
<tr><th id="1095">1095</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_SILENCE_WARNINGS_MISSING_PROTOTYPES" data-ref="_M/MPACK_SILENCE_WARNINGS_MISSING_PROTOTYPES">MPACK_SILENCE_WARNINGS_MISSING_PROTOTYPES</dfn> /*nothing*/</u></td></tr>
<tr><th id="1096">1096</th><td><u>#<span data-ppcond="1094">endif</span></u></td></tr>
<tr><th id="1097">1097</th><td></td></tr>
<tr><th id="1098">1098</th><td><i>/* GCC versions before 4.8 warn about shadowing a function with a variable that</i></td></tr>
<tr><th id="1099">1099</th><td><i> * isn't a function or function pointer (like "index"). */</i></td></tr>
<tr><th id="1100">1100</th><td><u>#<span data-ppcond="1100">if</span> defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>) &amp;&amp; !defined(<span class="macro" data-ref="_M/__clang__">__clang__</span>)</u></td></tr>
<tr><th id="1101">1101</th><td>    <u>#if __GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &lt; 8</u></td></tr>
<tr><th id="1102">1102</th><td>        <u>#define MPACK_SILENCE_WARNINGS_SHADOW \</u></td></tr>
<tr><th id="1103">1103</th><td><u>            _Pragma ("GCC diagnostic ignored \"-Wshadow\"")</u></td></tr>
<tr><th id="1104">1104</th><td>    <u>#endif</u></td></tr>
<tr><th id="1105">1105</th><td><u>#<span data-ppcond="1100">endif</span></u></td></tr>
<tr><th id="1106">1106</th><td><u>#<span data-ppcond="1106">ifndef</span> <span class="macro" data-ref="_M/MPACK_SILENCE_WARNINGS_SHADOW">MPACK_SILENCE_WARNINGS_SHADOW</span></u></td></tr>
<tr><th id="1107">1107</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_SILENCE_WARNINGS_SHADOW" data-ref="_M/MPACK_SILENCE_WARNINGS_SHADOW">MPACK_SILENCE_WARNINGS_SHADOW</dfn> /*nothing*/</u></td></tr>
<tr><th id="1108">1108</th><td><u>#<span data-ppcond="1106">endif</span></u></td></tr>
<tr><th id="1109">1109</th><td></td></tr>
<tr><th id="1110">1110</th><td><i>// On platforms with small size_t (e.g. AVR) we get type limits warnings where</i></td></tr>
<tr><th id="1111">1111</th><td><i>// we compare a size_t to e.g. MPACK_UINT32_MAX.</i></td></tr>
<tr><th id="1112">1112</th><td><u>#<span data-ppcond="1112">ifdef</span> <span class="macro" data-ref="_M/__AVR__">__AVR__</span></u></td></tr>
<tr><th id="1113">1113</th><td>    <u>#define MPACK_SILENCE_WARNINGS_TYPE_LIMITS \</u></td></tr>
<tr><th id="1114">1114</th><td><u>        _Pragma ("GCC diagnostic ignored \"-Wtype-limits\"")</u></td></tr>
<tr><th id="1115">1115</th><td><u>#<span data-ppcond="1112">else</span></u></td></tr>
<tr><th id="1116">1116</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_SILENCE_WARNINGS_TYPE_LIMITS" data-ref="_M/MPACK_SILENCE_WARNINGS_TYPE_LIMITS">MPACK_SILENCE_WARNINGS_TYPE_LIMITS</dfn> /*nothing*/</u></td></tr>
<tr><th id="1117">1117</th><td><u>#<span data-ppcond="1112">endif</span></u></td></tr>
<tr><th id="1118">1118</th><td></td></tr>
<tr><th id="1119">1119</th><td><i>// MPack uses declarations after statements. This silences warnings about it</i></td></tr>
<tr><th id="1120">1120</th><td><i>// (e.g. when using MPack in a Linux kernel module.)</i></td></tr>
<tr><th id="1121">1121</th><td><u>#<span data-ppcond="1121">if</span> defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>) &amp;&amp; !defined(<span class="macro" data-ref="_M/__cplusplus">__cplusplus</span>)</u></td></tr>
<tr><th id="1122">1122</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_SILENCE_WARNINGS_DECLARATION_AFTER_STATEMENT" data-ref="_M/MPACK_SILENCE_WARNINGS_DECLARATION_AFTER_STATEMENT">MPACK_SILENCE_WARNINGS_DECLARATION_AFTER_STATEMENT</dfn> \</u></td></tr>
<tr><th id="1123">1123</th><td><u>        _Pragma ("GCC diagnostic ignored \"-Wdeclaration-after-statement\"")</u></td></tr>
<tr><th id="1124">1124</th><td><u>#<span data-ppcond="1121">else</span></u></td></tr>
<tr><th id="1125">1125</th><td>    <u>#define MPACK_SILENCE_WARNINGS_DECLARATION_AFTER_STATEMENT /*nothing*/</u></td></tr>
<tr><th id="1126">1126</th><td><u>#<span data-ppcond="1121">endif</span></u></td></tr>
<tr><th id="1127">1127</th><td></td></tr>
<tr><th id="1128">1128</th><td><u>#<span data-ppcond="1128">ifdef</span> <a class="macro" href="#1060" data-ref="_M/MPACK_SILENCE_WARNINGS_PUSH">MPACK_SILENCE_WARNINGS_PUSH</a></u></td></tr>
<tr><th id="1129">1129</th><td>    <i>// We only silence warnings if push/pop is supported, that way we aren't</i></td></tr>
<tr><th id="1130">1130</th><td><i>    // silencing warnings in code that uses MPack. If your compiler doesn't</i></td></tr>
<tr><th id="1131">1131</th><td><i>    // support push/pop silencing of warnings, you'll have to turn off</i></td></tr>
<tr><th id="1132">1132</th><td><i>    // conflicting warnings manually.</i></td></tr>
<tr><th id="1133">1133</th><td></td></tr>
<tr><th id="1134">1134</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_SILENCE_WARNINGS_BEGIN" data-ref="_M/MPACK_SILENCE_WARNINGS_BEGIN">MPACK_SILENCE_WARNINGS_BEGIN</dfn> \</u></td></tr>
<tr><th id="1135">1135</th><td><u>        MPACK_SILENCE_WARNINGS_PUSH \</u></td></tr>
<tr><th id="1136">1136</th><td><u>        MPACK_SILENCE_WARNINGS_MSVC_W4 \</u></td></tr>
<tr><th id="1137">1137</th><td><u>        MPACK_SILENCE_WARNINGS_MISSING_PROTOTYPES \</u></td></tr>
<tr><th id="1138">1138</th><td><u>        MPACK_SILENCE_WARNINGS_SHADOW \</u></td></tr>
<tr><th id="1139">1139</th><td><u>        MPACK_SILENCE_WARNINGS_TYPE_LIMITS \</u></td></tr>
<tr><th id="1140">1140</th><td><u>        MPACK_SILENCE_WARNINGS_DECLARATION_AFTER_STATEMENT</u></td></tr>
<tr><th id="1141">1141</th><td></td></tr>
<tr><th id="1142">1142</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_SILENCE_WARNINGS_END" data-ref="_M/MPACK_SILENCE_WARNINGS_END">MPACK_SILENCE_WARNINGS_END</dfn> \</u></td></tr>
<tr><th id="1143">1143</th><td><u>        MPACK_SILENCE_WARNINGS_POP</u></td></tr>
<tr><th id="1144">1144</th><td><u>#<span data-ppcond="1128">else</span></u></td></tr>
<tr><th id="1145">1145</th><td>    <u>#define MPACK_SILENCE_WARNINGS_BEGIN /*nothing*/</u></td></tr>
<tr><th id="1146">1146</th><td>    <u>#define MPACK_SILENCE_WARNINGS_END /*nothing*/</u></td></tr>
<tr><th id="1147">1147</th><td><u>#<span data-ppcond="1128">endif</span></u></td></tr>
<tr><th id="1148">1148</th><td></td></tr>
<tr><th id="1149">1149</th><td><a class="macro" href="#1134" title="" data-ref="_M/MPACK_SILENCE_WARNINGS_BEGIN">MPACK_SILENCE_WARNINGS_BEGIN</a></td></tr>
<tr><th id="1150">1150</th><td><a class="macro" href="#1047" title="" data-ref="_M/MPACK_EXTERN_C_BEGIN">MPACK_EXTERN_C_BEGIN</a></td></tr>
<tr><th id="1151">1151</th><td></td></tr>
<tr><th id="1152">1152</th><td></td></tr>
<tr><th id="1153">1153</th><td></td></tr>
<tr><th id="1154">1154</th><td><i>/* Miscellaneous helper macros */</i></td></tr>
<tr><th id="1155">1155</th><td></td></tr>
<tr><th id="1156">1156</th><td><u>#define <dfn class="macro" id="_M/MPACK_UNUSED" data-ref="_M/MPACK_UNUSED">MPACK_UNUSED</dfn>(var) ((void)(var))</u></td></tr>
<tr><th id="1157">1157</th><td></td></tr>
<tr><th id="1158">1158</th><td><u>#define <dfn class="macro" id="_M/MPACK_STRINGIFY_IMPL" data-ref="_M/MPACK_STRINGIFY_IMPL">MPACK_STRINGIFY_IMPL</dfn>(arg) #arg</u></td></tr>
<tr><th id="1159">1159</th><td><u>#define <dfn class="macro" id="_M/MPACK_STRINGIFY" data-ref="_M/MPACK_STRINGIFY">MPACK_STRINGIFY</dfn>(arg) MPACK_STRINGIFY_IMPL(arg)</u></td></tr>
<tr><th id="1160">1160</th><td></td></tr>
<tr><th id="1161">1161</th><td><i>// This is a workaround for MSVC's incorrect expansion of __VA_ARGS__. It</i></td></tr>
<tr><th id="1162">1162</th><td><i>// treats __VA_ARGS__ as a single preprocessor token when passed in the</i></td></tr>
<tr><th id="1163">1163</th><td><i>// argument list of another macro unless we use an outer wrapper to expand it</i></td></tr>
<tr><th id="1164">1164</th><td><i>// lexically first. (For safety/consistency we use this in all variadic macros</i></td></tr>
<tr><th id="1165">1165</th><td><i>// that don't ignore the variadic arguments regardless of whether __VA_ARGS__</i></td></tr>
<tr><th id="1166">1166</th><td><i>// is passed to another macro.)</i></td></tr>
<tr><th id="1167">1167</th><td><i>//     <a href="https://stackoverflow.com/a/32400131">https://stackoverflow.com/a/32400131</a></i></td></tr>
<tr><th id="1168">1168</th><td><u>#define <dfn class="macro" id="_M/MPACK_EXPAND" data-ref="_M/MPACK_EXPAND">MPACK_EXPAND</dfn>(x) x</u></td></tr>
<tr><th id="1169">1169</th><td></td></tr>
<tr><th id="1170">1170</th><td><i>// Extracts the first argument of a variadic macro list, where there might only</i></td></tr>
<tr><th id="1171">1171</th><td><i>// be one argument.</i></td></tr>
<tr><th id="1172">1172</th><td><u>#define <dfn class="macro" id="_M/MPACK_EXTRACT_ARG0_IMPL" data-ref="_M/MPACK_EXTRACT_ARG0_IMPL">MPACK_EXTRACT_ARG0_IMPL</dfn>(first, ...) first</u></td></tr>
<tr><th id="1173">1173</th><td><u>#define <dfn class="macro" id="_M/MPACK_EXTRACT_ARG0" data-ref="_M/MPACK_EXTRACT_ARG0">MPACK_EXTRACT_ARG0</dfn>(...) MPACK_EXPAND(MPACK_EXTRACT_ARG0_IMPL( __VA_ARGS__ , ignored))</u></td></tr>
<tr><th id="1174">1174</th><td></td></tr>
<tr><th id="1175">1175</th><td><i>// Stringifies the first argument of a variadic macro list, where there might</i></td></tr>
<tr><th id="1176">1176</th><td><i>// only be one argument.</i></td></tr>
<tr><th id="1177">1177</th><td><u>#define <dfn class="macro" id="_M/MPACK_STRINGIFY_ARG0_impl" data-ref="_M/MPACK_STRINGIFY_ARG0_impl">MPACK_STRINGIFY_ARG0_impl</dfn>(first, ...) #first</u></td></tr>
<tr><th id="1178">1178</th><td><u>#define <dfn class="macro" id="_M/MPACK_STRINGIFY_ARG0" data-ref="_M/MPACK_STRINGIFY_ARG0">MPACK_STRINGIFY_ARG0</dfn>(...) MPACK_EXPAND(MPACK_STRINGIFY_ARG0_impl( __VA_ARGS__ , ignored))</u></td></tr>
<tr><th id="1179">1179</th><td></td></tr>
<tr><th id="1180">1180</th><td></td></tr>
<tr><th id="1181">1181</th><td></td></tr>
<tr><th id="1182">1182</th><td><i>/*</i></td></tr>
<tr><th id="1183">1183</th><td><i> * Definition of inline macros.</i></td></tr>
<tr><th id="1184">1184</th><td><i> *</i></td></tr>
<tr><th id="1185">1185</th><td><i> * MPack does not use static inline in header files; only one non-inline definition</i></td></tr>
<tr><th id="1186">1186</th><td><i> * of each function should exist in the final build. This can reduce the binary size</i></td></tr>
<tr><th id="1187">1187</th><td><i> * in cases where the compiler cannot or chooses not to inline a function.</i></td></tr>
<tr><th id="1188">1188</th><td><i> * The addresses of functions should also compare equal across translation units</i></td></tr>
<tr><th id="1189">1189</th><td><i> * regardless of whether they are declared inline.</i></td></tr>
<tr><th id="1190">1190</th><td><i> *</i></td></tr>
<tr><th id="1191">1191</th><td><i> * The above requirements mean that the declaration and definition of non-trivial</i></td></tr>
<tr><th id="1192">1192</th><td><i> * inline functions must be separated so that the definitions will only</i></td></tr>
<tr><th id="1193">1193</th><td><i> * appear when necessary. In addition, three different linkage models need</i></td></tr>
<tr><th id="1194">1194</th><td><i> * to be supported:</i></td></tr>
<tr><th id="1195">1195</th><td><i> *</i></td></tr>
<tr><th id="1196">1196</th><td><i> *  - The C99 model, where a standalone function is emitted only if there is any</i></td></tr>
<tr><th id="1197">1197</th><td><i> *    `extern inline` or non-`inline` declaration (including the definition itself)</i></td></tr>
<tr><th id="1198">1198</th><td><i> *</i></td></tr>
<tr><th id="1199">1199</th><td><i> *  - The GNU model, where an `inline` definition emits a standalone function and an</i></td></tr>
<tr><th id="1200">1200</th><td><i> *    `extern inline` definition does not, regardless of other declarations</i></td></tr>
<tr><th id="1201">1201</th><td><i> *</i></td></tr>
<tr><th id="1202">1202</th><td><i> *  - The C++ model, where `inline` emits a standalone function with special</i></td></tr>
<tr><th id="1203">1203</th><td><i> *    (COMDAT) linkage</i></td></tr>
<tr><th id="1204">1204</th><td><i> *</i></td></tr>
<tr><th id="1205">1205</th><td><i> * The macros below wrap up everything above. All inline functions defined in header</i></td></tr>
<tr><th id="1206">1206</th><td><i> * files have a single non-inline definition emitted in the compilation of</i></td></tr>
<tr><th id="1207">1207</th><td><i> * mpack-platform.c. All inline declarations and definitions use the same MPACK_INLINE</i></td></tr>
<tr><th id="1208">1208</th><td><i> * specification to simplify the rules on when standalone functions are emitted.</i></td></tr>
<tr><th id="1209">1209</th><td><i> * Inline functions in source files are defined MPACK_STATIC_INLINE.</i></td></tr>
<tr><th id="1210">1210</th><td><i> *</i></td></tr>
<tr><th id="1211">1211</th><td><i> * Additional reading:</i></td></tr>
<tr><th id="1212">1212</th><td><i> *     <a href="http://www.greenend.org.uk/rjk/tech/inline.html">http://www.greenend.org.uk/rjk/tech/inline.html</a></i></td></tr>
<tr><th id="1213">1213</th><td><i> */</i></td></tr>
<tr><th id="1214">1214</th><td></td></tr>
<tr><th id="1215">1215</th><td><u>#<span data-ppcond="1215">if</span> defined(<span class="macro" data-ref="_M/__cplusplus">__cplusplus</span>)</u></td></tr>
<tr><th id="1216">1216</th><td>    <i>// C++ rules</i></td></tr>
<tr><th id="1217">1217</th><td><i>    // The linker will need COMDAT support to link C++ object files,</i></td></tr>
<tr><th id="1218">1218</th><td><i>    // so we don't need to worry about emitting definitions from C++</i></td></tr>
<tr><th id="1219">1219</th><td><i>    // translation units. If mpack-platform.c (or the amalgamation)</i></td></tr>
<tr><th id="1220">1220</th><td><i>    // is compiled as C, its definition will be used, otherwise a</i></td></tr>
<tr><th id="1221">1221</th><td><i>    // C++ definition will be used, and no other C files will emit</i></td></tr>
<tr><th id="1222">1222</th><td><i>    // a definition.</i></td></tr>
<tr><th id="1223">1223</th><td>    <u>#define MPACK_INLINE inline</u></td></tr>
<tr><th id="1224">1224</th><td></td></tr>
<tr><th id="1225">1225</th><td><u>#<span data-ppcond="1215">elif</span> defined(<span class="macro" data-ref="_M/_MSC_VER">_MSC_VER</span>)</u></td></tr>
<tr><th id="1226">1226</th><td>    <i>// MSVC 2013 always uses COMDAT linkage, but it doesn't treat 'inline' as a</i></td></tr>
<tr><th id="1227">1227</th><td><i>    // keyword in C99 mode. (This appears to be fixed in a later version of</i></td></tr>
<tr><th id="1228">1228</th><td><i>    // MSVC but we don't bother detecting it.)</i></td></tr>
<tr><th id="1229">1229</th><td>    <u>#define MPACK_INLINE __inline</u></td></tr>
<tr><th id="1230">1230</th><td>    <u>#define MPACK_STATIC_INLINE static __inline</u></td></tr>
<tr><th id="1231">1231</th><td></td></tr>
<tr><th id="1232">1232</th><td><u>#<span data-ppcond="1215">elif</span> defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>) &amp;&amp; (defined(<span class="macro" data-ref="_M/__GNUC_GNU_INLINE__">__GNUC_GNU_INLINE__</span>) || \</u></td></tr>
<tr><th id="1233">1233</th><td><u>        (!defined(<span class="macro" data-ref="_M/__GNUC_STDC_INLINE__">__GNUC_STDC_INLINE__</span>) &amp;&amp; !defined(<span class="macro" data-ref="_M/__GNUC_GNU_INLINE__">__GNUC_GNU_INLINE__</span>)))</u></td></tr>
<tr><th id="1234">1234</th><td>    <i>// GNU rules</i></td></tr>
<tr><th id="1235">1235</th><td>    <u>#if MPACK_EMIT_INLINE_DEFS</u></td></tr>
<tr><th id="1236">1236</th><td>        <u>#define MPACK_INLINE inline</u></td></tr>
<tr><th id="1237">1237</th><td>    <u>#else</u></td></tr>
<tr><th id="1238">1238</th><td>        <u>#define MPACK_INLINE extern inline</u></td></tr>
<tr><th id="1239">1239</th><td>    <u>#endif</u></td></tr>
<tr><th id="1240">1240</th><td></td></tr>
<tr><th id="1241">1241</th><td><u>#<span data-ppcond="1215">elif</span> defined(<span class="macro" data-ref="_M/__TINYC__">__TINYC__</span>)</u></td></tr>
<tr><th id="1242">1242</th><td>    <i>// tcc ignores the inline keyword, so we have to use static inline. We</i></td></tr>
<tr><th id="1243">1243</th><td><i>    // issue a warning to make sure you are aware. You can define the below</i></td></tr>
<tr><th id="1244">1244</th><td><i>    // macro to disable the warning. Hopefully this will be fixed soon:</i></td></tr>
<tr><th id="1245">1245</th><td><i>    //     <a href="https://lists.nongnu.org/archive/html/tinycc-devel/2019-06/msg00000.html">https://lists.nongnu.org/archive/html/tinycc-devel/2019-06/msg00000.html</a></i></td></tr>
<tr><th id="1246">1246</th><td>    <u>#ifndef MPACK_DISABLE_TINYC_INLINE_WARNING</u></td></tr>
<tr><th id="1247">1247</th><td>        <u>#warning "Single-definition inline is not supported by tcc. All inlines will be static. Define MPACK_DISABLE_TINYC_INLINE_WARNING to disable this warning."</u></td></tr>
<tr><th id="1248">1248</th><td>    <u>#endif</u></td></tr>
<tr><th id="1249">1249</th><td>    <u>#define MPACK_INLINE static inline</u></td></tr>
<tr><th id="1250">1250</th><td></td></tr>
<tr><th id="1251">1251</th><td><u>#<span data-ppcond="1215">else</span></u></td></tr>
<tr><th id="1252">1252</th><td>    <i>// C99 rules</i></td></tr>
<tr><th id="1253">1253</th><td>    <u>#<span data-ppcond="1253">if</span> <a class="macro" href="#927" title="0" data-ref="_M/MPACK_EMIT_INLINE_DEFS">MPACK_EMIT_INLINE_DEFS</a></u></td></tr>
<tr><th id="1254">1254</th><td>        <u>#define MPACK_INLINE extern inline</u></td></tr>
<tr><th id="1255">1255</th><td>    <u>#<span data-ppcond="1253">else</span></u></td></tr>
<tr><th id="1256">1256</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_INLINE" data-ref="_M/MPACK_INLINE">MPACK_INLINE</dfn> inline</u></td></tr>
<tr><th id="1257">1257</th><td>    <u>#<span data-ppcond="1253">endif</span></u></td></tr>
<tr><th id="1258">1258</th><td><u>#<span data-ppcond="1215">endif</span></u></td></tr>
<tr><th id="1259">1259</th><td></td></tr>
<tr><th id="1260">1260</th><td><u>#<span data-ppcond="1260">ifndef</span> <span class="macro" data-ref="_M/MPACK_STATIC_INLINE">MPACK_STATIC_INLINE</span></u></td></tr>
<tr><th id="1261">1261</th><td><u>#define <dfn class="macro" id="_M/MPACK_STATIC_INLINE" data-ref="_M/MPACK_STATIC_INLINE">MPACK_STATIC_INLINE</dfn> static inline</u></td></tr>
<tr><th id="1262">1262</th><td><u>#<span data-ppcond="1260">endif</span></u></td></tr>
<tr><th id="1263">1263</th><td></td></tr>
<tr><th id="1264">1264</th><td><u>#<span data-ppcond="1264">ifdef</span> <span class="macro" data-ref="_M/MPACK_OPTIMIZE_FOR_SPEED">MPACK_OPTIMIZE_FOR_SPEED</span></u></td></tr>
<tr><th id="1265">1265</th><td>    <u>#error "You should define MPACK_OPTIMIZE_FOR_SIZE, not MPACK_OPTIMIZE_FOR_SPEED."</u></td></tr>
<tr><th id="1266">1266</th><td><u>#<span data-ppcond="1264">endif</span></u></td></tr>
<tr><th id="1267">1267</th><td></td></tr>
<tr><th id="1268">1268</th><td></td></tr>
<tr><th id="1269">1269</th><td></td></tr>
<tr><th id="1270">1270</th><td><i>/*</i></td></tr>
<tr><th id="1271">1271</th><td><i> * Prevent inlining</i></td></tr>
<tr><th id="1272">1272</th><td><i> *</i></td></tr>
<tr><th id="1273">1273</th><td><i> * When a function is only used once, it is almost always inlined</i></td></tr>
<tr><th id="1274">1274</th><td><i> * automatically. This can cause poor instruction cache usage because a</i></td></tr>
<tr><th id="1275">1275</th><td><i> * function that should rarely be called (such as buffer exhaustion handling)</i></td></tr>
<tr><th id="1276">1276</th><td><i> * will get inlined into the middle of a hot code path.</i></td></tr>
<tr><th id="1277">1277</th><td><i> */</i></td></tr>
<tr><th id="1278">1278</th><td></td></tr>
<tr><th id="1279">1279</th><td><u>#<span data-ppcond="1279">if</span> !<a class="macro" href="#135" title="0" data-ref="_M/MPACK_NO_BUILTINS">MPACK_NO_BUILTINS</a></u></td></tr>
<tr><th id="1280">1280</th><td>    <u>#<span data-ppcond="1280">if</span> defined(<span class="macro" data-ref="_M/_MSC_VER">_MSC_VER</span>)</u></td></tr>
<tr><th id="1281">1281</th><td>        <u>#define MPACK_NOINLINE __declspec(noinline)</u></td></tr>
<tr><th id="1282">1282</th><td>    <u>#<span data-ppcond="1280">elif</span> defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>) || defined(<span class="macro" data-ref="_M/__clang__">__clang__</span>)</u></td></tr>
<tr><th id="1283">1283</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_NOINLINE" data-ref="_M/MPACK_NOINLINE">MPACK_NOINLINE</dfn> __attribute__((__noinline__))</u></td></tr>
<tr><th id="1284">1284</th><td>    <u>#<span data-ppcond="1280">endif</span></u></td></tr>
<tr><th id="1285">1285</th><td><u>#<span data-ppcond="1279">endif</span></u></td></tr>
<tr><th id="1286">1286</th><td><u>#<span data-ppcond="1286">ifndef</span> <a class="macro" href="#1283" data-ref="_M/MPACK_NOINLINE">MPACK_NOINLINE</a></u></td></tr>
<tr><th id="1287">1287</th><td>    <u>#define MPACK_NOINLINE /* nothing */</u></td></tr>
<tr><th id="1288">1288</th><td><u>#<span data-ppcond="1286">endif</span></u></td></tr>
<tr><th id="1289">1289</th><td></td></tr>
<tr><th id="1290">1290</th><td></td></tr>
<tr><th id="1291">1291</th><td></td></tr>
<tr><th id="1292">1292</th><td><i>/* restrict */</i></td></tr>
<tr><th id="1293">1293</th><td><i></i></td></tr>
<tr><th id="1294">1294</th><td><i>// We prefer the builtins even though e.g. MSVC's __restrict may not have</i></td></tr>
<tr><th id="1295">1295</th><td><i>// exactly the same behaviour as the proper C99 restrict keyword because the</i></td></tr>
<tr><th id="1296">1296</th><td><i>// builtins work in C++, so using the same keyword in both C and C++ prevents</i></td></tr>
<tr><th id="1297">1297</th><td><i>// any incompatibilities when using MPack compiled as C in C++ code.</i></td></tr>
<tr><th id="1298">1298</th><td><u>#<span data-ppcond="1298">if</span> !<a class="macro" href="#135" title="0" data-ref="_M/MPACK_NO_BUILTINS">MPACK_NO_BUILTINS</a></u></td></tr>
<tr><th id="1299">1299</th><td>    <u>#<span data-ppcond="1299">if</span> defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>)</u></td></tr>
<tr><th id="1300">1300</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_RESTRICT" data-ref="_M/MPACK_RESTRICT">MPACK_RESTRICT</dfn> __restrict__</u></td></tr>
<tr><th id="1301">1301</th><td>    <u>#<span data-ppcond="1299">elif</span> defined(_MSC_VER)</u></td></tr>
<tr><th id="1302">1302</th><td>        <u>#define MPACK_RESTRICT __restrict</u></td></tr>
<tr><th id="1303">1303</th><td>    <u>#<span data-ppcond="1299">endif</span></u></td></tr>
<tr><th id="1304">1304</th><td><u>#<span data-ppcond="1298">endif</span></u></td></tr>
<tr><th id="1305">1305</th><td></td></tr>
<tr><th id="1306">1306</th><td><u>#<span data-ppcond="1306">ifndef</span> <a class="macro" href="#1300" data-ref="_M/MPACK_RESTRICT">MPACK_RESTRICT</a></u></td></tr>
<tr><th id="1307">1307</th><td>    <u>#ifdef __cplusplus</u></td></tr>
<tr><th id="1308">1308</th><td>        <u>#define MPACK_RESTRICT /* nothing, unavailable in C++ */</u></td></tr>
<tr><th id="1309">1309</th><td>    <u>#endif</u></td></tr>
<tr><th id="1310">1310</th><td><u>#<span data-ppcond="1306">endif</span></u></td></tr>
<tr><th id="1311">1311</th><td></td></tr>
<tr><th id="1312">1312</th><td><u>#<span data-ppcond="1312">ifndef</span> <a class="macro" href="#1300" data-ref="_M/MPACK_RESTRICT">MPACK_RESTRICT</a></u></td></tr>
<tr><th id="1313">1313</th><td>    <u>#ifdef _MSC_VER</u></td></tr>
<tr><th id="1314">1314</th><td>        <i>// MSVC 2015 apparently doesn't properly support the restrict keyword</i></td></tr>
<tr><th id="1315">1315</th><td><i>        // in C. We're using builtins above which do work on 2015, but when</i></td></tr>
<tr><th id="1316">1316</th><td><i>        // MPACK_NO_BUILTINS is enabled we can't use it.</i></td></tr>
<tr><th id="1317">1317</th><td>        <u>#if _MSC_VER &lt; 1910</u></td></tr>
<tr><th id="1318">1318</th><td>            <u>#define MPACK_RESTRICT /*nothing*/</u></td></tr>
<tr><th id="1319">1319</th><td>        <u>#endif</u></td></tr>
<tr><th id="1320">1320</th><td>    <u>#endif</u></td></tr>
<tr><th id="1321">1321</th><td><u>#<span data-ppcond="1312">endif</span></u></td></tr>
<tr><th id="1322">1322</th><td></td></tr>
<tr><th id="1323">1323</th><td><u>#<span data-ppcond="1323">ifndef</span> <a class="macro" href="#1300" data-ref="_M/MPACK_RESTRICT">MPACK_RESTRICT</a></u></td></tr>
<tr><th id="1324">1324</th><td>    <u>#define MPACK_RESTRICT restrict /* required in C99 */</u></td></tr>
<tr><th id="1325">1325</th><td><u>#<span data-ppcond="1323">endif</span></u></td></tr>
<tr><th id="1326">1326</th><td></td></tr>
<tr><th id="1327">1327</th><td></td></tr>
<tr><th id="1328">1328</th><td></td></tr>
<tr><th id="1329">1329</th><td><i>/* Some compiler-specific keywords and builtins */</i></td></tr>
<tr><th id="1330">1330</th><td></td></tr>
<tr><th id="1331">1331</th><td><u>#<span data-ppcond="1331">if</span> !<a class="macro" href="#135" title="0" data-ref="_M/MPACK_NO_BUILTINS">MPACK_NO_BUILTINS</a></u></td></tr>
<tr><th id="1332">1332</th><td>    <u>#<span data-ppcond="1332">if</span> defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>) || defined(<span class="macro" data-ref="_M/__clang__">__clang__</span>)</u></td></tr>
<tr><th id="1333">1333</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_UNREACHABLE" data-ref="_M/MPACK_UNREACHABLE">MPACK_UNREACHABLE</dfn> __builtin_unreachable()</u></td></tr>
<tr><th id="1334">1334</th><td>        <u>#define <dfn class="macro" id="_M/MPACK_NORETURN" data-ref="_M/MPACK_NORETURN">MPACK_NORETURN</dfn>(fn) fn __attribute__((__noreturn__))</u></td></tr>
<tr><th id="1335">1335</th><td>    <u>#<span data-ppcond="1332">elif</span> defined(_MSC_VER)</u></td></tr>
<tr><th id="1336">1336</th><td>        <u>#define MPACK_UNREACHABLE __assume(0)</u></td></tr>
<tr><th id="1337">1337</th><td>        <u>#define MPACK_NORETURN(fn) __declspec(noreturn) fn</u></td></tr>
<tr><th id="1338">1338</th><td>    <u>#<span data-ppcond="1332">endif</span></u></td></tr>
<tr><th id="1339">1339</th><td><u>#<span data-ppcond="1331">endif</span></u></td></tr>
<tr><th id="1340">1340</th><td></td></tr>
<tr><th id="1341">1341</th><td><u>#<span data-ppcond="1341">ifndef</span> <a class="macro" href="#1333" data-ref="_M/MPACK_UNREACHABLE">MPACK_UNREACHABLE</a></u></td></tr>
<tr><th id="1342">1342</th><td><u>#define MPACK_UNREACHABLE ((void)0)</u></td></tr>
<tr><th id="1343">1343</th><td><u>#<span data-ppcond="1341">endif</span></u></td></tr>
<tr><th id="1344">1344</th><td><u>#<span data-ppcond="1344">ifndef</span> <a class="macro" href="#1334" data-ref="_M/MPACK_NORETURN">MPACK_NORETURN</a></u></td></tr>
<tr><th id="1345">1345</th><td><u>#define MPACK_NORETURN(fn) fn</u></td></tr>
<tr><th id="1346">1346</th><td><u>#<span data-ppcond="1344">endif</span></u></td></tr>
<tr><th id="1347">1347</th><td></td></tr>
<tr><th id="1348">1348</th><td></td></tr>
<tr><th id="1349">1349</th><td></td></tr>
<tr><th id="1350">1350</th><td><i>/*</i></td></tr>
<tr><th id="1351">1351</th><td><i> * Likely/unlikely</i></td></tr>
<tr><th id="1352">1352</th><td><i> *</i></td></tr>
<tr><th id="1353">1353</th><td><i> * These should only really be used when a branch is taken (or not taken) less</i></td></tr>
<tr><th id="1354">1354</th><td><i> * than 1/1000th of the time. Buffer flush checks when writing very small</i></td></tr>
<tr><th id="1355">1355</th><td><i> * elements are a good example.</i></td></tr>
<tr><th id="1356">1356</th><td><i> */</i></td></tr>
<tr><th id="1357">1357</th><td></td></tr>
<tr><th id="1358">1358</th><td><u>#<span data-ppcond="1358">if</span> !<a class="macro" href="#135" title="0" data-ref="_M/MPACK_NO_BUILTINS">MPACK_NO_BUILTINS</a></u></td></tr>
<tr><th id="1359">1359</th><td>    <u>#<span data-ppcond="1359">if</span> defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>) || defined(<span class="macro" data-ref="_M/__clang__">__clang__</span>)</u></td></tr>
<tr><th id="1360">1360</th><td>        <u>#<span data-ppcond="1360">ifndef</span> <span class="macro" data-ref="_M/MPACK_LIKELY">MPACK_LIKELY</span></u></td></tr>
<tr><th id="1361">1361</th><td>            <u>#define <dfn class="macro" id="_M/MPACK_LIKELY" data-ref="_M/MPACK_LIKELY">MPACK_LIKELY</dfn>(x) __builtin_expect((x),1)</u></td></tr>
<tr><th id="1362">1362</th><td>        <u>#<span data-ppcond="1360">endif</span></u></td></tr>
<tr><th id="1363">1363</th><td>        <u>#<span data-ppcond="1363">ifndef</span> <span class="macro" data-ref="_M/MPACK_UNLIKELY">MPACK_UNLIKELY</span></u></td></tr>
<tr><th id="1364">1364</th><td>            <u>#define <dfn class="macro" id="_M/MPACK_UNLIKELY" data-ref="_M/MPACK_UNLIKELY">MPACK_UNLIKELY</dfn>(x) __builtin_expect((x),0)</u></td></tr>
<tr><th id="1365">1365</th><td>        <u>#<span data-ppcond="1363">endif</span></u></td></tr>
<tr><th id="1366">1366</th><td>    <u>#<span data-ppcond="1359">endif</span></u></td></tr>
<tr><th id="1367">1367</th><td><u>#<span data-ppcond="1358">endif</span></u></td></tr>
<tr><th id="1368">1368</th><td></td></tr>
<tr><th id="1369">1369</th><td><u>#<span data-ppcond="1369">ifndef</span> <a class="macro" href="#1361" data-ref="_M/MPACK_LIKELY">MPACK_LIKELY</a></u></td></tr>
<tr><th id="1370">1370</th><td>    <u>#define MPACK_LIKELY(x) (x)</u></td></tr>
<tr><th id="1371">1371</th><td><u>#<span data-ppcond="1369">endif</span></u></td></tr>
<tr><th id="1372">1372</th><td><u>#<span data-ppcond="1372">ifndef</span> <a class="macro" href="#1364" data-ref="_M/MPACK_UNLIKELY">MPACK_UNLIKELY</a></u></td></tr>
<tr><th id="1373">1373</th><td>    <u>#define MPACK_UNLIKELY(x) (x)</u></td></tr>
<tr><th id="1374">1374</th><td><u>#<span data-ppcond="1372">endif</span></u></td></tr>
<tr><th id="1375">1375</th><td></td></tr>
<tr><th id="1376">1376</th><td></td></tr>
<tr><th id="1377">1377</th><td></td></tr>
<tr><th id="1378">1378</th><td><i>/* alignof */</i></td></tr>
<tr><th id="1379">1379</th><td></td></tr>
<tr><th id="1380">1380</th><td><u>#<span data-ppcond="1380">ifndef</span> <span class="macro" data-ref="_M/MPACK_ALIGNOF">MPACK_ALIGNOF</span></u></td></tr>
<tr><th id="1381">1381</th><td>    <u>#<span data-ppcond="1381">if</span> defined(<span class="macro" data-ref="_M/__STDC_VERSION__">__STDC_VERSION__</span>)</u></td></tr>
<tr><th id="1382">1382</th><td>        <u>#<span data-ppcond="1382">if</span> <span class="macro" title="201112L" data-ref="_M/__STDC_VERSION__">__STDC_VERSION__</span> &gt;= 201112L</u></td></tr>
<tr><th id="1383">1383</th><td>            <u>#define <dfn class="macro" id="_M/MPACK_ALIGNOF" data-ref="_M/MPACK_ALIGNOF">MPACK_ALIGNOF</dfn>(T) (_Alignof(T))</u></td></tr>
<tr><th id="1384">1384</th><td>        <u>#<span data-ppcond="1382">endif</span></u></td></tr>
<tr><th id="1385">1385</th><td>    <u>#<span data-ppcond="1381">endif</span></u></td></tr>
<tr><th id="1386">1386</th><td><u>#<span data-ppcond="1380">endif</span></u></td></tr>
<tr><th id="1387">1387</th><td></td></tr>
<tr><th id="1388">1388</th><td><u>#<span data-ppcond="1388">ifndef</span> <a class="macro" href="#1383" data-ref="_M/MPACK_ALIGNOF">MPACK_ALIGNOF</a></u></td></tr>
<tr><th id="1389">1389</th><td>    <u>#if defined(__cplusplus)</u></td></tr>
<tr><th id="1390">1390</th><td>        <u>#if __cplusplus &gt;= 201103L</u></td></tr>
<tr><th id="1391">1391</th><td>            <u>#define MPACK_ALIGNOF(T) (alignof(T))</u></td></tr>
<tr><th id="1392">1392</th><td>        <u>#endif</u></td></tr>
<tr><th id="1393">1393</th><td>    <u>#endif</u></td></tr>
<tr><th id="1394">1394</th><td><u>#<span data-ppcond="1388">endif</span></u></td></tr>
<tr><th id="1395">1395</th><td></td></tr>
<tr><th id="1396">1396</th><td><u>#<span data-ppcond="1396">ifndef</span> <a class="macro" href="#1383" data-ref="_M/MPACK_ALIGNOF">MPACK_ALIGNOF</a></u></td></tr>
<tr><th id="1397">1397</th><td>    <u>#if defined(__GNUC__) &amp;&amp; !defined(MPACK_NO_BUILTINS)</u></td></tr>
<tr><th id="1398">1398</th><td>        <u>#if defined(__clang__) || __GNUC__ &gt;= 4</u></td></tr>
<tr><th id="1399">1399</th><td>            <u>#define MPACK_ALIGNOF(T) (__alignof__(T))</u></td></tr>
<tr><th id="1400">1400</th><td>        <u>#endif</u></td></tr>
<tr><th id="1401">1401</th><td>    <u>#endif</u></td></tr>
<tr><th id="1402">1402</th><td><u>#<span data-ppcond="1396">endif</span></u></td></tr>
<tr><th id="1403">1403</th><td></td></tr>
<tr><th id="1404">1404</th><td><u>#<span data-ppcond="1404">ifndef</span> <a class="macro" href="#1383" data-ref="_M/MPACK_ALIGNOF">MPACK_ALIGNOF</a></u></td></tr>
<tr><th id="1405">1405</th><td>    <u>#ifdef _MSC_VER</u></td></tr>
<tr><th id="1406">1406</th><td>        <u>#define MPACK_ALIGNOF(T) __alignof(T)</u></td></tr>
<tr><th id="1407">1407</th><td>    <u>#endif</u></td></tr>
<tr><th id="1408">1408</th><td><u>#<span data-ppcond="1404">endif</span></u></td></tr>
<tr><th id="1409">1409</th><td></td></tr>
<tr><th id="1410">1410</th><td><i>// MPACK_ALIGNOF may not exist, in which case a workaround is used.</i></td></tr>
<tr><th id="1411">1411</th><td></td></tr>
<tr><th id="1412">1412</th><td></td></tr>
<tr><th id="1413">1413</th><td></td></tr>
<tr><th id="1414">1414</th><td><i>/* Static assert */</i></td></tr>
<tr><th id="1415">1415</th><td></td></tr>
<tr><th id="1416">1416</th><td><u>#<span data-ppcond="1416">ifndef</span> <span class="macro" data-ref="_M/MPACK_STATIC_ASSERT">MPACK_STATIC_ASSERT</span></u></td></tr>
<tr><th id="1417">1417</th><td>    <u>#<span data-ppcond="1417">if</span> defined(<span class="macro" data-ref="_M/__cplusplus">__cplusplus</span>)</u></td></tr>
<tr><th id="1418">1418</th><td>        <u>#if __cplusplus &gt;= 201103L</u></td></tr>
<tr><th id="1419">1419</th><td>            <u>#define MPACK_STATIC_ASSERT static_assert</u></td></tr>
<tr><th id="1420">1420</th><td>        <u>#endif</u></td></tr>
<tr><th id="1421">1421</th><td>    <u>#<span data-ppcond="1417">elif</span> defined(<span class="macro" data-ref="_M/__STDC_VERSION__">__STDC_VERSION__</span>)</u></td></tr>
<tr><th id="1422">1422</th><td>        <u>#<span data-ppcond="1422">if</span> <span class="macro" title="201112L" data-ref="_M/__STDC_VERSION__">__STDC_VERSION__</span> &gt;= 201112L</u></td></tr>
<tr><th id="1423">1423</th><td>            <u>#define <dfn class="macro" id="_M/MPACK_STATIC_ASSERT" data-ref="_M/MPACK_STATIC_ASSERT">MPACK_STATIC_ASSERT</dfn> _Static_assert</u></td></tr>
<tr><th id="1424">1424</th><td>        <u>#<span data-ppcond="1422">endif</span></u></td></tr>
<tr><th id="1425">1425</th><td>    <u>#<span data-ppcond="1417">endif</span></u></td></tr>
<tr><th id="1426">1426</th><td><u>#<span data-ppcond="1416">endif</span></u></td></tr>
<tr><th id="1427">1427</th><td></td></tr>
<tr><th id="1428">1428</th><td><u>#<span data-ppcond="1428">if</span> !<a class="macro" href="#135" title="0" data-ref="_M/MPACK_NO_BUILTINS">MPACK_NO_BUILTINS</a></u></td></tr>
<tr><th id="1429">1429</th><td>    <u>#<span data-ppcond="1429">ifndef</span> <a class="macro" href="#1423" data-ref="_M/MPACK_STATIC_ASSERT">MPACK_STATIC_ASSERT</a></u></td></tr>
<tr><th id="1430">1430</th><td>        <u>#if defined(__has_feature)</u></td></tr>
<tr><th id="1431">1431</th><td>            <u>#if __has_feature(cxx_static_assert)</u></td></tr>
<tr><th id="1432">1432</th><td>                <u>#define MPACK_STATIC_ASSERT static_assert</u></td></tr>
<tr><th id="1433">1433</th><td>            <u>#elif __has_feature(c_static_assert)</u></td></tr>
<tr><th id="1434">1434</th><td>                <u>#define MPACK_STATIC_ASSERT _Static_assert</u></td></tr>
<tr><th id="1435">1435</th><td>            <u>#endif</u></td></tr>
<tr><th id="1436">1436</th><td>        <u>#endif</u></td></tr>
<tr><th id="1437">1437</th><td>    <u>#<span data-ppcond="1429">endif</span></u></td></tr>
<tr><th id="1438">1438</th><td></td></tr>
<tr><th id="1439">1439</th><td>    <u>#<span data-ppcond="1439">ifndef</span> <a class="macro" href="#1423" data-ref="_M/MPACK_STATIC_ASSERT">MPACK_STATIC_ASSERT</a></u></td></tr>
<tr><th id="1440">1440</th><td>        <u>#if defined(__GNUC__)</u></td></tr>
<tr><th id="1441">1441</th><td>            <i>/* Diagnostic push is not supported before GCC 4.6. */</i></td></tr>
<tr><th id="1442">1442</th><td>            <u>#if defined(__clang__) || __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 6)</u></td></tr>
<tr><th id="1443">1443</th><td>                <u>#ifndef __cplusplus</u></td></tr>
<tr><th id="1444">1444</th><td>                    <u>#if defined(__clang__) || __GNUC__ &gt;= 5</u></td></tr>
<tr><th id="1445">1445</th><td>                    <u>#define MPACK_IGNORE_PEDANTIC "GCC diagnostic ignored \"-Wpedantic\""</u></td></tr>
<tr><th id="1446">1446</th><td>                    <u>#else</u></td></tr>
<tr><th id="1447">1447</th><td>                    <u>#define MPACK_IGNORE_PEDANTIC "GCC diagnostic ignored \"-pedantic\""</u></td></tr>
<tr><th id="1448">1448</th><td>                    <u>#endif</u></td></tr>
<tr><th id="1449">1449</th><td>                    <u>#define MPACK_STATIC_ASSERT(expr, str) do { \</u></td></tr>
<tr><th id="1450">1450</th><td><u>                        _Pragma ("GCC diagnostic push") \</u></td></tr>
<tr><th id="1451">1451</th><td><u>                        _Pragma (MPACK_IGNORE_PEDANTIC) \</u></td></tr>
<tr><th id="1452">1452</th><td><u>                        _Pragma ("GCC diagnostic ignored \"-Wc++-compat\"") \</u></td></tr>
<tr><th id="1453">1453</th><td><u>                        _Static_assert(expr, str); \</u></td></tr>
<tr><th id="1454">1454</th><td><u>                        _Pragma ("GCC diagnostic pop") \</u></td></tr>
<tr><th id="1455">1455</th><td><u>                    } while (0)</u></td></tr>
<tr><th id="1456">1456</th><td>                <u>#endif</u></td></tr>
<tr><th id="1457">1457</th><td>            <u>#endif</u></td></tr>
<tr><th id="1458">1458</th><td>        <u>#endif</u></td></tr>
<tr><th id="1459">1459</th><td>    <u>#<span data-ppcond="1439">endif</span></u></td></tr>
<tr><th id="1460">1460</th><td></td></tr>
<tr><th id="1461">1461</th><td>    <u>#<span data-ppcond="1461">ifndef</span> <a class="macro" href="#1423" data-ref="_M/MPACK_STATIC_ASSERT">MPACK_STATIC_ASSERT</a></u></td></tr>
<tr><th id="1462">1462</th><td>        <u>#ifdef _MSC_VER</u></td></tr>
<tr><th id="1463">1463</th><td>            <u>#if _MSC_VER &gt;= 1600</u></td></tr>
<tr><th id="1464">1464</th><td>                <u>#define MPACK_STATIC_ASSERT static_assert</u></td></tr>
<tr><th id="1465">1465</th><td>            <u>#endif</u></td></tr>
<tr><th id="1466">1466</th><td>        <u>#endif</u></td></tr>
<tr><th id="1467">1467</th><td>    <u>#<span data-ppcond="1461">endif</span></u></td></tr>
<tr><th id="1468">1468</th><td><u>#<span data-ppcond="1428">endif</span></u></td></tr>
<tr><th id="1469">1469</th><td></td></tr>
<tr><th id="1470">1470</th><td><u>#<span data-ppcond="1470">ifndef</span> <a class="macro" href="#1423" data-ref="_M/MPACK_STATIC_ASSERT">MPACK_STATIC_ASSERT</a></u></td></tr>
<tr><th id="1471">1471</th><td>    <u>#define MPACK_STATIC_ASSERT(expr, str) (MPACK_UNUSED(sizeof(char[1 - 2*!(expr)])))</u></td></tr>
<tr><th id="1472">1472</th><td><u>#<span data-ppcond="1470">endif</span></u></td></tr>
<tr><th id="1473">1473</th><td></td></tr>
<tr><th id="1474">1474</th><td></td></tr>
<tr><th id="1475">1475</th><td></td></tr>
<tr><th id="1476">1476</th><td><i>/* _Generic */</i></td></tr>
<tr><th id="1477">1477</th><td></td></tr>
<tr><th id="1478">1478</th><td><u>#<span data-ppcond="1478">ifndef</span> <span class="macro" data-ref="_M/MPACK_HAS_GENERIC">MPACK_HAS_GENERIC</span></u></td></tr>
<tr><th id="1479">1479</th><td>    <u>#<span data-ppcond="1479">if</span> defined(<span class="macro" data-ref="_M/__clang__">__clang__</span>) &amp;&amp; defined(<span class="macro" data-ref="_M/__has_feature">__has_feature</span>)</u></td></tr>
<tr><th id="1480">1480</th><td>        <i>// With Clang we can test for _Generic support directly</i></td></tr>
<tr><th id="1481">1481</th><td><i>        // and ignore C/C++ version</i></td></tr>
<tr><th id="1482">1482</th><td>        <u>#<span data-ppcond="1482">if</span> <span class="macro" title="" data-ref="_M/__has_feature">__has_feature</span>(c_generic_selections)</u></td></tr>
<tr><th id="1483">1483</th><td>            <u>#define <dfn class="macro" id="_M/MPACK_HAS_GENERIC" data-ref="_M/MPACK_HAS_GENERIC">MPACK_HAS_GENERIC</dfn> 1</u></td></tr>
<tr><th id="1484">1484</th><td>        <u>#<span data-ppcond="1482">else</span></u></td></tr>
<tr><th id="1485">1485</th><td>            <u>#define MPACK_HAS_GENERIC 0</u></td></tr>
<tr><th id="1486">1486</th><td>        <u>#<span data-ppcond="1482">endif</span></u></td></tr>
<tr><th id="1487">1487</th><td>    <u>#<span data-ppcond="1479">endif</span></u></td></tr>
<tr><th id="1488">1488</th><td><u>#<span data-ppcond="1478">endif</span></u></td></tr>
<tr><th id="1489">1489</th><td></td></tr>
<tr><th id="1490">1490</th><td><u>#<span data-ppcond="1490">ifndef</span> <a class="macro" href="#1483" data-ref="_M/MPACK_HAS_GENERIC">MPACK_HAS_GENERIC</a></u></td></tr>
<tr><th id="1491">1491</th><td>    <u>#if defined(__STDC_VERSION__)</u></td></tr>
<tr><th id="1492">1492</th><td>        <u>#if __STDC_VERSION__ &gt;= 201112L</u></td></tr>
<tr><th id="1493">1493</th><td>            <u>#if defined(__GNUC__) &amp;&amp; !defined(__clang__)</u></td></tr>
<tr><th id="1494">1494</th><td>                <i>// GCC does not have full C11 support in GCC 4.7 and 4.8</i></td></tr>
<tr><th id="1495">1495</th><td>                <u>#if __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 9)</u></td></tr>
<tr><th id="1496">1496</th><td>                    <u>#define MPACK_HAS_GENERIC 1</u></td></tr>
<tr><th id="1497">1497</th><td>                <u>#endif</u></td></tr>
<tr><th id="1498">1498</th><td>            <u>#else</u></td></tr>
<tr><th id="1499">1499</th><td>                <i>// We hope other compilers aren't lying about C11/_Generic support</i></td></tr>
<tr><th id="1500">1500</th><td>                <u>#define MPACK_HAS_GENERIC 1</u></td></tr>
<tr><th id="1501">1501</th><td>            <u>#endif</u></td></tr>
<tr><th id="1502">1502</th><td>        <u>#endif</u></td></tr>
<tr><th id="1503">1503</th><td>    <u>#endif</u></td></tr>
<tr><th id="1504">1504</th><td><u>#<span data-ppcond="1490">endif</span></u></td></tr>
<tr><th id="1505">1505</th><td></td></tr>
<tr><th id="1506">1506</th><td><u>#<span data-ppcond="1506">ifndef</span> <a class="macro" href="#1483" data-ref="_M/MPACK_HAS_GENERIC">MPACK_HAS_GENERIC</a></u></td></tr>
<tr><th id="1507">1507</th><td>    <u>#define MPACK_HAS_GENERIC 0</u></td></tr>
<tr><th id="1508">1508</th><td><u>#<span data-ppcond="1506">endif</span></u></td></tr>
<tr><th id="1509">1509</th><td></td></tr>
<tr><th id="1510">1510</th><td></td></tr>
<tr><th id="1511">1511</th><td></td></tr>
<tr><th id="1512">1512</th><td><i>/*</i></td></tr>
<tr><th id="1513">1513</th><td><i> * Finite Math</i></td></tr>
<tr><th id="1514">1514</th><td><i> *</i></td></tr>
<tr><th id="1515">1515</th><td><i> * -ffinite-math-only, included in -ffast-math, breaks functions that</i></td></tr>
<tr><th id="1516">1516</th><td><i> * that check for non-finite real values such as isnan() and isinf().</i></td></tr>
<tr><th id="1517">1517</th><td><i> *</i></td></tr>
<tr><th id="1518">1518</th><td><i> * We should use this to trap errors when reading data that contains</i></td></tr>
<tr><th id="1519">1519</th><td><i> * non-finite reals. This isn't currently implemented.</i></td></tr>
<tr><th id="1520">1520</th><td><i> */</i></td></tr>
<tr><th id="1521">1521</th><td></td></tr>
<tr><th id="1522">1522</th><td><u>#<span data-ppcond="1522">ifndef</span> <span class="macro" data-ref="_M/MPACK_FINITE_MATH">MPACK_FINITE_MATH</span></u></td></tr>
<tr><th id="1523">1523</th><td><u>#<span data-ppcond="1523">if</span> defined(<span class="macro" data-ref="_M/__FINITE_MATH_ONLY__">__FINITE_MATH_ONLY__</span>) &amp;&amp; <span class="macro" title="0" data-ref="_M/__FINITE_MATH_ONLY__">__FINITE_MATH_ONLY__</span></u></td></tr>
<tr><th id="1524">1524</th><td><u>#define MPACK_FINITE_MATH 1</u></td></tr>
<tr><th id="1525">1525</th><td><u>#<span data-ppcond="1523">endif</span></u></td></tr>
<tr><th id="1526">1526</th><td><u>#<span data-ppcond="1522">endif</span></u></td></tr>
<tr><th id="1527">1527</th><td></td></tr>
<tr><th id="1528">1528</th><td><u>#<span data-ppcond="1528">ifndef</span> <span class="macro" data-ref="_M/MPACK_FINITE_MATH">MPACK_FINITE_MATH</span></u></td></tr>
<tr><th id="1529">1529</th><td><u>#define <dfn class="macro" id="_M/MPACK_FINITE_MATH" data-ref="_M/MPACK_FINITE_MATH">MPACK_FINITE_MATH</dfn> 0</u></td></tr>
<tr><th id="1530">1530</th><td><u>#<span data-ppcond="1528">endif</span></u></td></tr>
<tr><th id="1531">1531</th><td></td></tr>
<tr><th id="1532">1532</th><td></td></tr>
<tr><th id="1533">1533</th><td></td></tr>
<tr><th id="1534">1534</th><td><i>/*</i></td></tr>
<tr><th id="1535">1535</th><td><i> * Endianness checks</i></td></tr>
<tr><th id="1536">1536</th><td><i> *</i></td></tr>
<tr><th id="1537">1537</th><td><i> * These define MPACK_NHSWAP*() which swap network&lt;-&gt;host byte</i></td></tr>
<tr><th id="1538">1538</th><td><i> * order when needed.</i></td></tr>
<tr><th id="1539">1539</th><td><i> *</i></td></tr>
<tr><th id="1540">1540</th><td><i> * We leave them undefined if we can't determine the endianness</i></td></tr>
<tr><th id="1541">1541</th><td><i> * at compile-time, in which case we fall back to bit-shifts.</i></td></tr>
<tr><th id="1542">1542</th><td><i> *</i></td></tr>
<tr><th id="1543">1543</th><td><i> * See the notes in mpack-common.h.</i></td></tr>
<tr><th id="1544">1544</th><td><i> */</i></td></tr>
<tr><th id="1545">1545</th><td></td></tr>
<tr><th id="1546">1546</th><td><u>#<span data-ppcond="1546">if</span> defined(<span class="macro" data-ref="_M/__BYTE_ORDER__">__BYTE_ORDER__</span>) &amp;&amp; defined(<span class="macro" data-ref="_M/__ORDER_LITTLE_ENDIAN__">__ORDER_LITTLE_ENDIAN__</span>) &amp;&amp; defined(<span class="macro" data-ref="_M/__ORDER_BIG_ENDIAN__">__ORDER_BIG_ENDIAN__</span>)</u></td></tr>
<tr><th id="1547">1547</th><td>    <u>#<span data-ppcond="1547">if</span> <span class="macro" title="1234" data-ref="_M/__BYTE_ORDER__">__BYTE_ORDER__</span> == <span class="macro" title="4321" data-ref="_M/__ORDER_BIG_ENDIAN__">__ORDER_BIG_ENDIAN__</span></u></td></tr>
<tr><th id="1548">1548</th><td>        <u>#define MPACK_NHSWAP16(x) (x)</u></td></tr>
<tr><th id="1549">1549</th><td>        <u>#define MPACK_NHSWAP32(x) (x)</u></td></tr>
<tr><th id="1550">1550</th><td>        <u>#define MPACK_NHSWAP64(x) (x)</u></td></tr>
<tr><th id="1551">1551</th><td>    <u>#<span data-ppcond="1547">elif</span> <span class="macro" title="1234" data-ref="_M/__BYTE_ORDER__">__BYTE_ORDER__</span> == <span class="macro" title="1234" data-ref="_M/__ORDER_LITTLE_ENDIAN__">__ORDER_LITTLE_ENDIAN__</span></u></td></tr>
<tr><th id="1552">1552</th><td></td></tr>
<tr><th id="1553">1553</th><td>        <u>#<span data-ppcond="1553">if</span> !<a class="macro" href="#135" title="0" data-ref="_M/MPACK_NO_BUILTINS">MPACK_NO_BUILTINS</a></u></td></tr>
<tr><th id="1554">1554</th><td>            <u>#<span data-ppcond="1554">if</span> defined(<span class="macro" data-ref="_M/__clang__">__clang__</span>)</u></td></tr>
<tr><th id="1555">1555</th><td>                <u>#<span data-ppcond="1555">ifdef</span> <span class="macro" data-ref="_M/__has_builtin">__has_builtin</span></u></td></tr>
<tr><th id="1556">1556</th><td>                    <i>// Unlike the GCC builtins, the bswap builtins in Clang</i></td></tr>
<tr><th id="1557">1557</th><td><i>                    // significantly improve ARM performance.</i></td></tr>
<tr><th id="1558">1558</th><td>                    <u>#<span data-ppcond="1558">if</span> <span class="macro" title="" data-ref="_M/__has_builtin">__has_builtin</span>(__builtin_bswap16)</u></td></tr>
<tr><th id="1559">1559</th><td>                        <u>#define <dfn class="macro" id="_M/MPACK_NHSWAP16" data-ref="_M/MPACK_NHSWAP16">MPACK_NHSWAP16</dfn>(x) __builtin_bswap16(x)</u></td></tr>
<tr><th id="1560">1560</th><td>                    <u>#<span data-ppcond="1558">endif</span></u></td></tr>
<tr><th id="1561">1561</th><td>                    <u>#<span data-ppcond="1561">if</span> <span class="macro" title="" data-ref="_M/__has_builtin">__has_builtin</span>(__builtin_bswap32)</u></td></tr>
<tr><th id="1562">1562</th><td>                        <u>#define <dfn class="macro" id="_M/MPACK_NHSWAP32" data-ref="_M/MPACK_NHSWAP32">MPACK_NHSWAP32</dfn>(x) __builtin_bswap32(x)</u></td></tr>
<tr><th id="1563">1563</th><td>                    <u>#<span data-ppcond="1561">endif</span></u></td></tr>
<tr><th id="1564">1564</th><td>                    <u>#<span data-ppcond="1564">if</span> <span class="macro" title="" data-ref="_M/__has_builtin">__has_builtin</span>(__builtin_bswap64)</u></td></tr>
<tr><th id="1565">1565</th><td>                        <u>#define <dfn class="macro" id="_M/MPACK_NHSWAP64" data-ref="_M/MPACK_NHSWAP64">MPACK_NHSWAP64</dfn>(x) __builtin_bswap64(x)</u></td></tr>
<tr><th id="1566">1566</th><td>                    <u>#<span data-ppcond="1564">endif</span></u></td></tr>
<tr><th id="1567">1567</th><td>                <u>#<span data-ppcond="1555">endif</span></u></td></tr>
<tr><th id="1568">1568</th><td></td></tr>
<tr><th id="1569">1569</th><td>            <u>#<span data-ppcond="1554">elif</span> defined(__GNUC__)</u></td></tr>
<tr><th id="1570">1570</th><td></td></tr>
<tr><th id="1571">1571</th><td>                <i>// The GCC bswap builtins are apparently poorly optimized on older</i></td></tr>
<tr><th id="1572">1572</th><td><i>                // versions of GCC, so we set a minimum version here just in case.</i></td></tr>
<tr><th id="1573">1573</th><td><i>                //     <a href="http://hardwarebug.org/2010/01/14/beware-the-builtins/">http://hardwarebug.org/2010/01/14/beware-the-builtins/</a></i></td></tr>
<tr><th id="1574">1574</th><td></td></tr>
<tr><th id="1575">1575</th><td>                <u>#if __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 5)</u></td></tr>
<tr><th id="1576">1576</th><td>                    <u>#define MPACK_NHSWAP64(x) __builtin_bswap64(x)</u></td></tr>
<tr><th id="1577">1577</th><td>                <u>#endif</u></td></tr>
<tr><th id="1578">1578</th><td></td></tr>
<tr><th id="1579">1579</th><td>                <i>// __builtin_bswap16() was not implemented on all platforms</i></td></tr>
<tr><th id="1580">1580</th><td><i>                // until GCC 4.8.0:</i></td></tr>
<tr><th id="1581">1581</th><td><i>                //     <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=52624">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=52624</a></i></td></tr>
<tr><th id="1582">1582</th><td><i>                //</i></td></tr>
<tr><th id="1583">1583</th><td><i>                // The 16- and 32-bit versions in GCC significantly reduce performance</i></td></tr>
<tr><th id="1584">1584</th><td><i>                // on ARM with little effect on code size so we don't use them.</i></td></tr>
<tr><th id="1585">1585</th><td></td></tr>
<tr><th id="1586">1586</th><td>            <u>#<span data-ppcond="1554">endif</span></u></td></tr>
<tr><th id="1587">1587</th><td>        <u>#<span data-ppcond="1553">endif</span></u></td></tr>
<tr><th id="1588">1588</th><td>    <u>#<span data-ppcond="1547">endif</span></u></td></tr>
<tr><th id="1589">1589</th><td></td></tr>
<tr><th id="1590">1590</th><td><u>#<span data-ppcond="1546">elif</span> defined(_MSC_VER) &amp;&amp; defined(_WIN32) &amp;&amp; MPACK_STDLIB &amp;&amp; !MPACK_NO_BUILTINS</u></td></tr>
<tr><th id="1591">1591</th><td></td></tr>
<tr><th id="1592">1592</th><td>    <i>// On Windows, we assume x86 and x86_64 are always little-endian.</i></td></tr>
<tr><th id="1593">1593</th><td><i>    // We make no assumptions about ARM even though all current</i></td></tr>
<tr><th id="1594">1594</th><td><i>    // Windows Phone devices are little-endian in case Microsoft's</i></td></tr>
<tr><th id="1595">1595</th><td><i>    // compiler is ever used with a big-endian ARM device.</i></td></tr>
<tr><th id="1596">1596</th><td><i></i></td></tr>
<tr><th id="1597">1597</th><td><i>    // These are functions in &lt;stdlib.h&gt; so we depend on MPACK_STDLIB.</i></td></tr>
<tr><th id="1598">1598</th><td><i>    // It's not clear if these are actually faster than just doing the</i></td></tr>
<tr><th id="1599">1599</th><td><i>    // swap manually; maybe we shouldn't bother with this.</i></td></tr>
<tr><th id="1600">1600</th><td></td></tr>
<tr><th id="1601">1601</th><td>    <u>#if defined(_M_IX86) || defined(_M_X64) || defined(_M_AMD64)</u></td></tr>
<tr><th id="1602">1602</th><td>        <u>#define MPACK_NHSWAP16(x) _byteswap_ushort(x)</u></td></tr>
<tr><th id="1603">1603</th><td>        <u>#define MPACK_NHSWAP32(x) _byteswap_ulong(x)</u></td></tr>
<tr><th id="1604">1604</th><td>        <u>#define MPACK_NHSWAP64(x) _byteswap_uint64(x)</u></td></tr>
<tr><th id="1605">1605</th><td>    <u>#endif</u></td></tr>
<tr><th id="1606">1606</th><td></td></tr>
<tr><th id="1607">1607</th><td><u>#<span data-ppcond="1546">endif</span></u></td></tr>
<tr><th id="1608">1608</th><td></td></tr>
<tr><th id="1609">1609</th><td><u>#<span data-ppcond="1609">if</span> defined(<span class="macro" data-ref="_M/__FLOAT_WORD_ORDER__">__FLOAT_WORD_ORDER__</span>) &amp;&amp; defined(<span class="macro" data-ref="_M/__BYTE_ORDER__">__BYTE_ORDER__</span>)</u></td></tr>
<tr><th id="1610">1610</th><td></td></tr>
<tr><th id="1611">1611</th><td>    <i>// We check where possible that the float byte order matches the</i></td></tr>
<tr><th id="1612">1612</th><td><i>    // integer byte order. This is extremely unlikely to fail, but</i></td></tr>
<tr><th id="1613">1613</th><td><i>    // we check anyway just in case.</i></td></tr>
<tr><th id="1614">1614</th><td><i>    //</i></td></tr>
<tr><th id="1615">1615</th><td><i>    // (The static assert is placed in float/double encoders instead</i></td></tr>
<tr><th id="1616">1616</th><td><i>    // of here because our static assert fallback doesn't work at</i></td></tr>
<tr><th id="1617">1617</th><td><i>    // file scope)</i></td></tr>
<tr><th id="1618">1618</th><td></td></tr>
<tr><th id="1619">1619</th><td>    <u>#define MPACK_CHECK_FLOAT_ORDER() \</u></td></tr>
<tr><th id="1620">1620</th><td><u>        MPACK_STATIC_ASSERT(__FLOAT_WORD_ORDER__ == __BYTE_ORDER__, \</u></td></tr>
<tr><th id="1621">1621</th><td><u>            "float byte order does not match int byte order! float/double " \</u></td></tr>
<tr><th id="1622">1622</th><td><u>            "encoding is not properly implemented on this platform.")</u></td></tr>
<tr><th id="1623">1623</th><td></td></tr>
<tr><th id="1624">1624</th><td><u>#<span data-ppcond="1609">endif</span></u></td></tr>
<tr><th id="1625">1625</th><td></td></tr>
<tr><th id="1626">1626</th><td><u>#<span data-ppcond="1626">ifndef</span> <span class="macro" data-ref="_M/MPACK_CHECK_FLOAT_ORDER">MPACK_CHECK_FLOAT_ORDER</span></u></td></tr>
<tr><th id="1627">1627</th><td>    <u>#define <dfn class="macro" id="_M/MPACK_CHECK_FLOAT_ORDER" data-ref="_M/MPACK_CHECK_FLOAT_ORDER">MPACK_CHECK_FLOAT_ORDER</dfn>() /* nothing */</u></td></tr>
<tr><th id="1628">1628</th><td><u>#<span data-ppcond="1626">endif</span></u></td></tr>
<tr><th id="1629">1629</th><td></td></tr>
<tr><th id="1630">1630</th><td></td></tr>
<tr><th id="1631">1631</th><td><i>/*</i></td></tr>
<tr><th id="1632">1632</th><td><i> * Here we define mpack_assert() and mpack_break(). They both work like a normal</i></td></tr>
<tr><th id="1633">1633</th><td><i> * assertion function in debug mode, causing a trap or abort. However, on some platforms</i></td></tr>
<tr><th id="1634">1634</th><td><i> * you can safely resume execution from mpack_break(), whereas mpack_assert() is</i></td></tr>
<tr><th id="1635">1635</th><td><i> * always fatal.</i></td></tr>
<tr><th id="1636">1636</th><td><i> *</i></td></tr>
<tr><th id="1637">1637</th><td><i> * In release mode, mpack_assert() is converted to an assurance to the compiler</i></td></tr>
<tr><th id="1638">1638</th><td><i> * that the expression cannot be false (via e.g. __assume() or __builtin_unreachable())</i></td></tr>
<tr><th id="1639">1639</th><td><i> * to improve optimization where supported. There is thus no point in "safely" handling</i></td></tr>
<tr><th id="1640">1640</th><td><i> * the case of this being false. Writing mpack_assert(0) rarely makes sense (except</i></td></tr>
<tr><th id="1641">1641</th><td><i> * possibly as a default handler in a switch) since the compiler will throw away any</i></td></tr>
<tr><th id="1642">1642</th><td><i> * code after it. If at any time an mpack_assert() is not true, the behaviour is</i></td></tr>
<tr><th id="1643">1643</th><td><i> * undefined. This also means the expression is evaluated even in release.</i></td></tr>
<tr><th id="1644">1644</th><td><i> *</i></td></tr>
<tr><th id="1645">1645</th><td><i> * mpack_break() on the other hand is compiled to nothing in release. It is</i></td></tr>
<tr><th id="1646">1646</th><td><i> * used in situations where we want to highlight a programming error as early as</i></td></tr>
<tr><th id="1647">1647</th><td><i> * possible (in the debugger), but we still handle the situation safely if it</i></td></tr>
<tr><th id="1648">1648</th><td><i> * happens in release to avoid producing incorrect results (such as in</i></td></tr>
<tr><th id="1649">1649</th><td><i> * MPACK_WRITE_TRACKING.) It does not take an expression to test because it</i></td></tr>
<tr><th id="1650">1650</th><td><i> * belongs in a safe-handling block after its failing condition has been tested.</i></td></tr>
<tr><th id="1651">1651</th><td><i> *</i></td></tr>
<tr><th id="1652">1652</th><td><i> * If stdio is available, we can add a format string describing the error, and</i></td></tr>
<tr><th id="1653">1653</th><td><i> * on some compilers we can declare it noreturn to get correct results from static</i></td></tr>
<tr><th id="1654">1654</th><td><i> * analysis tools. Note that the format string and arguments are not evaluated unless</i></td></tr>
<tr><th id="1655">1655</th><td><i> * the assertion is hit.</i></td></tr>
<tr><th id="1656">1656</th><td><i> *</i></td></tr>
<tr><th id="1657">1657</th><td><i> * Note that any arguments to mpack_assert() beyond the first are only evaluated</i></td></tr>
<tr><th id="1658">1658</th><td><i> * if the expression is false (and are never evaluated in release.)</i></td></tr>
<tr><th id="1659">1659</th><td><i> *</i></td></tr>
<tr><th id="1660">1660</th><td><i> * mpack_assert_fail() and mpack_break_hit() are defined separately</i></td></tr>
<tr><th id="1661">1661</th><td><i> * because assert is noreturn and break isn't. This distinction is very</i></td></tr>
<tr><th id="1662">1662</th><td><i> * important for static analysis tools to give correct results.</i></td></tr>
<tr><th id="1663">1663</th><td><i> */</i></td></tr>
<tr><th id="1664">1664</th><td></td></tr>
<tr><th id="1665">1665</th><td><u>#<span data-ppcond="1665">if</span> <a class="macro" href="#645" title="0" data-ref="_M/MPACK_DEBUG">MPACK_DEBUG</a></u></td></tr>
<tr><th id="1666">1666</th><td>    MPACK_NORETURN(<em>void</em> mpack_assert_fail_wrapper(<em>const</em> <em>char</em>* message));</td></tr>
<tr><th id="1667">1667</th><td>    <u>#if MPACK_STDIO</u></td></tr>
<tr><th id="1668">1668</th><td>        MPACK_NORETURN(<em>void</em> mpack_assert_fail_format(<em>const</em> <em>char</em>* format, ...));</td></tr>
<tr><th id="1669">1669</th><td>        <u>#define mpack_assert_fail_at(line, file, exprstr, format, ...) \</u></td></tr>
<tr><th id="1670">1670</th><td><u>                MPACK_EXPAND(mpack_assert_fail_format("mpack assertion failed at " file ":" #line "\n%s\n" format, exprstr, __VA_ARGS__))</u></td></tr>
<tr><th id="1671">1671</th><td>    <u>#else</u></td></tr>
<tr><th id="1672">1672</th><td>        <u>#define mpack_assert_fail_at(line, file, exprstr, format, ...) \</u></td></tr>
<tr><th id="1673">1673</th><td><u>                mpack_assert_fail_wrapper("mpack assertion failed at " file ":" #line "\n" exprstr "\n")</u></td></tr>
<tr><th id="1674">1674</th><td>    <u>#endif</u></td></tr>
<tr><th id="1675">1675</th><td></td></tr>
<tr><th id="1676">1676</th><td>    <u>#define mpack_assert_fail_pos(line, file, exprstr, expr, ...) \</u></td></tr>
<tr><th id="1677">1677</th><td><u>            MPACK_EXPAND(mpack_assert_fail_at(line, file, exprstr, __VA_ARGS__))</u></td></tr>
<tr><th id="1678">1678</th><td></td></tr>
<tr><th id="1679">1679</th><td>    <i>// This contains a workaround to the pedantic C99 requirement of having at</i></td></tr>
<tr><th id="1680">1680</th><td><i>    // least one argument to a variadic macro. The first argument is the</i></td></tr>
<tr><th id="1681">1681</th><td><i>    // boolean expression, the optional second argument (if provided) must be a</i></td></tr>
<tr><th id="1682">1682</th><td><i>    // literal format string, and any additional arguments are the format</i></td></tr>
<tr><th id="1683">1683</th><td><i>    // argument list.</i></td></tr>
<tr><th id="1684">1684</th><td><i>    //</i></td></tr>
<tr><th id="1685">1685</th><td><i>    // Unfortunately this means macros are expanded in the expression before it</i></td></tr>
<tr><th id="1686">1686</th><td><i>    // gets stringified. I haven't found a workaround to this.</i></td></tr>
<tr><th id="1687">1687</th><td><i>    //</i></td></tr>
<tr><th id="1688">1688</th><td><i>    // This adds two unused arguments to the format argument list when a</i></td></tr>
<tr><th id="1689">1689</th><td><i>    // format string is provided, so this would complicate the use of</i></td></tr>
<tr><th id="1690">1690</th><td><i>    // -Wformat and __attribute__((__format__)) on mpack_assert_fail_format()</i></td></tr>
<tr><th id="1691">1691</th><td><i>    // if we ever bothered to implement it.</i></td></tr>
<tr><th id="1692">1692</th><td>    <u>#define mpack_assert(...) \</u></td></tr>
<tr><th id="1693">1693</th><td><u>            MPACK_EXPAND(((!(MPACK_EXTRACT_ARG0(__VA_ARGS__))) ? \</u></td></tr>
<tr><th id="1694">1694</th><td><u>                mpack_assert_fail_pos(__LINE__, __FILE__, MPACK_STRINGIFY_ARG0(__VA_ARGS__) , __VA_ARGS__ , "", NULL) : \</u></td></tr>
<tr><th id="1695">1695</th><td><u>                (void)0))</u></td></tr>
<tr><th id="1696">1696</th><td></td></tr>
<tr><th id="1697">1697</th><td>    <em>void</em> mpack_break_hit(<em>const</em> <em>char</em>* message);</td></tr>
<tr><th id="1698">1698</th><td>    <u>#if MPACK_STDIO</u></td></tr>
<tr><th id="1699">1699</th><td>        <em>void</em> mpack_break_hit_format(<em>const</em> <em>char</em>* format, ...);</td></tr>
<tr><th id="1700">1700</th><td>        <u>#define mpack_break_hit_at(line, file, ...) \</u></td></tr>
<tr><th id="1701">1701</th><td><u>                MPACK_EXPAND(mpack_break_hit_format("mpack breakpoint hit at " file ":" #line "\n" __VA_ARGS__))</u></td></tr>
<tr><th id="1702">1702</th><td>    <u>#else</u></td></tr>
<tr><th id="1703">1703</th><td>        <u>#define mpack_break_hit_at(line, file, ...) \</u></td></tr>
<tr><th id="1704">1704</th><td><u>                mpack_break_hit("mpack breakpoint hit at " file ":" #line )</u></td></tr>
<tr><th id="1705">1705</th><td>    <u>#endif</u></td></tr>
<tr><th id="1706">1706</th><td>    <u>#define mpack_break_hit_pos(line, file, ...) MPACK_EXPAND(mpack_break_hit_at(line, file, __VA_ARGS__))</u></td></tr>
<tr><th id="1707">1707</th><td>    <u>#define mpack_break(...) MPACK_EXPAND(mpack_break_hit_pos(__LINE__, __FILE__, __VA_ARGS__))</u></td></tr>
<tr><th id="1708">1708</th><td><u>#<span data-ppcond="1665">else</span></u></td></tr>
<tr><th id="1709">1709</th><td>    <u>#define <dfn class="macro" id="_M/mpack_assert" data-ref="_M/mpack_assert">mpack_assert</dfn>(...) \</u></td></tr>
<tr><th id="1710">1710</th><td><u>            (MPACK_EXPAND((!(MPACK_EXTRACT_ARG0(__VA_ARGS__))) ? \</u></td></tr>
<tr><th id="1711">1711</th><td><u>                (MPACK_UNREACHABLE, (void)0) : \</u></td></tr>
<tr><th id="1712">1712</th><td><u>                (void)0))</u></td></tr>
<tr><th id="1713">1713</th><td>    <u>#define <dfn class="macro" id="_M/mpack_break" data-ref="_M/mpack_break">mpack_break</dfn>(...) ((void)0)</u></td></tr>
<tr><th id="1714">1714</th><td><u>#<span data-ppcond="1665">endif</span></u></td></tr>
<tr><th id="1715">1715</th><td></td></tr>
<tr><th id="1716">1716</th><td></td></tr>
<tr><th id="1717">1717</th><td></td></tr>
<tr><th id="1718">1718</th><td><i>// make sure we don't use the stdlib directly during development</i></td></tr>
<tr><th id="1719">1719</th><td><u>#<span data-ppcond="1719">if</span> <a class="macro" href="#315" title="1" data-ref="_M/MPACK_STDLIB">MPACK_STDLIB</a> &amp;&amp; defined(<span class="macro" data-ref="_M/MPACK_UNIT_TESTS">MPACK_UNIT_TESTS</span>) &amp;&amp; <a class="macro" href="#936" title="0" data-ref="_M/MPACK_INTERNAL">MPACK_INTERNAL</a> &amp;&amp; defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>)</u></td></tr>
<tr><th id="1720">1720</th><td>    <u>#undef memcmp</u></td></tr>
<tr><th id="1721">1721</th><td>    <u>#undef memcpy</u></td></tr>
<tr><th id="1722">1722</th><td>    <u>#undef memmove</u></td></tr>
<tr><th id="1723">1723</th><td>    <u>#undef memset</u></td></tr>
<tr><th id="1724">1724</th><td>    <u>#undef strlen</u></td></tr>
<tr><th id="1725">1725</th><td>    <u>#undef malloc</u></td></tr>
<tr><th id="1726">1726</th><td>    <u>#undef calloc</u></td></tr>
<tr><th id="1727">1727</th><td>    <u>#undef realloc</u></td></tr>
<tr><th id="1728">1728</th><td>    <u>#undef free</u></td></tr>
<tr><th id="1729">1729</th><td>    <u>#pragma GCC poison memcmp</u></td></tr>
<tr><th id="1730">1730</th><td>    <u>#pragma GCC poison memcpy</u></td></tr>
<tr><th id="1731">1731</th><td>    <u>#pragma GCC poison memmove</u></td></tr>
<tr><th id="1732">1732</th><td>    <u>#pragma GCC poison memset</u></td></tr>
<tr><th id="1733">1733</th><td>    <u>#pragma GCC poison strlen</u></td></tr>
<tr><th id="1734">1734</th><td>    <u>#pragma GCC poison malloc</u></td></tr>
<tr><th id="1735">1735</th><td>    <u>#pragma GCC poison calloc</u></td></tr>
<tr><th id="1736">1736</th><td>    <u>#pragma GCC poison realloc</u></td></tr>
<tr><th id="1737">1737</th><td>    <u>#pragma GCC poison free</u></td></tr>
<tr><th id="1738">1738</th><td><u>#<span data-ppcond="1719">endif</span></u></td></tr>
<tr><th id="1739">1739</th><td></td></tr>
<tr><th id="1740">1740</th><td></td></tr>
<tr><th id="1741">1741</th><td></td></tr>
<tr><th id="1742">1742</th><td><i>// If we don't have these stdlib functions, we need to define them ourselves.</i></td></tr>
<tr><th id="1743">1743</th><td><i>// Either way we give them a lowercase name to make the code a bit nicer.</i></td></tr>
<tr><th id="1744">1744</th><td></td></tr>
<tr><th id="1745">1745</th><td><u>#<span data-ppcond="1745">ifdef</span> <a class="macro" href="#569" data-ref="_M/MPACK_MEMCMP">MPACK_MEMCMP</a></u></td></tr>
<tr><th id="1746">1746</th><td>    <u>#define <dfn class="macro" id="_M/mpack_memcmp" data-ref="_M/mpack_memcmp">mpack_memcmp</dfn> MPACK_MEMCMP</u></td></tr>
<tr><th id="1747">1747</th><td><u>#<span data-ppcond="1745">else</span></u></td></tr>
<tr><th id="1748">1748</th><td>    <em>int</em> mpack_memcmp(<em>const</em> <em>void</em>* s1, <em>const</em> <em>void</em>* s2, size_t n);</td></tr>
<tr><th id="1749">1749</th><td><u>#<span data-ppcond="1745">endif</span></u></td></tr>
<tr><th id="1750">1750</th><td></td></tr>
<tr><th id="1751">1751</th><td><u>#<span data-ppcond="1751">ifdef</span> <a class="macro" href="#572" data-ref="_M/MPACK_MEMCPY">MPACK_MEMCPY</a></u></td></tr>
<tr><th id="1752">1752</th><td>    <u>#define <dfn class="macro" id="_M/mpack_memcpy" data-ref="_M/mpack_memcpy">mpack_memcpy</dfn> MPACK_MEMCPY</u></td></tr>
<tr><th id="1753">1753</th><td><u>#<span data-ppcond="1751">else</span></u></td></tr>
<tr><th id="1754">1754</th><td>    <em>void</em>* mpack_memcpy(<em>void</em>* MPACK_RESTRICT s1, <em>const</em> <em>void</em>* MPACK_RESTRICT s2, size_t n);</td></tr>
<tr><th id="1755">1755</th><td><u>#<span data-ppcond="1751">endif</span></u></td></tr>
<tr><th id="1756">1756</th><td></td></tr>
<tr><th id="1757">1757</th><td><u>#<span data-ppcond="1757">ifdef</span> <a class="macro" href="#575" data-ref="_M/MPACK_MEMMOVE">MPACK_MEMMOVE</a></u></td></tr>
<tr><th id="1758">1758</th><td>    <u>#define <dfn class="macro" id="_M/mpack_memmove" data-ref="_M/mpack_memmove">mpack_memmove</dfn> MPACK_MEMMOVE</u></td></tr>
<tr><th id="1759">1759</th><td><u>#<span data-ppcond="1757">else</span></u></td></tr>
<tr><th id="1760">1760</th><td>    <em>void</em>* mpack_memmove(<em>void</em>* s1, <em>const</em> <em>void</em>* s2, size_t n);</td></tr>
<tr><th id="1761">1761</th><td><u>#<span data-ppcond="1757">endif</span></u></td></tr>
<tr><th id="1762">1762</th><td></td></tr>
<tr><th id="1763">1763</th><td><u>#<span data-ppcond="1763">ifdef</span> <a class="macro" href="#578" data-ref="_M/MPACK_MEMSET">MPACK_MEMSET</a></u></td></tr>
<tr><th id="1764">1764</th><td>    <u>#define <dfn class="macro" id="_M/mpack_memset" data-ref="_M/mpack_memset">mpack_memset</dfn> MPACK_MEMSET</u></td></tr>
<tr><th id="1765">1765</th><td><u>#<span data-ppcond="1763">else</span></u></td></tr>
<tr><th id="1766">1766</th><td>    <em>void</em>* mpack_memset(<em>void</em>* s, <em>int</em> c, size_t n);</td></tr>
<tr><th id="1767">1767</th><td><u>#<span data-ppcond="1763">endif</span></u></td></tr>
<tr><th id="1768">1768</th><td></td></tr>
<tr><th id="1769">1769</th><td><u>#<span data-ppcond="1769">ifdef</span> <a class="macro" href="#581" data-ref="_M/MPACK_STRLEN">MPACK_STRLEN</a></u></td></tr>
<tr><th id="1770">1770</th><td>    <u>#define <dfn class="macro" id="_M/mpack_strlen" data-ref="_M/mpack_strlen">mpack_strlen</dfn> MPACK_STRLEN</u></td></tr>
<tr><th id="1771">1771</th><td><u>#<span data-ppcond="1769">else</span></u></td></tr>
<tr><th id="1772">1772</th><td>    size_t mpack_strlen(<em>const</em> <em>char</em>* s);</td></tr>
<tr><th id="1773">1773</th><td><u>#<span data-ppcond="1769">endif</span></u></td></tr>
<tr><th id="1774">1774</th><td></td></tr>
<tr><th id="1775">1775</th><td></td></tr>
<tr><th id="1776">1776</th><td></td></tr>
<tr><th id="1777">1777</th><td><u>#<span data-ppcond="1777">if</span> <a class="macro" href="#329" title="1" data-ref="_M/MPACK_STDIO">MPACK_STDIO</a></u></td></tr>
<tr><th id="1778">1778</th><td>    <u>#<span data-ppcond="1778">if</span> defined(<span class="macro" data-ref="_M/WIN32">WIN32</span>)</u></td></tr>
<tr><th id="1779">1779</th><td>        <u>#define mpack_snprintf _snprintf</u></td></tr>
<tr><th id="1780">1780</th><td>    <u>#<span data-ppcond="1778">else</span></u></td></tr>
<tr><th id="1781">1781</th><td>        <u>#define <dfn class="macro" id="_M/mpack_snprintf" data-ref="_M/mpack_snprintf">mpack_snprintf</dfn> snprintf</u></td></tr>
<tr><th id="1782">1782</th><td>    <u>#<span data-ppcond="1778">endif</span></u></td></tr>
<tr><th id="1783">1783</th><td><u>#<span data-ppcond="1777">endif</span></u></td></tr>
<tr><th id="1784">1784</th><td></td></tr>
<tr><th id="1785">1785</th><td></td></tr>
<tr><th id="1786">1786</th><td></td></tr>
<tr><th id="1787">1787</th><td><i>/* Debug logging */</i></td></tr>
<tr><th id="1788">1788</th><td><u>#<span data-ppcond="1788">if</span> 0</u></td></tr>
<tr><th id="1789">1789</th><td>    <u>#include &lt;stdio.h&gt;</u></td></tr>
<tr><th id="1790">1790</th><td>    <u>#define mpack_log(...) (MPACK_EXPAND(printf(__VA_ARGS__)), fflush(stdout))</u></td></tr>
<tr><th id="1791">1791</th><td><u>#<span data-ppcond="1788">else</span></u></td></tr>
<tr><th id="1792">1792</th><td>    <u>#define <dfn class="macro" id="_M/mpack_log" data-ref="_M/mpack_log">mpack_log</dfn>(...) ((void)0)</u></td></tr>
<tr><th id="1793">1793</th><td><u>#<span data-ppcond="1788">endif</span></u></td></tr>
<tr><th id="1794">1794</th><td></td></tr>
<tr><th id="1795">1795</th><td></td></tr>
<tr><th id="1796">1796</th><td></td></tr>
<tr><th id="1797">1797</th><td><i>/* Make sure our configuration makes sense */</i></td></tr>
<tr><th id="1798">1798</th><td><u>#<span data-ppcond="1798">ifndef</span> <a class="macro" href="#459" data-ref="_M/MPACK_MALLOC">MPACK_MALLOC</a></u></td></tr>
<tr><th id="1799">1799</th><td>    <u>#if MPACK_STDIO</u></td></tr>
<tr><th id="1800">1800</th><td>        <u>#error "MPACK_STDIO requires preprocessor definitions for MPACK_MALLOC and MPACK_FREE."</u></td></tr>
<tr><th id="1801">1801</th><td>    <u>#endif</u></td></tr>
<tr><th id="1802">1802</th><td>    <u>#if MPACK_READ_TRACKING</u></td></tr>
<tr><th id="1803">1803</th><td>        <u>#error "MPACK_READ_TRACKING requires preprocessor definitions for MPACK_MALLOC and MPACK_FREE."</u></td></tr>
<tr><th id="1804">1804</th><td>    <u>#endif</u></td></tr>
<tr><th id="1805">1805</th><td>    <u>#if MPACK_WRITE_TRACKING</u></td></tr>
<tr><th id="1806">1806</th><td>        <u>#error "MPACK_WRITE_TRACKING requires preprocessor definitions for MPACK_MALLOC and MPACK_FREE."</u></td></tr>
<tr><th id="1807">1807</th><td>    <u>#endif</u></td></tr>
<tr><th id="1808">1808</th><td><u>#<span data-ppcond="1798">endif</span></u></td></tr>
<tr><th id="1809">1809</th><td></td></tr>
<tr><th id="1810">1810</th><td></td></tr>
<tr><th id="1811">1811</th><td></td></tr>
<tr><th id="1812">1812</th><td><i>/* Implement realloc if unavailable */</i></td></tr>
<tr><th id="1813">1813</th><td><u>#<span data-ppcond="1813">ifdef</span> <a class="macro" href="#459" data-ref="_M/MPACK_MALLOC">MPACK_MALLOC</a></u></td></tr>
<tr><th id="1814">1814</th><td>    <u>#<span data-ppcond="1814">ifdef</span> <a class="macro" href="#460" data-ref="_M/MPACK_REALLOC">MPACK_REALLOC</a></u></td></tr>
<tr><th id="1815">1815</th><td>        <a class="macro" href="#1256" title="inline" data-ref="_M/MPACK_INLINE">MPACK_INLINE</a> <em>void</em>* <dfn class="decl def fn" id="mpack_realloc" title='mpack_realloc' data-ref="mpack_realloc" data-ref-filename="mpack_realloc">mpack_realloc</dfn>(<em>void</em>* <dfn class="local col1 decl" id="1old_ptr" title='old_ptr' data-type='void *' data-ref="1old_ptr" data-ref-filename="1old_ptr">old_ptr</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="2used_size" title='used_size' data-type='size_t' data-ref="2used_size" data-ref-filename="2used_size">used_size</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="3new_size" title='new_size' data-type='size_t' data-ref="3new_size" data-ref-filename="3new_size">new_size</dfn>) {</td></tr>
<tr><th id="1816">1816</th><td>            <a class="macro" href="#1156" title="((void)(used_size))" data-ref="_M/MPACK_UNUSED">MPACK_UNUSED</a>(<a class="local col2 ref" href="#2used_size" title='used_size' data-ref="2used_size" data-ref-filename="2used_size">used_size</a>);</td></tr>
<tr><th id="1817">1817</th><td>            <b>return</b> <a class="macro" href="#460" title="realloc" data-ref="_M/MPACK_REALLOC">MPACK_REALLOC</a>(<a class="local col1 ref" href="#1old_ptr" title='old_ptr' data-ref="1old_ptr" data-ref-filename="1old_ptr">old_ptr</a>, <a class="local col3 ref" href="#3new_size" title='new_size' data-ref="3new_size" data-ref-filename="3new_size">new_size</a>);</td></tr>
<tr><th id="1818">1818</th><td>        }</td></tr>
<tr><th id="1819">1819</th><td>    <u>#<span data-ppcond="1814">else</span></u></td></tr>
<tr><th id="1820">1820</th><td>        <em>void</em>* mpack_realloc(<em>void</em>* old_ptr, size_t used_size, size_t new_size);</td></tr>
<tr><th id="1821">1821</th><td>    <u>#<span data-ppcond="1814">endif</span></u></td></tr>
<tr><th id="1822">1822</th><td><u>#<span data-ppcond="1813">endif</span></u></td></tr>
<tr><th id="1823">1823</th><td></td></tr>
<tr><th id="1824">1824</th><td></td></tr>
<tr><th id="1825">1825</th><td></td></tr>
<tr><th id="1826">1826</th><td><i class="doc">/**<span class="command"> @endcond</span> */</i></td></tr>
<tr><th id="1827">1827</th><td><i class="doc">/**</i></td></tr>
<tr><th id="1828">1828</th><td><i class="doc"> * @}</i></td></tr>
<tr><th id="1829">1829</th><td><i class="doc"> */</i></td></tr>
<tr><th id="1830">1830</th><td></td></tr>
<tr><th id="1831">1831</th><td><a class="macro" href="#1048" title="" data-ref="_M/MPACK_EXTERN_C_END">MPACK_EXTERN_C_END</a></td></tr>
<tr><th id="1832">1832</th><td><a class="macro" href="#1142" title="" data-ref="_M/MPACK_SILENCE_WARNINGS_END">MPACK_SILENCE_WARNINGS_END</a></td></tr>
<tr><th id="1833">1833</th><td></td></tr>
<tr><th id="1834">1834</th><td><u>#<span data-ppcond="37">endif</span></u></td></tr>
<tr><th id="1835">1835</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='../message.c.html'>codebrowser/src/message.c</a><br/>Generated on <em>2023-Jul-28</em> from project codebrowser revision <em>2.1</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
